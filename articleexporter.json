[{"title": "为什么码农要了解业务？", "url": "http://blog.jobbole.com/107275/", "url_object_id": "c8e1a285b335f2a803ddd35756a4148a", "create_date": "2018/06/12", "front_image_url": ["http://ww3.sinaimg.cn/mw690/7cc829d3gw1eizj4iuehrj20eq0b2gn2.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 2, "tags": "职场,程序员", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.toutiao.com/i6563215390107763208/\">来自 jerryhuang650 推荐\r\n</a>   </div><div>\n<p> 最近一位分析界的老前辈对我很无奈地摇摇头，“这帮程序员，不食人间烟火哪！”我也深有感触，全世界的码农都一个样。</p>\n<p>这让我想起了，同样也是他，在多年之前，对我提了警醒——要重视业务。从那之后，我一直狂奔在技术+业务的双修道路上。</p>\n<p>放在以前，码农这个族群一定是稀罕动物。但在今天，这个世界最不缺的应该就是码农了，未来最廉价的也将是码农。仅有泛泛一技，在未来并不吃香，因为那是要被机器人所取代的。</p>\n<p>这个世界，缺的是技术过硬又精通业务的工程师，缺的是真正能解决实际业务问题的人，缺的是复合型的人才。</p>\n<p>码农不是工程师，码农只是会写代码，只会明确需求和逻辑的情况下写代码。工程师则不一样，懂得用技术怎么解决实际业务问题，用技术驱动业务的发展。</p>\n<p><img class=\"alignnone\" src=\"http://ww3.sinaimg.cn/mw690/7cc829d3gw1eizj4iuehrj20eq0b2gn2.jpg\" width=\"530\" height=\"398\"></p>\n<h1><strong>什么叫业务？</strong></h1>\n<p>先来明确这个问题。</p>\n<p>业务是一个很实在的东西，看得见感受得到，接地气儿。</p>\n<p>业务就是我们所能理解和感受的世界，就是这个世界或者某个行业的运转逻辑、流程与现状，是结果表象，是能够被看见和感受的，也是内在本质，是能够被洞察和感知的。</p>\n<p>业务就是这个世界发生了什么，什么时候，谁参与，怎么发生，结果如何。</p>\n<p>业务就是什么时候，谁在哪里，买了什么东西，花了多少钱，用什么支付。</p>\n<p>业务就是这个行业怎么发展起来的，现状如何，未来趋势如何，用了什么技术，有什么企业，商业模式如何，盈利能力如何，目前主要面临什么问题，消费者有什么特点，等等。</p>\n<p>世界很复杂，单个细分行业的业务也很复杂。</p>\n<h1><strong>为什么要了解业务？</strong></h1>\n<p>谈到这个，码农们一定有所不悦，“熟悉业务是需求分析师做的事，跟我们没有关系。”</p>\n<p>打个不恰当的比喻。有10个人经过一栋写字楼，突然从楼上掉下来几块砖头，砸中了9个人，其中就有7个码农，3个硕士，1个博士（原谅我又犯职业病，拿数据说话了）。而没被砸到的那个人，恰好因为了解到之前经常发生这样的事而绕道行走。</p>\n<p>如果你只会写代码，你不是不可替代的，而是可有可无的。因为这年头，会JAVA、C、Python的程序员，在大街上一抓一大把。现在已经开始提倡，编程从娃娃抓起了。10后都开始跟你抢饭碗了，你怕不怕？</p>\n<p>但话也不是那么极端，除非你的技术很牛逼，在国内或者某个行业内能够排上号的。但技术牛逼的人，也不是只是技术超群，还常常因为能够利用手中的技术解决某方面的业务问题，做了哪些突出的贡献。我们出来混，也是要拿成果说话的，做过什么项目，有什么价值。这种价值往往就是针对业务而说的。</p>\n<p>IT研发与业务需求方常常是一对冤家，常常因为一个业务功能实现争辩得耳红面赤。研发觉得这个功能很low，没什么技术含量，业务方却认为这个功能却很有用，需要花功夫做细做深做好。现实情况是，功能做出来了，却很难用，或者经常用不了，或者数据不对。研发想做点高大上的功能，业务方却认为太虚了，没什么用。（IT与业务方那点事就不多说了，大家都心知肚明~~）</p>\n<p>多年经验反复告诫我，鉴定一个功能是不是好功能，唯一的标准是看它能否支撑业务、改善业务、推动业务，也即应用效果。一个产品，只要有30%的功能，让业务用户用起来很爽，感觉帮助很大，就已经是一个不错的产品了。</p>\n<p>我们都认同，技术驱动业务。但我们不一定明白，正是由于业务的某些强烈需求，才推动技术的发展与落地。</p>\n<p>说这些，我是想说，作为技术人员，我们既要仰望星空，也要脚踏实地，既要追逐腾飞的技术，也要重视落地的业务。</p>\n<p>如果一个业务人员很懂技术，那将很可能是技术人员的灾难。因为那样的话，业务人员会很强势，又或者那样就没有技术人员什么事了。</p>\n<p>当然，也不难想象，一个真正懂看数据的测试人员，就好比一个真正懂用算法的业务人员一样难得。</p>\n<h1><strong>业务与数据的关系</strong></h1>\n<p>真实（而不是杜撰、模拟、伪造）、可量化、可被记录的数据一定会反映真实世界某方面的业务情形。而现实当中很多业务场景都可由数据体现出来。</p>\n<p>零售是业务场景最繁多且最贴近我们生活的行业，可以从中找到很多方便理解的例子。</p>\n<p>当你在一个酷热难耐的夏天上午10点，走进位于公司附近的全家便利店，使用微信支付，花了3.5元，买了一瓶无糖330ml摩登罐的可乐，而且刷会员卡攒了100积分，而收银员MM返回给了你一张POS单据，这时你所发生的这一切都已经通过收银记录在了全家的数据库里。更糟糕的是，店里的摄像头也已经把你在店里的一举一动录了下来了，转化成为一帧帧图像数据。</p>\n<p>这就是，业务数据化。</p>\n<p>店长通过数据分析发现，最近3.5元330ml摩登罐可乐的销量比上月增长了20%，而消费者中75%是20-35岁的男性，相比之下，300ml塑料瓶装的可乐销量却下滑40%。店长权衡比较了一下，300ml塑料瓶装可乐利润低，330ml摩登罐可乐目前更受年轻人欢迎，考虑到日渐增长的租金压力，做了一个大胆的决定——下架300ml塑料瓶装可乐，增加330ml摩登罐可乐的商品。（又拿数据说话了。）</p>\n<p>这就是，数据业务化。</p>\n<p>或者，数据驱动业务。</p>\n<p>当我开始接触一个行业时，我通常会花2-3周的时间去了解这个行业的业务，然后就大致清楚这个行业有什么样的数据，可以做哪方面的分析，解决什么问题。</p>\n<p>当遇到不好理解的分析结果时，我经常使用业务联想法，设身处地去体会结果所反映的业务场景是什么样的。</p>\n<h1><strong>如何了解业务？</strong></h1>\n<p>这个说大了，就是如何看这个世界。每个人有每个人的方法论，每个人有每个人的世界观，每个人有每个人的逻辑思维。</p>\n<p>我们都知道，观念的转变是最难的，也有很多不确定性。有些人可能因为自己的切身体会一天就改变了之前几十年根深蒂固的看法，有些人任由三姑六婆苦口婆心地劝说就是不肯改变自己的择偶观，却有可能因为自己年岁渐大不断降低自己的标准。</p>\n<p>但最好也及早要形成科学的思考方法，帮助正确地理解这个世界。</p>\n<p>以“面-线-点”的方式可以较为全面、系统、深入地了解一个行业，然后是某个垂直领域，最后再到具体业务场景。</p>\n<p>佛系文化的流行，使得年轻一代降低对这个世界的关注度，一切都无所谓，一切都漠不关心。</p>\n<p>这个世界从来没有变好过，但我们每个人都是这个世界的匆匆过客，都是行走在自己的人生路上不断领略这个世界的美与丑。这世间的风景，这世间的悲欢离合，如果我们积极地探索与领悟，也不枉来这世间走一遭。</p>\n<p>保持好奇心，可以驱动我们的思考，强化我们的认知，丰富我们的内在。</p>\n<p>这是我想说的第二个方面。</p>\n<p>怀有好奇心，就会渐渐地敏锐观察这个世界，多问自己一些为什么。</p>\n<p>我家附近原来有个沃尔玛超市，现在地产商将它装修一番，引入了不少餐厅，刚开张不久，我就去那里吃饭，吃的是烤鸭，一个多两个月后，再去那里吃饭，发现有一半的餐厅已经关门了。</p>\n<p>在去地铁站的那条路上，每天人流如梭，一点点，即使到了深夜，依然有很多人在门口排队买奶茶。然而，仅仅隔了一个店铺的喜茶，做不下去，关门了。两三个月前又换成粉店，路转粉。每天下班路过时，发现店里顾客不到10个，门可罗雀。</p>\n<p>为什么每家一点点奶茶店门口，不管是什么时候都是很多人，他们是托儿还是真的顾客？</p>\n<p>因为喜欢新鲜，不喜欢在冰箱里存太多菜，且附近没有菜市场，所以常去买菜的还是附近的钱大妈。但我却没怎么去更近的一家生活超市，店面比较大，除果肉蔬菜外，也卖油盐酱醋，还有生活用品，但奇怪的是顾客却不到钱大妈的1/10。</p>\n<p>为什么几乎所有潮州牛肉店都很多人，有很多甚至在门口排了很长的队？</p>\n<p>观察到这些，常常会陷入思考，为什么会发生这些，新零售到底改变了什么？</p>\n<p>再举个例子。</p>\n<p>去年拿保温杯泡着枸杞的中年男火了。</p>\n<p>关于这个，我又问了自己几个问题：拿着保温杯泡着枸杞的是不是都是中年男？如果是，这个特征能否被数据量化？可否考虑加入到算法模型当中，加以应用起来？</p>\n<p>虽然很多问题，我没有找到答案，但多问自己问题，会引发自己不断深入思考，不断激发自己好奇心，不断去研究。</p>\n<p>很多业务知识都是零散的，不可能在短时间内完全了解，可以在日常不断积累。</p>\n<p>关于日常积累业务知识，可以经常询问懂业务的人。这是我想说的第三个方面。</p>\n<p>刚进公司的时候，我以为业务很简单。很快，我就发现里面的坑不少。加上所在团队的成员也是刚入职不久的，问问题没处可问。过了一个月之后，我发现隔壁团队有两个十年左右的老员工，业务很熟，而且人特好。于是，我几乎一遇到业务问题，就跑过去“骚扰”他们，他们也很乐意解答，如果他们不清楚，他们也会告诉我应该去找谁了解。大约半年之后，我基本摸透了顺丰的数据和业务情况。我也和那两位老员工建立了不错的友谊，即使后来换了部门，我也经常过去找他们。</p>\n<p>跟懂业务的人搞好关系，遇到业务问题，多咨询他们，这是最有效最接地气的办法。</p>\n<p>多看书，这是我想说的第四个方面。</p>\n<p>比如说，从事新零售领域方面的工作，总得先了解新零售是怎么回事。你可以去听专家们忽悠，但这样的机会很少，而且时间也有限，说不定成本还很高。</p>\n<p>读书则不一样。读书，意味着主动了解，主动去构建自己的知识体系。</p>\n<p>读书的重要性，这里不多言了。</p>\n<p>如果您读这篇文章的时候，您恰好也是一位数据人。我还想告诫一句：我们不能脱离业务去看数据，而是要时刻从业务角度去理解数据。</p>\n<p>我们不敢期望可以完全理解这个世界，但也憧憬着我们不单可以在代码的世界里畅快驰骋，论剑江湖，也可以放下身段洞察芸芸众生之百态，领悟人间世俗之真情。</p>\n<p>如果真的可以的话，就没有需求分析师什么事了。</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"107275\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"107275votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"107275\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/3c9d695ba504fed7faa5375f3c80ff7f2ff90de4.jpg"},{"title": "2018 年 Java 程序员必读的十本书", "url": "http://blog.jobbole.com/113955/", "url_object_id": "0645d6761f7b849238e3183e177cfb24", "create_date": "2018/06/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/stack-of-books2.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": 4, "tags": "书籍与教程,java,书籍", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/yizhe\">yizhe</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.java67.com/2018/02/10-books-java-developers-should-read-in.html\">Javin Paul </a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>大家好，如果你是一名 Java 程序员，正在考虑 2018 年读什么书，那么这篇文章正适合你。本文中，我将分享 10 本有关 Java、Spring 及其他相关技术的书籍。 这里面既有适合经验丰富的 Java 程序员的书，它们介绍了架构、云开发、微服务、Java 9、Spring 5，以及用于提高生产效率的 Kotlin。同时也照顾到了初级的、缺乏经验的、或正打算 2018 年开始入门 Java 的新手。</p>\n<p>同时，我也介绍了一些在 2018 年学习 Java 9 的书籍。有些已经针对 Java SE 9 全面更新，比如 《写给大忙人看的Java SE 9》和 《Java 9 编程入门官方教程》。</p>\n<p>如果你刚开始学习 Java 或者正打算要学，这些书都非常适合。不推荐读旧版本的书来入门，除非是《Head First Java》。</p>\n<p>我特别希望《Head First Java》的第三版是一个长期的版本，作者和出版方最好针对 Java 8 和 Java 9 进行全面更新。不过对于入门 Java 的编程小白来说，旧版本的《Head First Java》仍然是一本好书。</p>\n<p>我最近添加到这个书单的就是这本今天刚发现的《云原生 Java》。这本书看起来特别棒，它介绍了目前急需的，利用 Spring Boot、Spring Cloud 和 Cloud Foundry 在云上开发 Java 应用的知识。虽然还没读完，但它看起来特别棒。</p>\n<p>2018 年可以用来提升 Java 知识技能的书太多了，你不可能把他们都读完。不过有些书你绝对不想错过，比如《Effective Java（第三版）》，我把它放在了书单的最上面。</p>\n<p>书单里的书介绍了 Java 9、Spring 5、Kotlin、软件架构、微服务、云以及 Java 8 的一些特性。</p>\n<p>这个书单不是很长，但里面的书都很棒，都挺适合在上下班路上读。</p>\n<h3>1. 《Effective Java（第三版）》（Effective Java 3rd Edition）</h3>\n<p>如果你还没读过这本书，那它绝对是 2018 年你必须读的第一本书。第三版是一个长期版本，其实它早就该出版了。这版书也囊括了 JDK 7、8、9 的新特性。</p>\n<p>我在 1 月份的第一个星期就拿到了这本书，它绝对是约书亚·布洛克（Joshua Bloch）给 Java 程序员最好的新年礼物。</p>\n<p>我花了大概一个星期就读完了这本书。我发现读的过程中，时常碰到新的知识点，特别是关于 Java 8 和 Java 9 的。</p>\n<p>我从这本书中学到了 Java 的模块化，它也帮我理顺了之前对于 Java 8 的一些误解。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/4835b82477bba7a02b19e0655a1bec19.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4835b82477bba7a02b19e0655a1bec19-231x300.jpg\" alt=\"effective java\"></a></p>\n<h3>2. 《现代 Java 开发范例》（Modern Java Recipes）</h3>\n<p>如果你喜欢范例类型的书，那这本书就很不错。就像简介里提到的，这本书提供了解决 Java 8 和 Java 9 中一些难题的简单方案。</p>\n<p>你会学到如何使用 Java 8 的 lambda 表达式、方法引用以及 Stream API 写代码。</p>\n<p>如果你想通过手册和范例来学习 Java 8 和 Java 9 ，这本书就很完美。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/10103a0f7df31fa02f1a6eb2ff884f67.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/10103a0f7df31fa02f1a6eb2ff884f67-229x300.jpg\" alt=\"modern java recipes\"></a></p>\n<h3>3. 《Java 9 模块化》（Java 9 Modularity）</h3>\n<p>Java 9 的一个亮点就是 Java 的模块化，本书对这部分做了最全面的介绍。</p>\n<p>作者桑德斯·马克（Sanders Mak）是 Java 9 模块化的权威。我听过很多他讲 Java 9 的课程，比如在 Pluarlsight 做的《Java 9 模块化及新特性》。我可以保证，读完此书之后，你绝不会后悔。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/5fa3843943b0e8a3a222ac4ed7b47608.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5fa3843943b0e8a3a222ac4ed7b47608-229x300.jpg\" alt=\"java 9 modularity\"></a></p>\n<h3>4. 《写给大忙人看的Java SE 9（第二版）》 （Core Java SE 9 for the Impatient (2nd Edition)）</h3>\n<p>如果你急着学 Java 那我推荐这本书给你。我是凯 S·霍斯特曼 (Cay S. Horstmann)的一个忠实粉丝，他的文采之优美、涉猎之广，都让我很是佩服。</p>\n<p>你读了他写的关于 Java 8、Scala 的书以及《Java 核心编程》之后，绝对也会成为他的粉丝。</p>\n<p>这本书已经针对 Java SE 9 全面更新。如果你想学习 Java 9，那2018年你应该先读读这本书。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/d4bfce708107af712925d529c54d5e99.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/d4bfce708107af712925d529c54d5e99-230x300.jpg\" alt=\"core java se 9 for the impatient\"></a></p>\n<p> </p>\n<h3>5. 《Java 8入门》（Beginning Java 8 Language Features）</h3>\n<p>尽管已经发布快 4 年了，仍然有很多 Java 程序员还没有开始使用 Java 8。</p>\n<p>如果你是这些人的一员，或者还不是很理解 lambda 表达式、Stream API、Optional 及 Java 8 其他的特性，那你一定要读这本书。</p>\n<p>这是一个系列，共有3卷，此卷通俗易懂的讲解了 Java 8 的基础知识。</p>\n<p>另外两卷则延伸到 Java 8 的高级特性，比如 JDBC、Swing、 Java FX，以及 Java 网络 API。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/b2fdbde13702ef6ccc6e95c18fccc452.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/b2fdbde13702ef6ccc6e95c18fccc452-243x300.jpg\" alt=\"java 8 language feature\"></a></p>\n<h3>6. 《Spring 微服务实战》（Spring Microservices in Action）</h3>\n<p>软件开发世界正在加速转向微服务架构，它在开发、维护、部署、扩容性及可靠性等方面有很多优势。</p>\n<p>感谢 Spring framework 提供这么多开发微服务的 Java 工具，比如 Spring Boot 和 Spring Cloud。</p>\n<p>如果你对用 Spring framework 开发微服务有兴趣，那么这本书很适合你。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/0c7932ef6b030895a79464812a84700d.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/0c7932ef6b030895a79464812a84700d-239x300.jpg\" alt=\"Spring microservices in action\"></a></p>\n<h3>7. 《架构整洁之道》（Clean Architecture）</h3>\n<p>我是在2017年读的这本书，特别喜欢。我是罗伯特 C·马丁（Robert C. Martin）的一个忠实粉丝（大家称之为“ Bob 大叔”）。加上之前的《代码整洁之道（Clean Code）》和《代码整洁之道 程序员的职业素养（Clean Coder book）》，这本书完成了代码整洁之道三部曲。</p>\n<p>它介绍了如何构建可以经受时间考验的软件架构，还消除了对设计模式和软件架构的一些误解。</p>\n<p>如果你是一名经验丰富的 Java 程序员，正想转变为一个方案设计师，那这本书2018年你一定要读完。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/16c675023e54c1156f685331fe2ba77f.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/16c675023e54c1156f685331fe2ba77f-244x300.jpg\" alt=\"clean architecture\"></a></p>\n<h3>8. 《Spring 5 开发范例代码大全》（Spring 5 Recipes: A Problem-Solution Approach）</h3>\n<p>抛开 JDK 9 不谈，2017年另外一个大的版本更新就是 Spring 5 ，它将响应式编程引入了 Spring 。</p>\n<p>既然对 Java 程序员来说， Spring 是无可争议的、最流行的架构，那么学习 Spring 5 让自己紧跟技术潮流，是非常值得的。</p>\n<p>我个人非常喜欢目标导向的范例类图书，这也是我为什么选择了这本书用来学习 Spring 5。</p>\n<p>它不仅覆盖了 Spring 5 的新特性，也讲了其他早期版本的增强。一句话，它教你如何在 Spring 5 的环境下写代码。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b90e8a41700678ed1c5089d36b03b7b.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b90e8a41700678ed1c5089d36b03b7b-210x300.jpg\" alt=\"Spring 5 Recipes\"></a></p>\n<p> </p>\n<h3>9. 《Kotlin 实战》（Kotlin in Action）</h3>\n<p>Java 程序员通过学习 Scala、Groovy、Closure 等 JVM 语言来成为一名多语言的开发者是很常见的。而 Kotlin 正是当下的热门。</p>\n<p>自从 2017 年 Google 在 Google IO 上宣布将 Kotlin 作为 Android 的官方语言之后，很多人都开始对学习 Kotlin 感兴趣。</p>\n<p>更重要的是，它能提高你的生产效率，而且它和 Java 非常相似。因此，如果你想在 2018 年学习一种 JVM 语言，我建议学习 Kotlin。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/4e8ec3dcf9fc58481dd1f235a706ac49.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4e8ec3dcf9fc58481dd1f235a706ac49-239x300.jpg\" alt=\"kotlin in action\"></a></p>\n<h3>10. 《Java 9 编程入门官方教程(第七版)》（Java: A Beginner’s Guide, Seventh Edition）</h3>\n<p>这是另一本从零开始学习 Java 的经典书籍。第七版已经针对 Java SE 9 全面更新。</p>\n<p>如果你想在 2018 年开始你的 Java 程序员生涯，这本书可以帮你学到最新版本的 Java。</p>\n<p>这本书比书单里的第二本更全面。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/68129204cb656d6f7e0c4d4b65b7b727.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/68129204cb656d6f7e0c4d4b65b7b727-241x300.jpg\" alt=\"java a beginner\"></a></p>\n<p> </p>\n<h3>11. 《云原生 Java》（Cloud Native Java）</h3>\n<p>恭喜读到这里的朋友，你们收获了一个彩蛋 ——《云原生 Java》，2018 年最有用的 Java 书籍。</p>\n<p>当今的软件开发，大都是关于云、微服务、分布式架构等等。乔氏·隆（Josh Long）和肯尼·巴斯塔尼（Kenny Bastani）在这本书里向 Java/JVM 开发者展示了如何使用 Spring Boot、Spring Cloud 和 Cloud Foundry 构建更好、更快的 Java 应用程序。</p>\n<p>对于经验丰富的 Java 开发者来说，它绝对是一本必读书。尽管它介绍了相对高级的内容，我还是强烈推荐每一位 Java 程序员都读一下。</p>\n<p>实际上，我还没有读完这本书。但是读完前言之后，我就对所讨论的话题非常感兴趣。我可能在读完之后再写一篇详细的文章。但它绝对值得各位至少读一遍。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/03/50634ad6517cc268b7e595a1a3799b9e.jpg\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/50634ad6517cc268b7e595a1a3799b9e-229x300.jpg\" alt=\"cloud native java\"></a></p>\n<p>这就是 2018 年 Java 程序员可以读的一些有趣、有用的书籍。实话实说，即使是让自己紧跟 Java 世界的技术潮流，比如 Java 9、Sprig 5、微服务、Kotlin 等，也还有一大堆东西等着你去学习。这些书不仅仅更新你的知识，还能让你对一些技术的理解更加深刻。</p>\n<p>多谢阅读。如果你喜欢这些书，就把它们分享给你的朋友和同学吧。如果有任何建议，或有书籍想在2018年分享给大家，欢迎留言。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113955\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113955votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113955\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/yizhe\">yizhe</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/yizhe\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4d71b9b6d5a7e0f78b88a7a273cddd74.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            JAVA软件工程师        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/yizhe\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/yizhe/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/yizhe/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/b09da3ea14a596f136aeea129afb4a2ac85bce08.jpg"},{"title": "IT程序员的抉择：我要离开帝都了", "url": "http://blog.jobbole.com/114136/", "url_object_id": "c4156eb16689abd02ccd4f571b73594d", "create_date": "2018/06/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/03/career.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "职场,职业生涯", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/mazhimazhi/p/9190218.html\">做我自己的主人</a>   </div><div id=\"cnblogs_post_body\">\n<p>不知不觉在北京已经漂泊了近5年了，共为3家公司打过工，其中有几十人的小公司，也有几万人的大公司。随着工作技能的提升和工作经验的积累，薪水自然也涨了不少，但是看着北京的房价、物价飞涨，感觉自己赚多少都是小钱，还不如尽早卷铺盖回内蒙老家发展。那里毕竟是老家，亲戚朋友相对多一点。随着年龄的增长，也想有个自己的家了。</p>\n<p>之前犹犹豫豫的好长时间，不知道自己是留是走，今天还是详细的罗列了两个地方发展的坏处：</p>\n<h3>呆在北京坏处：</h3>\n<p>（1）工作压力大</p>\n<p>尤其是互联网公司，研发需求还是比较多的，有些需求还比较急，清闲的时候少。不过现在觉得还好，技术上有很大的进步，能独立扛事儿，一般的IT研发岗位还是可以得心应手的。</p>\n<p>（2）房价高，落户难</p>\n<p>在北京落户，有一套自己的房子，这想都不敢想了。看着日益飙高的房价和近乎不可能满足的帝都落户条件，如果要呆在北京发展，那注定一辈子只能租房了，像我的同学一样，在偏远一点的地方租个小两居，再买个<br>\n15万以下的车代步，总感觉这不是我想要的生活。</p>\n<p>（3）空气差，雾霾严重</p>\n<p>每天吸雾霾，我都不知道的少活多少年了。随着年龄的增长，感觉身体才最重要，尤其是看到认识的人得了重病后更感觉身体的宝贵。如果继续呆在帝都的话，那也只能是天天吸了。</p>\n<p>（4）漂泊孤独感</p>\n<p>没亲戚，只有几个在大学交好的同学，不过现在也都各忙各的，聚的少，大部分时间还是自己一个人。工作这么多年，也少有能交心的同事。一直感觉自己的生活过的并不快乐，也许有个人陪伴会好很多吧。</p>\n<p>（5）离父母太远</p>\n<p>父母已经上年纪了，而且也不希望离他们太远，万一有个病痛啥的，照顾实在不方便。</p>\n<h3>呆在内蒙坏处：</h3>\n<p>（1）知名IT企业少，岗位技术含量低</p>\n<p>去年中旬专门休了年假回内蒙面试了几家IT公司，挑来挑去还是选择回京继续工作。主要是外包的多，充其量也就给企业做定制化软件，有的还要求驻场开发，几乎没有做自家产品的。这种性质的岗位貌<br>\n似也不轻松。</p>\n<p>（2）薪水低</p>\n<p>薪水和帝都比起来，都不能用腰斩来形容了，要1万都觉得太多，这个心理落差的承受，而且内蒙还不是强制单位上五险一金，所以只有2家公司有五险一金，而且按最低额度缴纳。如果没有房贷，车贷，这个薪水也不是不能接受。这些年在北京也赚了一点钱，再找父母凑点，房子还是能勉强买的起的。</p>\n<p>（3）容易不满足现状，不甘心</p>\n<p>如果岗位技术含量低，而且活儿还多的话，肯定干不长久。而且本人很喜欢技术，很爱在技术上玩儿点高端的。哎，实在不行就自个儿干吧，写写技术书，录录网络课程啥的，相对来说即能选择性学习一些<br>\n感兴趣的技术，又不至于饿死吧。</p>\n<p>（4）空气干燥，对某些植物过敏，容易引发过敏性鼻炎</p>\n<p>内蒙是没有雾霾，但是有沙尘暴，而且为了绿化植被，防止沙漠化，种了一些叫不上名的植物，我很过敏。</p>\n<p>（5）回去容易出来难</p>\n<p>我30出头的年龄，回去肯定要成家的，有家了出来可就难了。</p>\n<p>反正选择在哪个地方发展坏处都不少。但是这么多年在北京奋斗，我感觉除了看上北京的工作机会，就再也没有让我留恋的东西了。我要辞职了，我要离开北京了，再见！2018.6.16</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114136\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114136votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114136\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/18fc86594a34c2bebbefd765480669feb0504c69.jpg"},{"title": "在 Linux 上复制和重命名文件", "url": "http://blog.jobbole.com/114148/", "url_object_id": "4c1a5cd279328306ee9d94cacae94409", "create_date": "2018/06/23", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.networkworld.com/article/3276349/linux/copying-and-renaming-files-on-linux.html\">Sandra Henry-stocker</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9772-1.html\">Linux中国/geekpi</a>   </div><blockquote><p>cp 和 mv 之外，在 Linux 上有更多的复制和重命名文件的命令。试试这些命令或许会惊艳到你，并能节省一些时间。</p></blockquote>\n<p>Linux 用户数十年来一直在使用简单的 <code>cp</code> 和 <code>mv</code> 命令来复制和重命名文件。这些命令是我们大多数人首先学到的，每天可能有数百万人在使用它们。但是还有其他技术、方便的方法和另外的命令，这些提供了一些独特的选项。</p>\n<p>首先，我们来思考为什么你想要复制一个文件。你可能需要在另一个位置使用同一个文件，或者因为你要编辑该文件而需要一个副本，并且希望确保备有便利的备份以防万一需要恢复原始文件。这样做的显而易见的方式是使用像 <code>cp myfile myfile-orig</code> 这样的命令。</p>\n<p>但是，如果你想复制大量的文件，那么这个策略可能就会变得很老。更好的选择是：</p>\n<ul>\n<li>在开始编辑之前，使用 <code>tar</code> 创建所有要备份的文件的存档。</li>\n<li>使用 <code>for</code> 循环来使备份副本更容易。</li>\n</ul>\n<p>使用 <code>tar</code> 的方式很简单。对于当前目录中的所有文件，你可以使用如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a156868045217\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tar cf myfiles.tar *\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a156868045217-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a156868045217-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a156868045217-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tar </span><span class=\"crayon-e\">cf </span><span class=\"crayon-v\">myfiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">tar *</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a156868045217-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>对于一组可以用模式标识的文件，可以使用如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a15f591685967\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ tar cf myfiles.tar *.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a15f591685967-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a15f591685967-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a15f591685967-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tar </span><span class=\"crayon-e\">cf </span><span class=\"crayon-v\">myfiles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e \">tar *</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a15f591685967-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在每种情况下，最终都会生成一个 <code>myfiles.tar</code> 文件，其中包含目录中的所有文件或扩展名为 .txt 的所有文件。</p>\n<p>一个简单的循环将允许你使用修改后的名称来制作备份副本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a163707382611\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ for file in *\r\n&gt; do\r\n&gt; cp $file $file-orig\r\n&gt; done\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a163707382611-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a163707382611-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a163707382611-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a163707382611-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a163707382611-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a163707382611-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">file </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a163707382611-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a163707382611-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cp</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">orig</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a163707382611-4\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">done</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a163707382611-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>当你备份单个文件并且该文件恰好有一个长名称时，可以依靠使用 <code>tab</code> 来补全文件名（在输入足够的字母以便唯一标识该文件后点击 <code>Tab</code> 键）并使用像这样的语法将 <code>-orig</code> 附加到副本的名字后。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a166872107216\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cp file-with-a-very-long-name{,-orig}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a166872107216-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a166872107216-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a166872107216-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cp</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">file</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">with</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">a</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">very</span><span class=\"crayon-o\">-</span><span class=\"crayon-t\">long</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">name</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">orig</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a166872107216-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>然后你有一个 <code>file-with-a-very-long-name</code> 和一个 <code>file-with-a-very-long-name-orig</code>。</p>\n<h3 id=\"toc_1\">在 Linux 上重命名文件</h3>\n<p>重命名文件的传统方法是使用 <code>mv</code> 命令。该命令将文件移动到不同的目录，或原地更改其名称，或者同时执行这两个操作。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a16a266604613\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mv myfile /tmp\r\n$ mv myfile notmyfile\r\n$ mv myfile /tmp/notmyfile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a16a266604613-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a16a266604613-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a16a266604613-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a16a266604613-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a16a266604613-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mv </span><span class=\"crayon-v\">myfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">tmp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a16a266604613-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mv </span><span class=\"crayon-e\">myfile </span><span class=\"crayon-i\">notmyfile</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a16a266604613-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mv </span><span class=\"crayon-v\">myfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">tmp</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">notmyfile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a16a266604613-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>但我们也有 <code>rename</code> 命令来做重命名。使用 <code>rename</code> 命令的窍门是习惯它的语法，但是如果你了解一些 Perl，你可能发现它并不棘手。</p>\n<p>有个非常有用的例子。假设你想重新命名一个目录中的文件，将所有的大写字母替换为小写字母。一般来说，你在 Unix 或 Linux 系统上找不到大量大写字母的文件，但你可以有。这里有一个简单的方法来重命名它们，而不必为它们中的每一个使用 <code>mv</code> 命令。 <code>/A-Z/a-z/</code> 告诉 <code>rename</code> 命令将范围 <code>A-Z</code> 中的任何字母更改为 <code>a-z</code> 中的相应字母。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a16e545717588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nAgenda Group.JPG MyFile\r\n$ rename 'y/A-Z/a-z/' *\r\n$ ls\r\nagenda group.jpg myfile\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a16e545717588-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a16e545717588-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a16e545717588-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a16e545717588-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a16e545717588-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a16e545717588-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a16e545717588-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a16e545717588-2\"><span class=\"crayon-e\">Agenda </span><span class=\"crayon-v\">Group</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">JPG </span><span class=\"crayon-i\">MyFile</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a16e545717588-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'y/A-Z/a-z/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a16e545717588-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a16e545717588-5\"><span class=\"crayon-e\">agenda </span><span class=\"crayon-v\">group</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jpg </span><span class=\"crayon-i\">myfile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a16e545717588-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>你也可以使用 <code>rename</code> 来删除文件扩展名。也许你厌倦了看到带有 .txt 扩展名的文本文件。简单删除这些扩展名 —— 用一个命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a171090520283\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nagenda.txt notes.txt weekly.txt\r\n$ rename 's/.txt//' *\r\n$ ls\r\nagenda notes weekly\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a171090520283-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a171090520283-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a171090520283-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a171090520283-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a171090520283-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a171090520283-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a171090520283-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a171090520283-2\"><span class=\"crayon-v\">agenda</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">notes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">weekly</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a171090520283-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'s/.txt//'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a171090520283-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a171090520283-5\"><span class=\"crayon-e\">agenda </span><span class=\"crayon-e\">notes </span><span class=\"crayon-i\">weekly</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a171090520283-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0157 seconds] -->\r\n<p>现在让我们想象一下，你改变了心意，并希望把这些扩展名改回来。没问题。只需修改命令。窍门是理解第一个斜杠前的 <code>s</code> 意味着“替代”。前两个斜线之间的内容是我们想要改变的东西，第二个斜线和第三个斜线之间是改变后的东西。所以，<code>$</code> 表示文件名的结尾，我们将它改为 <code>.txt</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a177466312114\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\nagenda notes weekly\r\n$ rename 's/$/.txt/' *\r\n$ ls\r\nagenda.txt notes.txt weekly.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a177466312114-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a177466312114-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a177466312114-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a177466312114-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a177466312114-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a177466312114-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a177466312114-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a177466312114-2\"><span class=\"crayon-e\">agenda </span><span class=\"crayon-e\">notes </span><span class=\"crayon-i\">weekly</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a177466312114-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'s/$/.txt/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a177466312114-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a177466312114-5\"><span class=\"crayon-v\">agenda</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">notes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">weekly</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a177466312114-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>你也可以更改文件名的其他部分。牢记 <code>s/旧内容/新内容/</code> 规则。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be012a17a695780534\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ls\r\ndraft-minutes-2018-03 draft-minutes-2018-04 draft-minutes-2018-05\r\n$ rename 's/draft/approved/' *minutes*\r\n$ ls\r\napproved-minutes-2018-03 approved-minutes-2018-04 approved-minutes-2018-05\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be012a17a695780534-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a17a695780534-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a17a695780534-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a17a695780534-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be012a17a695780534-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be012a17a695780534-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be012a17a695780534-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a17a695780534-2\"><span class=\"crayon-v\">draft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">draft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">draft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a17a695780534-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">rename</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'s/draft/approved/'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-e \">minutes*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a17a695780534-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b35be012a17a695780534-5\"><span class=\"crayon-v\">approved</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">03</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">approved</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">approved</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">minutes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be012a17a695780534-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>在上面的例子中注意到，当我们在 <code>s/old/new/</code> 中使用 <code>s</code> 时，我们用另一个名称替换名称的一部分。当我们使用 <code>y</code> 时，我们就是直译（将字符从一个范围替换为另一个范围）。</p>\n<h3 id=\"toc_2\">总结</h3>\n<p>现在有很多复制和重命名文件的方法。我希望其中的一些会让你在使用命令行时更愉快。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114148\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114148votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114148\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg"},{"title": "2017 年，我发布了 6 个副项目", "url": "http://blog.jobbole.com/113822/", "url_object_id": "a477d68fdad1a1b384e0ae7fb5c03095", "create_date": "2018/06/08", "front_image_url": ["http://wx1.sinaimg.cn/large/63918611gy1frenpxw9krj20rs0j6q9i.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "职场,副项目", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/how-i-shipped-six-side-projects-in-2017-3dde6c77adbb\">Mark Johnson</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>2016 年我曾定了一个目标——每个月都要学点新东西。最终，我发布了 6 个新项目。下面我要对这些项目以及我学到的东西做个总结。</p>\n<p>回望这一年，我成功发布了尽可能多的副项目，同时有一份超过了全职工作的工作、和家人度过了高质量的时光（我有两个孩子和一位非常有耐心的妻子）、作为兼职教授教书、还兼职提供咨询服务。这些对我来说似乎有点疯狂。</p>\n<p>人们容易把缺乏时间视为阻碍自己做副项目的原因。我们常给自己找的借口是“只要有更多时间……”。我们还寻找花里胡哨的 App 或者任务管理技巧，来尝试在时间表中空出些时间来。</p>\n<p>但是，去年我学到的主要的一点就是，<strong><em><span style=\"color: #ff0000;\">时间不是首要问题。你有足够的时间；你需要的是动力。</span></em></strong></p>\n<p>好消息是，我们“应付得了”动力。在 2017 年我学到了几种应付动力的方法，我想跟你们分享一下。</p>\n<h3>你必须得选一个你真正感兴趣的想法</h3>\n<p>你只是不能对你不关心的事物保持热情，所以选一些你激情所在的事情来做。当你灵光一闪时，别让它溜走，用上它。即使这意味着你要在工作会议上草草记下些笔记。</p>\n<p>重要的是紧紧抓住这些灵感时刻，以求知若饥并保持对工作的好奇心。</p>\n<h3>给自己准备一个工作时间表</h3>\n<p>对我来说，这意味着每个月发布些东西。一旦我开始工作，我往往会搞砸。所以 30 天的限制确实能帮助我控制好这个趋势，有效利用我的动力。</p>\n<p>如果结果发现某个月的想法不中用，这也能给你一个机会去尝试新想法。至少你不会把一整年的时间浪费在它上面。</p>\n<h3>你需要一个分享成果的公开截止日期</h3>\n<p>这是重要的一点。在项目尾声时你会耗尽“动力库”。（最后 10% 是致命的。）唯一能助你度过动力低迷期的是，知道在另一头还有人等着看你的成果。</p>\n<p>分享工作成果的另一个好处是，给你一个为副项目收集支持性反馈的机会。我工作的地方 <a href=\"https://atlaslocal.com\">Atlas Local</a> 会在每月第一个周五举办全办公室范围的活动。我利用这项活动展示我前一个月的项目，而且总能收到在场的这些慷慨的伙伴的鼓励和支持。</p>\n<p>站出来分享你的成果，你会对你收到了多少支持而感到震惊的。</p>\n<p style=\"text-align: center;\">. . .</p>\n<p>这项实验中最让我惊讶的部分大概就是，我对在 2018 年发布更多工作更加充满动力，远不是在最后筋疲力尽。</p>\n<p>我会鼓励你在新的一年里应付动力问题，并发布一些你已经考虑了一段时间的想法。如果你尝试了，那我很乐意洗耳恭听。</p>\n<p>如果你对我在 2017 年的工作成果的细节感兴趣，请继续阅读！</p>\n<p style=\"text-align: center;\">. . .</p>\n<h2>一月项目：<a href=\"https://www.pers0nal1ty.com\">Pers0nal1ty.com </a></h2>\n<p><em>可视化比较团队最强特点和最弱特点的个性类型</em></p>\n<p><img src=\"http://wx1.sinaimg.cn/large/63918611gy1frenpxw9krj20rs0j6q9i.jpg\"></p>\n<p>我已经入<strong>迈尔斯·布里格斯类型指标（MBTI）</strong> 的坑一段时间了。尽管我不把它看成是规范，也不认为它有那么科学，它仍是一个理解与我不同的人的有用框架。</p>\n<p>很多痴迷于个性的人没有意识到的是，MBTI 系统是基于<em>认知功能</em>的。认知功能是由现代心理学之父 Carl Jung 在上世纪 20 年代创造的。我想深挖一下，并进一步学习它。</p>\n<p>同时，我看了 HBO 的《西部世界》，看到了下面这一幕：</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frenpygjl1j20m80ci763.jpg\"></p>\n<p>我超爱这类科幻用户界面，它马上吸引了我的注意力。我想，如果我能基于人们的 MBTI 特征，建他们各自的“角色档案”会怎么样呢？为什么不呢？</p>\n<p>为了该项目做准备，我读了 “MBTI 圣经”， <a href=\"https://www.amazon.com/Gifts-Differing-Understanding-Personality-Type/dp/089106074X\">Myers 和 Briggs 合著的《Gifts Differing</a>》，并着手构建一个系统，该系统可以根据 MBTI 系统的基础——<a href=\"https://en.wikipedia.org/wiki/Jungian_cognitive_functions\">认知功能</a>来生成雷达图。</p>\n<p>最后，我以《西部世界》的用户界面为核心，因为我（和其他 beta 测试者）发现，将多人重叠在同一张雷达图上以获得一群人之间的关系的能力更为实用。</p>\n<p>如果我自己也这么说的话，结果确实很有趣。试试输入团队成员的个性类型或者你和你伴侣的个性类型：</p>\n<p> </p>\n<h3>二月：<a href=\"https://sheetcake.cc\">Sheetcake 登录页面</a></h3>\n<p><em>制作任何网上登陆表单最简单的方法</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frenpzfh23j20rs0k5tio.jpg\"></p>\n<p style=\"text-align: center;\">Sheetcake 登陆页面</p>\n<p>我已经着手于 Sheetcake 几年了。它拥有非常小的一部分忠实用户（他们中的大多数都认识我或者与我关系亲密的人）。</p>\n<p>SheetCake 趣事：</p>\n<ul>\n<li>2012 年，我在 48 小时内完成了第一个版本。这是年轻一点的我演示这个 48 小时版本的<a href=\"https://www.youtube.com/watch?v=L5jsxlQr37Q\">视频</a></li>\n<li>我已经重新写了 4 次！第一版是用了 Backbone.js + Node.js。第二版是用了 Backbone + Marionette + Firebase。第三版是用了 React + Firebase（全都用了 CoffeeScript）。第四版，也是最终版，是用了 ES6、React 和 Firebase。</li>\n<li>使用 Sheetcake 的人往往连着用了好几年；然而还没有商业模型。</li>\n</ul>\n<p>Sheetcake 在某几方面的确做得很好（比如 Zero Day 注册），所以我想为它制作一个登录页面，以推销这些优点。我从一个模版开始，这是它的最终版本。</p>\n<p> </p>\n<h3>三月：<a href=\"https://www.wmdmark.com\">NeTi 聊天机器人</a></h3>\n<p><em>向我外向的机器人助手提有关于我的问题</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frenq0ed6aj20rs0gsab3.jpg\"></p>\n<p style=\"text-align: center;\">NeTi 聊天机器人</p>\n<p>去年早些时候，聊天机器人大火。尽管我从来不对聊天机器人能自己去某地抱什么希望，但是它们的对话 A.I. 属性还是吸引了我，我想进一步了解它。</p>\n<p>我是个内向的人，一般十分不擅长分享自己的事情。所以我想创造一个外向的机器人，它可以回答一些关于我的简单问题，这可能很有趣。</p>\n<ul>\n<li>如果我是个外向的人，我会拥有某些认知功能，NeTi 就得名于此。</li>\n<li>给提问意图分类的 A.I. 部分是用 Wit.ai 构建的，Wit.ai 使得构建 A.I. 容易多了。</li>\n<li>别让 NeTi 太生气，否则它可能会猛烈抨击你。</li>\n</ul>\n<p> </p>\n<h3>四月：<a href=\"https://github.com/wmdmark/goap-js\">G.O.A.P.</a></h3>\n<p><em>用目标导向型行动计划（Goal Oriented Action Planning ）构建令人信服的 A.I.</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frenq0zcdmj20rs0kun8x.jpg\"></p>\n<p style=\"text-align: center;\">添加了移轴效果的代码截图——为什么不呢？</p>\n<p>在偶然间看到<a href=\"http://alumni.media.mit.edu/~jorkin/goap.html\">这篇文章</a>后，我被一个游戏背景中描述的 <a href=\"http://alumni.media.mit.edu/~jorkin/goap.html\">GOAP</a> 深深吸引。这个游戏叫 <a href=\"https://en.wikipedia.org/wiki/F.E.A.R.\">F.E.A.R</a>，对我来说有些怀旧气息。</p>\n<p>过去我参与过一些有基础 A.I. 的游戏的工作，从来没有遇到这项技术。我记得那时我觉得 F.E.A.R 的 A.I. 特别令人印象深刻、栩栩如生。</p>\n<p>在进一步研究后，这个方法最吸引人的地方不是结果多么令人信服，而是解决方法多简单优雅（尤其是跟更标准的 A.I. 方法比较，比如有限状态机（Finite State Machine））。</p>\n<p>所以我为四月份的项目写了一个 JavaScript 库来探索 GOAP。一个基础执行简单得出乎意料（只要 58 行代码！）。</p>\n<p> </p>\n<h3>五月：<a href=\"https://github.com/wmdmark/goap-js\">目标合同</a></h3>\n<p><em>为你的目标签署责任合同。</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frenq1hudmj20rs0iktbq.jpg\"></p>\n<p style=\"text-align: center;\">内嵌责任的目标合同</p>\n<p>五月我也开始了<a href=\"https://whole30.com/whole30-program-rules/\">整整 30 天节食（Whole 30 diet）</a>。我对我的饮食习惯变得满意，它也必然会影响我的能量级。整整 30 天节食（Whole30）对我来说进行得很顺利（节食期间我减了 18 磅，在接下来的几个月总共又减了 35 磅）。最重要的是，它确实均衡了我白天的能量，我感到更有动力了，也更专注了。</p>\n<p>看到了公开承诺和动力的相似之处，我决定将探索“目标合同”这个想法作为五月的副项目。</p>\n<p style=\"text-align: center;\">. . .</p>\n<h3>六月至十二月：<a href=\"https://www.tiltmaps.com\">TiltMaps</a></h3>\n<p><em>为你喜爱的地点和记忆制作独一无二的地图海报</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frenq23kdhj20rs0ib49c.jpg\"></p>\n<p style=\"text-align: center;\">TiltMaps 主页</p>\n<p>这是一切的核心。我六月份的目标是做一个大家真正想买的产品。我最大的短板之一就是销售和营销，所以我想做一个可以帮助我练习的产品来进一步学习。</p>\n<p>我一直都对地图和生成艺术感兴趣，所以我有个吸引人的主意——创造一个工具，你可以用它来创造并购买你所喜爱的地点的海报。</p>\n<p>这个项目太过有野心，不能在一个月内作为副项目完成。所以我决定用 2017 年剩余的几个月来完成 TiltMaps，并在发布前每个月都研究该产品的不同角度。我发现把一个较大的项目的不同部分分成月度项目能有效完成项目。</p>\n<p> </p>\n<h3>六月至七月：The Secret Sauce <sup>™</sup></h3>\n<p>为了弄清楚是否有可能生成高分辨率 3D 地图，我第一个月大部分时间都用来做 R&amp;D 了。生成世界上任意地点的一张 300dpi 的 3D 地图不是任意 API 或者我找到的平台能开箱即用地支持的事情，所以我不得不发明我自己的方法来完成这件事。弄清它花掉了我这个月大部分的时间，但是当我找到了答案就变得出乎意料地简单了。之后，我构建了一个基础编辑器来开始制作真正的海报，并订购了几次打印测试。</p>\n<p> </p>\n<h3>八月至九月：概念的证明（MVP）</h3>\n<p>接下来几个月我构建了该产品有更多消费者的 MVP。设计并不好，但是我还是让事情运转起来了，并且可以开始海报制作和打印的用户测试了。</p>\n<p> </p>\n<h3>十月至十一月：品牌和市场营销</h3>\n<p>接下来的几个月，我专注于让该项目准备好发布。尽管编辑器基本完成了，但是我还没有主页，而且市场营销方面还差得远。</p>\n<p>最终，通过在 Zero Day 和我参加的一个研讨会上展示 TiltMaps， 我在项目发布前的一个月卖出了几张海报。这非常鼓舞人心，因为这是我第一次从副项目中卖出了东西。</p>\n<p> </p>\n<h3>十二月：公开发布</h3>\n<p>在 <a href=\"https://www.producthunt.com/posts/tiltmaps\">Product Hunt</a> 上的发布比我预想中进行得顺利。我预计会卖出 10 张左右，但最终卖出了 37 张，而且仍然有订单进来。制作人们想买的东西感觉很好，而且它是一个很好的测试平台，可以尝试那些可能会在我的全职工作中发挥作用的、不同的广告和销售策略。</p>\n<p>我计划 2018 年继续致力于 TiltMaps。但愿我能从其中获得体面的、有趣的收入。</p>\n<p style=\"text-align: center;\">. . .</p>\n<p>总结完毕。感谢您读完全文。</p>\n<p>有任何想法或者反馈？我将洗耳恭听。在下面评论或者在 <a href=\"https://twitter.com/wmdmark\">Twitter</a> 上与我联络。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113822\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113822votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113822\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/f530c0cbed80a6a810d6e35a950794d795ec0368.jpg"},{"title": "工作 8 个月后，一名工程师竟然被机器解雇了", "url": "http://blog.jobbole.com/114154/", "url_object_id": "2967d3141d2e16cd5b82bc162f3a4648", "create_date": "2018/06/25", "front_image_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fsnj3dqw5ij20hj0cpn3g.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "业界,自动化", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.oschina.net/news/97362/when-a-machine-fired-me\">达尔文</a>   </div><p>Ibrahim Diallo 发表了一篇博客，描述了自己认真地工作却被“强大”的机器系统强制解雇的真实经历，并表示，事情发生的从始至终都没有人能够阻止它。</p>\n<p>Diallo 在文中描述，自己在某天上班时，发现门卡失效，当他找到主管时，又意外发现了自己已经被解雇的邮件，却不知道是谁发的：</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fsnj3dqw5ij20hj0cpn3g.jpg\"></p>\n<p>Diallo 随后来到工作岗位，发现自己的 Jira（项目与事务跟踪工具）账号被禁用，当他找经理重新启用账号时，系统却不允许经理进行重新启用的操作。Diallo 回到办公桌前，发现系统提示他重启电脑，但他知道重启后会导致数据丢失，因此并未进行此操作，可 Windows 电脑最后却自动重启了，导致几十万条记录丢失，Web 界面也不响应了。</p>\n<p>随后 Diallo 用他 CentOS 的机器黑进他的服务器去重启，调试，重启所有访问，然后重新处理所有数据。</p>\n<p>后来问题终于得到解决，谈到整件事情的起因时，Diallo 解释道：</p>\n<blockquote><p>我的合同期限是三年，而我仅工作了八个月。原来在我被解雇之前，公司被一家更大的公司收购，而我正是在收购的过程中加入的。当时由于经理的疏忽，没有给我的合同续约，导致合同中止。</p>\n<p>而按照我们的系统设定，一旦员工合同中止的工作单发出后，系统就会接管一切。所有中止合同所需的工作单会自动发出，每个都会触发其他的工作单。于是就有了我的门卡失效，Windows 账号和 Jira 账号被禁用事情的发生，等等。</p>\n<p><strong>而这整个过程持续了好几天，期间却没有任何方法能人为中止。</strong>我只能以新员工的方式被重新雇佣，意味着我得重新填写各种文件，设置银行卡账号，等联邦快递给我发送新的门卡。</p></blockquote>\n<p>作者在文中将整个过程称为：<strong>一个简单的自动化错误/功能导致的雪崩。</strong>自动化也许给我们的生活和办公带来许多便利，但当机器犯错误时，人必须能够干预。如若不能，可能就会出现上面作者描述的情况，甚至会导致更加严重的问题。想详细了解事件发生的读者可以查看作者的<a href=\"https://idiallo.com/blog/when-a-machine-fired-me\">博客原文</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114154\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114154votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114154\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/0c1c6b58f1668b69972b13ab523e285e3514bf2c.jpg"},{"title": "计算机专业太难不适合女生学？来看 N 多小姐姐的回应", "url": "http://blog.jobbole.com/114141/", "url_object_id": "a994858569521b3cc4c7ef650140ad3c", "create_date": "2018/06/22", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/cebf98169b4fd1e38a35c3537129ceaa.jpg"], "praise_nums": "1", "comment_nums": 2, "fav_nums": 0, "tags": "职场,程序员,计算机专业", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>高考结束了，填志愿选专业的时候也要来了。最近我们微博收到一个私信求助：</p>\n<p><img class=\"alignnone\" src=\"https://wx2.sinaimg.cn/mw690/7cc829d3gy1fsj78ysbugj20f9051gmi.jpg\" width=\"549\" height=\"181\"></p>\n<blockquote><p><a href=\"https://weibo.com/2093492691/GmruxxXrK\" target=\"_blank\">https://weibo.com/2093492691/GmruxxXrK</a></p></blockquote>\n<p>在<a href=\"http://www.jobbole.com/members/weibo_2093492691\">@程序员的那些事</a> 微博发布后，有位小姐姐还感叹：</p>\n<blockquote><p>@刘不刘二小姐：没想到“计算机太难不适合女生学”的观点五年前我上大学的时候有，现在都火成这样了还有[二哈]</p></blockquote>\n<p>很多关注我们的小姐姐都冒泡留言，鼓励那位求助的女生。汇总如下：</p>\n<blockquote><p>@澈海情深：计算机女生出来说一句，现在干啥都挺难的。学计算机也没有想象中那么恐怖。感兴趣就学呗。</p>\n<p>@眠眠阿卷：选吧，学计算机又不是以后当码农，计算机是个工具，你学了计算机，以后去哪里再读其他专业都受欢迎</p>\n<p>@J家蠢萌痴汉夏：怎么会，我就毕业了呀，毕业还是简单的，只要好好听课，也不会挂科的[二哈] 当年高考结束填志愿，五个全是计算机第一顺位，🙊回过头想想也是有勇气啊</p>\n<p>@凃小斐：老子就是女孩子，毕业的时候专业第一的成绩保送985研究生，谁跟你说女孩子不适合学计算机的出来我打死他</p>\n<p>@于梦杰呀：计算机系女生表示难确实是难，有时还会感觉痛苦，但是只要你好好学肯定是能学好的</p>\n<p>@enchantereyes：喜欢就选。首先再菜毕业也不会难，另外学一行跟干一行是两码事。难得有想学的东西，不试试不会不甘心吗？</p>\n<p>@geekInfo：我也是计算机出来的女生。最初的专业是应用数学选修经济，学了一学期不开心反而喜欢计算机课就转了专业。读大学之前一点编程基础也没有，也不就这么顺利研究生毕业了。毕业成绩年级第二，文凭还没到手就被公司定下来了，到现在一直很喜欢这职业，庆幸当初转了专业，要学自己感兴趣的。</p>\n<p>@月光少爷金：时代不一样了，女程序猿不知道多受欢迎。况且，不学计算机，学统计将来做策略也不错呀</p>\n<p>@芒果很忙busybusy：学吧，入门没有想象中那么难的，我就是程序媛，IT公司女生少，环境相对比较单纯，是非也少，女生挺受宠的</p>\n<p>@茶杯茶茶茶：计算机有脑子的都能学，很好学的，相比于其他的专业，至少很多东西可以直接上手及时反馈，网上教程一大堆，只有计算机方面的可以。</p>\n<p>@翡翠梦境里睡觉的猫：有兴趣就可以选，当年报志愿之前也有人再三强调学计算机累（倒是没说女生不适合，现在想来在当时已经难得），然而我高中学了一点编程觉得有趣，于是选了，于是一路计算机好多年仍然觉得很有趣</p></blockquote>\n<p>其他几个男生的留言：</p>\n<blockquote><p>@MSP-GawainAntarx：难的不是计算机科学，而且怎么让自己抛弃“女生不适合学计算机”的刻板印象</p>\n<p>@mtedrrqcmws2017：1. 年轻女程序员在应聘过程中不但不会被歧视，反而会被有所偏袒，因为公司（尤其是大公司）普遍男生太多，需要女生来平衡工作环境。2. 现代编程语言已经被高度抽象，脱离硬件，倒更加靠近“技术设计”，入门并非男式，比如前端，手机app等。</p></blockquote>\n<p>如果以后还有人和你说「计算机专业不适合女生」之类的，可以把本文发给他们看，让他们看看 IT 行业小姐姐们是如何说的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114141\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114141votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114141\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 263</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/ef76a2ab8cf07b49aaa7e162a6c578d1a9ed4a26.jpg"},{"title": "Git 分支操作介绍", "url": "http://blog.jobbole.com/114107/", "url_object_id": "90144cba629e28c20a0e4a2ee1876768", "create_date": "2018/06/10", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/b84f8d56e47a8496314a55a39b08ad10.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 3, "tags": "IT技术,Git,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/5/git-branching\">Kedar Vijay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9724-1.html\">Linux中国/Andy Song</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b84f8d56e47a8496314a55a39b08ad10.jpg\"></p>\n<p>在本系列的前两篇文章中，我们<a href=\"http://blog.jobbole.com/114101/\">开始使用 Git</a>，学会如何<a href=\"http://blog.jobbole.com/114104/\">克隆项目，修改、增加和删除内容</a>。在这第三篇文章中，我将介绍 Git 分支，为何以及如何使用分支。</p>\n<p><img class=\"aligncenter\" title=\"tree branches\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/33aa33f3f7c1b6dab4b586b93923469a.jpg\" alt=\"树枝\"></p>\n<p>不妨用树来描绘 Git 仓库。图中的树有很多分支，或长或短，或从树干延伸或从其它分支延伸。在这里，我们用树干比作仓库的 master 分支，其中 <code>master</code> 代指 ”master 分支”，是 Git 仓库的中心分支或第一个分支。为简单起见，我们假设 <code>master</code> 是树干，其它分支都是从该分支分出的。</p>\n<h3 id=\"toc_1\">为何在 Git 仓库中使用分支</h3>\n<p>使用分支的主要理由为：</p>\n<ul>\n<li>如果你希望为项目增加新特性，但很可能会影响当前可正常工作的代码。对于该项目的活跃用户而言，这是很糟糕的事情。与其将特性加入到其它人正在使用的 <code>master</code> 分支，更好的方法是在仓库的其它分支中变更代码，下面会给出具体的工作方式。</li>\n<li>更重要的是，<a href=\"https://en.wikipedia.org/wiki/Git\">Git 其设计</a>用于协作。如果所有人都在你代码仓库的 <code>master</code> 分支上操作，会引发很多混乱。对编程语言或项目的知识和阅历因人而异；有些人可能会编写有错误或缺陷的代码，也可能会编写你觉得不适合该项目的代码。使用分支可以让你核验他人的贡献并选择适合的加入到项目中。（这里假设你是代码库唯一的所有者，希望对增加到项目中的代码有完全的控制。在真实的项目中，代码库有多个具有合并代码权限的所有者）</li>\n</ul>\n<h3 id=\"toc_2\">创建分支</h3>\n<p>让我们回顾<a href=\"http://blog.jobbole.com/114104/\">本系列上一篇文章</a>，看一下在我们的 Demo 目录中分支是怎样的。如果你没有完成上述操作，请按照文章中的指示从 GitHub 克隆代码并进入 Demo 目录。运行如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8bc7488210996\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npwd\r\ngit branch\r\nls -la\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bc7488210996-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bc7488210996-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bc7488210996-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bc7488210996-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bc7488210996-1\"><span class=\"crayon-e\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bc7488210996-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">branch</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bc7488210996-3\"><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">la</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bc7488210996-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>pwd</code> 命令（是当前工作目录的英文缩写）返回当前你所处的目录（以便确认你在 <code>Demo</code> 目录中），<code>git branch</code> 列出该项目在你主机上的全部分支，<code>ls -la</code> 列出当前目录下的所有文件。你的终端输出类似于：</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/50e63bfafb866781b469c1a77a4f93a7.png\" alt=\"终端输出\"></p>\n<p>在 <code>master</code> 分支中，只有一个文件 <code>README.md</code>。（Git 会友好地忽略掉其它目录和文件。）</p>\n<p>接下来，运行如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8bd2482155928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit status\r\ngit checkout -b myBranch\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bd2482155928-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bd2482155928-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bd2482155928-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bd2482155928-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bd2482155928-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bd2482155928-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">checkout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">myBranch</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bd2482155928-3\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bd2482155928-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>第一条命令 <code>git status</code> 告知你当前位于 <code>branch master</code>，（就像在终端中看到的那样）它与 <code>origin/master</code> 处于同步状态，这意味着 master 分支的本地副本中的全部文件也出现在 GitHub 中。两份副本没有差异，所有的提交也是一致的。</p>\n<p>下一条命令 <code>git checkout -b myBranch</code> 中的 <code>-b</code> 告知 Git 创建一个名为 <code>myBranch</code> 的新分支，然后 <code>checkout</code> 命令将我们切换到新创建的分支。运行第三条命令 <code>git status</code> 确保你已经位于刚创建的分支下。</p>\n<p>如你所见，<code>git status</code> 告知你当前处于 <code>myBranch</code> 分支，没有变更需要提交。这是因为我们既没有增加新文件，也没有修改已有文件。</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bf0f4c89a9667eb09fb29956b9cc9d56.png\" alt=\"终端输出\"></p>\n<p>如果希望以可视化的方式查看分支，可以运行 <code>gitk</code> 命令。如果遇到报错 <code>bash: gitk: command not found...</code>，请先安装 <code>gitk</code> 软件包（找到你操作系统对应的安装文档，以获得安装方式）。</p>\n<p>（LCTT 译注：需要在有 X 服务器的终端运行 <code>gitk</code>，否则会报错）</p>\n<p>下图展示了我们在 Demo 项目中的所作所为：你最后一次提交（的对应信息）是 <code>Delete file.txt</code>，在此之前有三次提交。当前的提交用黄点标注，之前的提交用蓝点标注，黄点和 <code>Delete file.txt</code> 之间的三个方块展示每个分支所在的位置（或者说每个分支中的最后一次提交的位置）。由于 <code>myBranch</code> 刚创建，提交状态与 <code>master</code> 分支及其对应的记为 <code>remotes/origin/master</code> 的远程 <code>master</code> 分支保持一致。（非常感谢来自 Red Hat 的 <a href=\"https://opensource.com/users/psav\">Peter Savage</a> 让我知道 <code>gitk</code> 这个工具）</p>\n<p><img class=\"aligncenter\" title=\"Gitk output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4d766fc6104150cd915e1348c4ca080c.png\" alt=\"Gitk 输出\"></p>\n<p>下面让我们在 <code>myBranch</code> 分支下创建一个新文件并观察终端输出。运行如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8bd8266644084\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\necho \"Creating a newFile on myBranch\" &gt; newFile\r\ncat newFile\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bd8266644084-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bd8266644084-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bd8266644084-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bd8266644084-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bd8266644084-1\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Creating a newFile on myBranch\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">newFile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bd8266644084-2\"><span class=\"crayon-e\">cat </span><span class=\"crayon-e\">newFile</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bd8266644084-3\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bd8266644084-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>第一条命令中的 <code>echo</code> 创建了名为 <code>newFile</code> 的文件，接着 <code>cat newFile</code> 打印出文件内容，最后 <code>git status</code> 告知你我们 <code>myBranch</code> 分支的当前状态。在下面的终端输出中，Git 告知 <code>myBranch</code> 分支下有一个名为 <code>newFile</code> 的文件当前处于 <code>untracked</code> 状态。这表明我们没有让 Git 追踪发生在文件 <code>newFile</code> 上的变更。</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/9940ad61d955b4a2cfbeb264b8844f73.png\" alt=\"终端输出\"></p>\n<p>下一步是增加文件，提交变更并将 <code>newFile</code> 文件推送至 <code>myBranch</code> 分支（请回顾本系列上一篇文章获得更多细节）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8bdc376048639\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add newFile\r\ngit commit -m \"Adding newFile to myBranch\"\r\ngit push origin myBranch\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bdc376048639-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bdc376048639-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bdc376048639-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bdc376048639-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bdc376048639-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">newFile</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bdc376048639-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Adding newFile to myBranch\"</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bdc376048639-3\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">push </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">myBranch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bdc376048639-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>在上述命令中，<code>push</code> 命令使用的分支参数为 <code>myBranch</code> 而不是 <code>master</code>。Git 添加 <code>newFile</code> 并将变更推送到你 GitHub 账号下的 Demo 仓库中，告知你在 GitHub 上创建了一个与你本地副本分支 <code>myBranch</code> 一样的新分支。终端输出截图给出了运行命令的细节及命令输出。</p>\n<p><img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4f3bcd2a38a341027ce084f1ed51bfa4.png\" alt=\"终端输出\"></p>\n<p>当你访问 GitHub 时，在分支选择的下拉列表中可以发现两个可供选择的分支。</p>\n<p><img class=\"aligncenter\" title=\"GitHub\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/29592bacfeab5a8a161ca2f1b837c350.png\" alt=\"GitHub\"></p>\n<p>点击 <code>myBranch</code> 切换到 <code>myBranch</code> 分支，你可以看到在此分支上新增的文件。</p>\n<p><img class=\"aligncenter\" title=\"GitHub\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/eb928ec5ffe78a74df84b376c33b30a8.png\" alt=\"GitHub\"></p>\n<p>截至目前，我们有两个分支：一个是 <code>master</code> 分支，只有一个 <code>README.md</code> 文件；另一个是 <code>myBranch</code> 分支，有两个文件。</p>\n<p>你已经知道如何创建分支了，下面我们再创建一个分支。输入如下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8beb714985578\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit checkout master\r\ngit checkout -b myBranch2\r\ntouch newFile2\r\ngit add newFile2\r\ngit commit -m \"Adding newFile2 to myBranch2\"\r\ngit push origin myBranch2\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8beb714985578-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8beb714985578-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8beb714985578-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8beb714985578-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8beb714985578-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8beb714985578-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8beb714985578-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8beb714985578-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">checkout </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8beb714985578-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">checkout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">myBranch2</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8beb714985578-3\"><span class=\"crayon-e\">touch </span><span class=\"crayon-e\">newFile2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8beb714985578-4\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">newFile2</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8beb714985578-5\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Adding newFile2 to myBranch2\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8beb714985578-6\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">push </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">myBranch2</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bd8beb714985578-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>我不再给出终端输出，需要你自己尝试，但你可以在 <a href=\"https://github.com/kedark3/Demo/tree/myBranch2\">GitHub 代码库</a> 中验证你的结果。</p>\n<h3 id=\"toc_3\">删除分支</h3>\n<p>由于我们增加了两个分支，下面删除其中的一个（<code>myBranch</code>），包括两步：</p>\n<ol>\n<li><strong>删除本地分支</strong> 你不能删除正在操作的分支，故切换到 <code>master</code> 分支 （或其它你希望保留的分支），命令及终端输出如下：<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/e1b4762c1603c531f92cc662147e319d.png\" alt=\"\"><code>git branch</code> 可以列出可用的分支，使用 <code>checkout</code> 切换到 <code>master</code> 分支，然后使用 <code>git branch -D myBranch</code> 删除该分支。再次运行 <code>git branch</code> 检查是否只剩下两个分支（而不是三个）。</li>\n<li><strong>删除 GitHub 上的分支</strong> 使用如下命令删除 <code>myBranch</code> 的远程分支：<br>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8bf1442514264\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit push origin :myBranch\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bf1442514264-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bf1442514264-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bf1442514264-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">push </span><span class=\"crayon-v\">origin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">myBranch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bf1442514264-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<br>\n<img class=\"aligncenter\" title=\"Terminal output\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1b91a34117a4ea69a12a6c9f714f9def.png\" alt=\"Terminal output\"></li>\n</ol>\n<p>上面 <code>push</code> 命令中分支名称前面的冒号（<code>:</code>）告知 GitHub 删除分支。另一种写法为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bd8bf5114828022\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit push -d origin myBranch\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bd8bf5114828022-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bd8bf5114828022-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bd8bf5114828022-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">myBranch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bd8bf5114828022-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>其中 <code>-d</code> (也可以用 <code>--delete</code>) 也用于告知 GitHub 删除你的分支。</p>\n<p>我们学习了 Git 分支的使用，在本系列的下一篇文章中，我们将介绍如何执行 <code>fetch</code> 和 <code>rebase</code> 操作，对于多人同时的贡献的项目而言，这是很必须学会的。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114107\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114107votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114107\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/0870bcb4320291e61232dfc38ab50b871c6b8c41.jpg"},{"title": "在 Linux 上用 DNS 实现简单的负载均衡", "url": "http://blog.jobbole.com/114157/", "url_object_id": "1d572c5a3d4363cbf04c9d85ab99bc4e", "create_date": "2018/06/25", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2018/3/simple-load-balancing-dns-linux\">Carla Shroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9777-1.html\">Linux中国/qhwdw</a>   </div><blockquote><p>DNS 轮询将多个服务器映射到同一个主机名，并没有为这里展示的魔法做更多的工作。</p></blockquote>\n<p>如果你的后端服务器是由多台服务器构成的，比如集群化或者镜像的 Web 或者文件服务器，通过负载均衡器提供了单一的入口点。业务繁忙的大型电商在高端负载均衡器上花费了大量的资金，用它来执行各种各样的任务：代理、缓存、状况检查、SSL 处理、可配置的优先级、流量整形等很多任务。</p>\n<p>但是你并不需要做那么多工作的负载均衡器。你需要的是一个跨服务器分发负载的简单方法，它能够提供故障切换，并且不太在意它是否高效和完美。DNS 轮询和使用轮询的子域委派是实现这个目标的两种简单方法。</p>\n<p>DNS 轮询是将多台服务器映射到同一个主机名上，当用户访问 <code>foo.example.com</code> 时多台服务器都可用于处理它们的请求，使用的就是这种方式。</p>\n<p>当你有多个子域或者你的服务器在地理上比较分散时，使用轮询的子域委派就比较有用。你有一个主域名服务器，而子域有它们自己的域名服务器。你的主域名服务器将所有的到子域的请求指向到它们自己的域名服务器上。这将提升响应时间，因为 DNS 协议会自动查找最快的链路。</p>\n<h3 id=\"toc_1\">DNS 轮询</h3>\n<p>轮询和旅鸫鸟robins没有任何关系，据我相熟的图书管理员说，它最初是一个法语短语，<em>ruban rond</em>、或者 <em>round ribbon</em>。很久以前，法国政府官员以不分级的圆形、波浪线、或者直线形状来在请愿书上签字，以盖住原来的发起人。</p>\n<p>DNS 轮询也是不分级的，简单配置一个服务器列表，然后将请求转到每个服务器上。它并不做真正的负载均衡，因为它根本就不测量负载，也没有状况检查，因此如果一个服务器宕机，请求仍然会发送到那个宕机的服务器上。它的优点就是简单。如果你有一个小的文件或者 Web 服务器集群，想通过一个简单的方法在它们之间分散负载，那么 DNS 轮询很适合你。</p>\n<p>你所做的全部配置就是创建多条 A 或者 AAAA 记录，映射多台服务器到单个的主机名。这个 BIND 示例同时使用了 IPv4 和 IPv6 私有地址类：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0108886487381399\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfileserv.example.com. IN A 172.16.10.10\r\nfileserv.example.com. IN A 172.16.10.11\r\nfileserv.example.com. IN A 172.16.10.12\r\n\r\nfileserv.example.com. IN AAAA fd02:faea:f561:8fa0:1::10\r\nfileserv.example.com. IN AAAA fd02:faea:f561:8fa0:1::11\r\nfileserv.example.com. IN AAAA fd02:faea:f561:8fa0:1::12\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0108886487381399-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108886487381399-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0108886487381399-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108886487381399-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0108886487381399-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108886487381399-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0108886487381399-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108886487381399-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0108886487381399-1\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.10.10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108886487381399-2\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.10.11</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0108886487381399-3\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.10.12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108886487381399-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0108886487381399-5\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108886487381399-6\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0108886487381399-7\"><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108886487381399-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>Dnsmasq 在 <code>/etc/hosts</code> 文件中保存 A 和 AAAA 记录：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be010888f761793922\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n172.16.1.10 fileserv fileserv.example.com\r\n172.16.1.11 fileserv fileserv.example.com\r\n172.16.1.12 fileserv fileserv.example.com\r\nfd02:faea:f561:8fa0:1::10 fileserv fileserv.example.com\r\nfd02:faea:f561:8fa0:1::11 fileserv fileserv.example.com\r\nfd02:faea:f561:8fa0:1::12 fileserv fileserv.example.com\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be010888f761793922-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010888f761793922-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010888f761793922-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010888f761793922-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010888f761793922-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010888f761793922-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010888f761793922-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be010888f761793922-1\"><span class=\"crayon-cn\">172.16.1.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010888f761793922-2\"><span class=\"crayon-cn\">172.16.1.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010888f761793922-3\"><span class=\"crayon-cn\">172.16.1.12</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010888f761793922-4\"><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010888f761793922-5\"><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010888f761793922-6\"><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-v\">fileserv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010888f761793922-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>请注意这些示例都是很简化的，解析完全合格域名有多种方法，因此，关于如何配置 DNS 请自行学习。</p>\n<p>使用 <code>dig</code> 命令去检查你的配置能否按预期工作。将 <code>ns.example.com</code> 替换为你的域名服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0108893256993636\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ dig @ns.example.com fileserv A fileserv AAA\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0108893256993636-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108893256993636-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0108893256993636-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">dig</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">ns</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com </span><span class=\"crayon-i\">fileserv</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fileserv </span><span class=\"crayon-i\">AAA</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108893256993636-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>它将同时显示出 IPv4 和 IPv6 的轮询记录。</p>\n<h3 id=\"toc_2\">子域委派和轮询</h3>\n<p>子域委派结合轮询要做的配置会更多，但是这样有一些好处。当你有多个子域或者地理位置比较分散的服务器时，就应该去使用它。它的响应时间更快，并且宕机的服务器不会去响应，因此客户端不会因为等待回复而被挂住。一个短的 TTL，比如 60 秒，就能帮你做到。</p>\n<p>这种方法需要多台域名服务器。在最简化的场景中，你需要一台主域名服务器和两个子域，每个子域都有它们自己的域名服务器。在子域服务器上配置你的轮询记录，然后在你的主域名服务器上配置委派。</p>\n<p>在主域名服务器上的 BIND 中，你至少需要两个额外的配置，一个区声明以及在区数据文件中的 A/AAAA 记录。主域名服务器中的委派应该像如下的内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0108897782968759\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nns1.sub.example.com. IN A 172.16.1.20\r\nns1.sub.example.com. IN AAAA fd02:faea:f561:8fa0:1::20\r\nns2.sub.example.com. IN A 172.16.1.21\r\nns2.sub.example.com. IN AAA fd02:faea:f561:8fa0:1::21\r\n\r\nsub.example.com. IN NS ns1.sub.example.com.\r\nsub.example.com. IN NS ns2.sub.example.com.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0108897782968759-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108897782968759-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0108897782968759-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108897782968759-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0108897782968759-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108897782968759-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0108897782968759-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0108897782968759-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0108897782968759-1\"><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.1.20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108897782968759-2\"><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0108897782968759-3\"><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.16.1.21</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108897782968759-4\"><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAA </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0108897782968759-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108897782968759-6\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0108897782968759-7\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0108897782968759-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>接下来的每台子域服务器上有它们自己的区文件。在这里它的关键点是每个服务器去返回它<strong>自己的</strong> IP 地址。在 <code>named.conf</code> 中的区声明，所有的服务上都是一样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be010889b458300627\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nzone \"sub.example.com\" {\r\n    type master;\r\n    file \"db.sub.example.com\";\r\n};\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be010889b458300627-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889b458300627-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889b458300627-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889b458300627-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889b458300627-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be010889b458300627-1\"><span class=\"crayon-i\">zone</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"sub.example.com\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889b458300627-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">type </span><span class=\"crayon-v\">master</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889b458300627-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"db.sub.example.com\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889b458300627-4\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889b458300627-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>然后数据文件也是相同的，除了那个 A/AAAA 记录使用的是各个服务器自己的 IP 地址。SOA 记录都指向到主域名服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be010889e841028099\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n; first subdomain name server\r\n$ORIGIN sub.example.com.\r\n$TTL 60\r\nsub.example.com  IN SOA ns1.example.com. admin.example.com. (\r\n        2018123456      ; serial\r\n        3H              ; refresh\r\n        15              ; retry\r\n        3600000         ; expire\r\n)\r\n\r\nsub.example.com. IN NS ns1.sub.example.com.\r\nsub.example.com. IN A  172.16.1.20\r\nns1.sub.example.com.  IN AAAA  fd02:faea:f561:8fa0:1::20\r\n; second subdomain name server\r\n$ORIGIN sub.example.com.\r\n$TTL 60\r\nsub.example.com  IN SOA ns1.example.com. admin.example.com. (\r\n        2018234567      ; serial\r\n        3H              ; refresh\r\n        15              ; retry\r\n        3600000         ; expire\r\n)\r\n\r\nsub.example.com. IN NS ns1.sub.example.com.\r\nsub.example.com. IN A  172.16.1.21\r\nns2.sub.example.com.  IN AAAA  fd02:faea:f561:8fa0:1::21\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be010889e841028099-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b35be010889e841028099-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-1\"><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">first </span><span class=\"crayon-e\">subdomain </span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ORIGIN </span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">TTL</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-4\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SOA </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2018123456</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">serial</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3H</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">refresh</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">retry</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3600000</span><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expire</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-9\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-11\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-12\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">172.16.1.20</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-13\"><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA  </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-14\"><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">second </span><span class=\"crayon-e\">subdomain </span><span class=\"crayon-e\">name </span><span class=\"crayon-i\">server</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-15\"><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">ORIGIN </span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-16\"><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">TTL</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-17\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">com  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SOA </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2018234567</span><span class=\"crayon-h\">      </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">serial</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3H</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">refresh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\">              </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">retry</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3600000</span><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expire</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-22\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-24\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NS </span><span class=\"crayon-v\">ns1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-25\"><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">172.16.1.21</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be010889e841028099-26\"><span class=\"crayon-v\">ns2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AAAA  </span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-5b35be010889e841028099-27\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0210 seconds] -->\r\n<p>接下来生成子域服务器上的轮询记录，方法和前面一样。现在你已经有了多个域名服务器来处理到你的子域的请求。再说一次，BIND 是很复杂的，做同一件事情它有多种方法，因此，给你留的家庭作业是找出适合你使用的最佳配置方法。</p>\n<p>在 Dnsmasq 中做子域委派很容易。在你的主域名服务器上的 <code>dnsmasq.conf</code> 文件中添加如下的行，去指向到子域的域名服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be01088a2688466402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver=/sub.example.com/172.16.1.20\r\nserver=/sub.example.com/172.16.1.21\r\nserver=/sub.example.com/fd02:faea:f561:8fa0:1::20\r\nserver=/sub.example.com/fd02:faea:f561:8fa0:1::21\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be01088a2688466402-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be01088a2688466402-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be01088a2688466402-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be01088a2688466402-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be01088a2688466402-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be01088a2688466402-1\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">172.16.1.20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be01088a2688466402-2\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">172.16.1.21</span></div><div class=\"crayon-line\" id=\"crayon-5b35be01088a2688466402-3\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be01088a2688466402-4\"><span class=\"crayon-v\">server</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fd02</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">faea</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f561</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">8fa0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">21</span></div><div class=\"crayon-line\" id=\"crayon-5b35be01088a2688466402-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>然后在子域的域名服务器上的 <code>/etc/hosts</code> 中配置轮询。</p>\n<p>获取配置方法的详细内容和帮助，请参考这些资源：</p>\n<ul>\n<li><a href=\"http://www.thekelleys.org.uk/dnsmasq/doc.html\">Dnsmasq</a></li>\n<li><a href=\"http://shop.oreilly.com/product/9780596100575.do\">DNS and BIND, 5th Edition</a></li>\n</ul>\n<p>通过来自 Linux 基金会和 edX 的免费课程 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">“Linux 入门” </a> 学习更多 Linux 的知识。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114157\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114157votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114157\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"},{"title": "通过可写文件获取 Linux root 权限的 5 种方法", "url": "http://blog.jobbole.com/114159/", "url_object_id": "cbb3b429719bda3e099c2522f8c301a8", "create_date": "2018/06/26", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://www.hackingarticles.in/multiple-ways-to-get-root-through-writable-file/\">Raj Chandel</a>   译文出处：<a target=\"_blank\" href=\"http://www.4hou.com/technology/12134.html\">ang010ela</a>   </div><p>Linux系统中，全部都是以文件形式存在的，包括目录、设备都是有权限的，共有读、写、可执行三种。管理员为文件设置好权限后，应该要考虑哪些Linux用户会被允许和限制上述的三个权限。</p>\n<p>通过可写脚本进行root提取的5种方法：</p>\n<p><strong>· </strong>复制 /bin/sh 到 /tmp</p>\n<p><strong>· </strong>设定 /bin/dash的SUID位</p>\n<p><strong>· </strong>通过sudoer给登录用户完全的权限</p>\n<p><strong>· </strong>设定/bin/cp的SUID位</p>\n<p><strong>· </strong>逆向连接到恶意代码</p>\n<p>开启攻击机器，黑掉目标系统，然后进行权限提升。假设成功地通过ssh登录到受害者的机器，并可以访问非root的用户终端。然后使用下面的命令，下面会举例所有有写权限的二进制文件。</p>\n<p><img class=\"aligncenter\" title=\"1529412592363232.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1e7977c9bc9757738b3a866488ea5d62.png\" alt=\"image.png\"></p>\n<p>可以看到一个/lib/log中保存的python文件，在路径中我们看到了sanitizer.py文件的权限为777。</p>\n<p><img class=\"aligncenter\" title=\"1529412639504718.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/964f0d836515a1f465fa5dc271d2f0a1.png\" alt=\"image.png\"></p>\n<p>Admin要将下面的脚本加入，来清理/tmp中的垃圾文件。如果攻击者能够识别受害者机器中的这类情形，就可以通过下面的方式来提升root权限来破坏系统。</p>\n<p><img class=\"aligncenter\" title=\"1529412656940436.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/39214efb2063fa48217699186079c317.png\" alt=\"image.png\"></p>\n<p><strong>第一种方法</strong></p>\n<p>有许多的方法可以获取root权限，本方法中，我们将/bin/sh复制到/tmp文件夹中，然后设置/tmp/sh的SUID。这种方式非常简单，首先，通过nano编辑器打开文件，然后用rm -r /tmp/* 替换下面的命令：</p>\n<p><img class=\"aligncenter\" title=\"1529412681445056.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/dcf60a5fe3c007b80794b0c24ce5f6af.png\" alt=\"image.png\"></p>\n<p>在/tmp目录创建一个有SUID权限的sh文件后，允许sh文件时会有root访问权限。</p>\n<p><img class=\"aligncenter\" title=\"1529412695478987.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/0d5093e8d17512913d21f495b117af49.png\" alt=\"image.png\"></p>\n<p>可以通过下面的图片进行确认：</p>\n<p><img class=\"aligncenter\" title=\"1529412712243123.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/205448a574dc96c889344dc9dafdd8cb.png\" alt=\"image.png\"></p>\n<p><strong>第二种方法</strong></p>\n<p>同样地，可以用rm -r /tmp/* 替换下面行的内容</p>\n<p><img class=\"aligncenter\" title=\"1529412732150633.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bed4185b31699ce45bfaf3c5619ec88e.png\" alt=\"image.png\"></p>\n<p>在设置了/bin/dash的SUID权限后，运行后就可以获取root权限</p>\n<p><img class=\"aligncenter\" title=\"1529412745399156.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/34b3b42d097322d3fe33db6881f6dc11.png\" alt=\"image.png\"></p>\n<p>可以通过下面的图进行确认：</p>\n<p><img class=\"aligncenter\" title=\"1529412761544191.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a44576fbd2965f44814965d14a2c9baf.png\" alt=\"image.png\"></p>\n<p><strong>第三种方法</strong></p>\n<p><img class=\"aligncenter\" title=\"1529412774505929.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1472d7a6a5b70fd0a5caa935b6495cd7.png\" alt=\"image.png\"></p>\n<p>通过netcat逆向了连接后，就可以获取root权限。</p>\n<p>可以通过下面的图进行确认：</p>\n<p><img class=\"aligncenter\" title=\"1529412789517187.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/297bcaf946124ac842925a0ac6a82d09.png\" alt=\"image.png\"></p>\n<p><strong>第4种方法</strong></p>\n<p>另一个方法是给登录的用户sudo权限。下面的图中可以看出当前用户wernerbrandes不能允许sudo命令。</p>\n<p><img class=\"aligncenter\" title=\"1529412804140224.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/253ff8bf45823dc36d7dfd382bdd1ad5.png\" alt=\"image.png\"></p>\n<p>同样地，可以在下面替换rm -r /tmp/*</p>\n<p><img class=\"aligncenter\" title=\"1529412823891649.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2526a8e7e2c6b56429b1401b51f05ecd.png\" alt=\"image.png\"></p>\n<p>当输入“sudo -l”命令时会发现，这是sudo用户的一个成员。可以利用sudo bash来获取root权限。</p>\n<p><img class=\"aligncenter\" title=\"1529412835748075.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c7880f8f99521d379c511cead4b8d7a0.png\" alt=\"image.png\"></p>\n<p><strong>第5种方法</strong></p>\n<p>因为在linux类系统中，passwd文件起着很重要的作用。所以，如果攻击者有机会修改passwd文件，那么这将会成为一种动态的权限提升的方式。<br>\n同样地，可以利用cat命令查看etc/passwd文件的内容。<br>\nUID:1000 &amp; GID:1000 就是admin组队成员。下面编辑一下nemo记录来使其成为root组成员，选择etc/passwd的整个内容并复制粘贴到空text文件中。</p>\n<p><img class=\"aligncenter\" title=\"1529412862186777.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c0fac052f49554a228dd7921afb830fb.png\" alt=\"image.png\"></p>\n<p>然后，在一个新的终端上生成一个含salt的密码，然后复制。</p>\n<p><img class=\"aligncenter\" title=\"1529412882678813.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1aa9b7caf0e0a26b773e5ddc1dd36a89.png\" alt=\"image.png\"></p>\n<p>然后粘贴之前复制的含salt的密码在用户nemo的记录词条的X位置处，并修改UID&amp;GID为0:0。完成上面的步骤后，我们就可以将其保存为passwd。</p>\n<p><img class=\"aligncenter\" title=\"1529412899438763.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/39851bc754c3333d3391754370ca9198.png\" alt=\"image.png\"></p>\n<p>利用可写的脚本替换 “rm -r /tmp/*”</p>\n<p><img class=\"aligncenter\" title=\"1529412924674942.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1ac119b231c99b98f495d4b68d07401c.png\" alt=\"image.png\"></p>\n<p>设置/bin/cp的SUID来复制文件。</p>\n<p><img class=\"aligncenter\" title=\"1529412935719677.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/7f7a038894570cdee6341602844bb360.png\" alt=\"image.png\"></p>\n<p>将修改后的passwd文件下载受害者机器的/tmp文件夹中。用下面的命令检查/bin/cp的SUID位是否开启。</p>\n<p><img class=\"aligncenter\" title=\"1529412953595227.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a8322a3d2072ceb1a4b10099f03dec36.png\" alt=\"image.png\"></p>\n<p>下面确认是否改变了passwd文件的内容：</p>\n<p><img class=\"aligncenter\" title=\"1529412972236235.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d2e4f2d6ee16c639cfcc3fe0516161f5.png\" alt=\"image.png\"></p>\n<p>可以看出passwd文件中的变化：</p>\n<p><img class=\"aligncenter\" title=\"1529412987405083.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/0dae580655080853330e9dc34bf88e6e.png\" alt=\"image.png\"></p>\n<p>可以执行下面的命令来获取root权限：</p>\n<p><img class=\"aligncenter\" title=\"1529413000676512.png\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/19e39ae621feb388e358cd0783dd0cff.png\" alt=\"image.png\"></p>\n<p>本文证明了攻击者如何通过可写文件进行linux系统权限提升。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114159\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114159votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114159\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"},{"title": "我作为开发者犯过的两次愚蠢的错误", "url": "http://blog.jobbole.com/114164/", "url_object_id": "6ef1af433054de7bb42416cdfc0fbfd8", "create_date": "2018/06/29", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fsrtjp2o93j20hs0audih.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "职场,程序员,职场", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/dimple11\">dimple11</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.org/the-times-ive-messed-up-as-a-developer-3c0bcaa1afd6\">Zachary Kuhn</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>上周我和同事们简单地聊了聊我们工作中搞砸的那些事儿。如今早已不再犯那些错了，所以想起过去就觉得很好笑。但是笑归笑，其实当时犯的这些错让我们受益颇深。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fsrtjp2o93j20hs0audih.jpg\" width=\"640\" height=\"390\"></p>\n<p style=\"text-align: center;\">（credit：Snecx）</p>\n<p>分享自己犯错的经历至关重要，能让别人从中吸取经验教训，而且可能让他们工作起来更上手。我在这儿记录了几条自己最近犯的错。</p>\n<h3>为什么有那么多生产数据库被误删？</h3>\n<p>几个月之前，Reddit 上发了一篇<a href=\"https://www.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/\">文章</a>，写的是一个入门级开发人员在上班第一天就误删了生产数据库。我们看到类似这种有人犯了特大的、不可磨灭的错误的文章，都不免心生畏惧。我们意识到自己并不是没可能犯那种错——大多数时候都是悬崖勒马。</p>\n<p>我在干第一份工作的时候，有一个高级数据库管理员在上班第一天就误删了生产数据库，这种例子简直比比皆是。工作团队用一周前旧的数据库备份帮他弥补了过失，让他保住了工作。如今十年过去了，都仍用这件事拿他开涮。</p>\n<p>今年年初有天早上，我被叫去调查一个客户生产中出现的问题。他们本来要针对一小部分用户进行产品的 β 测试，但是他们的网站首页突然什么都显示不出来了。我猜想可能是系统有 bug 或者有漏洞所致。</p>\n<p>我登录进生产机器，调出数据库，发现 articles 表是空的。OK，这证实了网页显示空白的情况。</p>\n<p>用户表里面还是有用户的，这就奇怪了，所以我们丢了所有的 articles，但起码他们的测试用户仍有他们的账号，我们可以解释说是这是个测试版，而且这种事情时有发生。</p>\n<p>接下来一会儿我就犯迷糊了。我记不清楚自己干了什么，我认为自己不会蠢到在控制台窗口输入了删除表中用户的指令，可情况就是这样——现在既没有 articles 表，也没有用户表。我呆坐着，感觉有点震惊。</p>\n<p>然后我的大脑高速运转，开始想办法修复问题。我真的删掉用户表了吗？是的。我们运行备份数据库了吗？没有。该怎么向客户解释呢？我不知道。</p>\n<p>我记得自己去找了项目经理，坐在她旁边解释事情发生的经过，articles 表中没有数据了，所以网站看上去是空的。哦对了，我还误删了用户表。现在他们需要重新邀请所有的用户——如果他们还能想清楚用户都有谁的话。哎呀。</p>\n<p>我回到自己的座位上，感觉深受挫败。</p>\n<p><strong>但是我觉得事情有些蹊跷，我们怎么可能一开始就丢了所有的 articles 表呢？</strong>于是我继续深究下去，一方面是因为难以接受这个结果，一方面是想挽回颜面。之后过了一小会儿，我注意到了关键问题。</p>\n<p>服务器上还有另外 5 个数据库，其中一个的名字和我正在看的那个数据库的名字非常相似。</p>\n<p>我一检查，发现 articles 都在里面，用户表也完好无损。事实证明是因为配置发生变化，无意间让它变成了生产数据库，导致网站指向了全新的数据库。我在里面看到的那些用户呢？种子数据罢了。</p>\n<p>真是如释重负！一早上神经紧绷、胃酸翻涌，搞得我浑身不适，但好在我们“修复”了所有的数据，并且找到了问题真正的症结所在，没有提前宣布误删数据库的坏消息。</p>\n<p>这个小插曲让我们受益良多，最简单的一个就是：现在我们总是在给数据库做备份……这可能是我们开发人员最有效的胃药。</p>\n<h3>总赶进度，却从来赶不上进度</h3>\n<p>我最近所犯的另一个突出 错误没那么戏剧化，实际上是由一个个小错误最终累积造成了大麻烦。</p>\n<p>我们项目开发的一大挑战就是时间紧张（但也不全是？）</p>\n<p>第一次开会时，我们一致觉得项目需要的时间比我们能够拿出来的时间多了一倍。从项目一开始，截止日期就步步紧逼，所以我们三下五除二就通过了认证环节，以便进入客户真正关心的功能环节。</p>\n<p>我只是之前在一个单页 app 中落实了一次认证，但仍然没有彻底理解 app 各部分是如何协调的。</p>\n<p>尽己所能用最快的速度把 app 赶出来，就是大错特错，<strong>我漏掉了一些非常重要的东西：</strong></p>\n<ol>\n<li>用户在登陆后，是通过 cookie 来加载的，但是我的 app 页面没有给加载提供等待时间，而是根据事件顺序来决定先后的，所以服务器会回复说你没有权限。这种错误很少见，而且很难再出现，因为大多数情况下事件都是按照正确的顺序来完成的。</li>\n<li>而且认证环节也从不检查用户令牌是否失效，如果你不经常访问网站，当发现了没法登上网站后，就需要注销登录再重新登进去。</li>\n<li>令牌应该在每次发起请求时都进行更新，但我从来都没有时间去理解这些规则。所以这里又产生了时间问题。如果我们一次同时发出几种请求，收到的回复取决于他们到来的顺序，那将来发送请求用到的令牌就是错的。</li>\n</ol>\n<p>我们卯足劲赶进度，但最终所用的时间还是要比给定的时间多一倍。区别就是我们开发出的 app 里面漏洞更多了，然后甚而要花更多的时间对漏洞进行追踪和修复。</p>\n<p>工作中的失误让我尴尬不已，在大家面前感到十分羞愧，因为我把一切都搞砸了。</p>\n<p>我要说一点：从那之后，我开始花时间学习认证机制，现在已经理解了 OAuth,、JWT、刷新令牌和失效。我仔细阅读了许多库里别人写的认证代码，而且建立了基于几种不同语言版本和框架的认证流程。</p>\n<h3>失败是成功之母</h3>\n<p>这是每次失败的经历给予我的启发。只要你愿意学习，几乎每次这样的经历都会让你从中受益。</p>\n<p>如果人能够从错误中吸取教训，那么就会有所进步。如果一个队员是第一次犯错，我尽量不会对他表现出不满态度，他们往往已经知道自己把事情搞糟了。</p>\n<p>但我也努力不去苛责那些总是犯错、屡教不改的人，他们也需要被同情。</p>\n<p>对待犯错，如果你能够做到这四点，那么就会不断进步：</p>\n<ul>\n<li>对曾经犯过的错误可以自嘲一番</li>\n<li>从中吸取经验教训</li>\n<li>在之后努力为自己正名</li>\n<li>和他人分享，让他人也能从中获益。</li>\n</ul>\n<p>关于犯错的宝贵价值，我留给你们一则名人轶事：20 世纪初期，IBM 的总裁托马斯·J·沃森遇到了一位因为多次决策错误让公司损失惨重的员工，当问及是否要开除这个员工时，沃森答道：</p>\n<blockquote><p>“不，我刚刚花了 60 万美元培训了他，我怎么会让其他人雇佣他来获得他的经历呢？”</p></blockquote>\n<p>你过去犯过哪些有意思的错？来一起分享吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114164\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114164votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114164\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">dimple11</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28db3e36f17643a752be4b798d5ceabc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/dimple11\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/dimple11/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/2429e83a2e9ae3455ad465bd664afe485a339128.jpg"},{"title": "在 Git 中怎样克隆、修改、添加和删除文件？", "url": "http://blog.jobbole.com/114104/", "url_object_id": "2fd3e1a536854e3343b73dcb02097713", "create_date": "2018/06/09", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/a9f8e32251fe9ed8030a42ac78ef2343.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,Git,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/2/how-clone-modify-add-delete-git-files\">Kedar Vijay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9517-1.html\">Linux中国/MjSeven</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a9f8e32251fe9ed8030a42ac78ef2343.jpg\"></p>\n<p>在 <a href=\"http://blog.jobbole.com/114101/\">本系列的第一篇文章</a> 开始使用 Git 时，我们创建了一个简单的 Git 仓库，并用我们的计算机连接到它，向其中添加一个文件。在本文中，我们将学习一些关于 Git 的其他内容，即如何克隆（下载）、修改、添加和删除 Git 仓库中的文件。</p>\n<h3 id=\"toc_1\">让我们来克隆一下</h3>\n<p>假设你在 GitHub 上已经有一个 Git 仓库，并且想从它那里获取你的文件——也许你在你的计算机上丢失了本地副本，或者你正在另一台计算机上工作，但是想访问仓库中的文件，你该怎么办？从 GitHub 下载你的文件？没错！在 Git 术语中我们称之为“克隆clone”。（你也可以将仓库作为 ZIP 文件下载，但我们将在本文中探讨克隆方式。）</p>\n<p>让我们克隆在上一篇文章中创建的名为 Demo 的仓库。（如果你还没有创建 Demo 仓库，请跳回到<a href=\"http://blog.jobbole.com/114101/\">那篇文章</a>并在继续之前执行那些步骤）要克隆文件，只需打开浏览器并导航到 <code>https://github.com/&lt;your_username&gt;/Demo</code> (其中 &lt;your_username&gt; <code></code> 是你仓库的名称。例如，我的仓库是 <code>https://github.com/kedark3/Demo</code>)。一旦你导航到该 URL，点击“克隆或下载Clone or download”按钮，你的浏览器看起来应该是这样的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c73c351075b2d57e2d8d9b59bc36ac5b.png\" alt=\"\"></p>\n<p>正如你在上面看到的，“使用 HTTPS 克隆Clone with HTTPS”选项已打开。从该下拉框中复制你的仓库地址（<code>https://github.com/&lt;your_username&gt;/Demo.git</code>），打开终端并输入以下命令将 GitHub 仓库克隆到你的计算机：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec611517152485\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit clone https://github.com/&lt;your_username&gt;/Demo.git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec611517152485-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec611517152485-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec611517152485-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/&lt;your_username&gt;/Demo.git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec611517152485-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后，要查看 <code>Demo</code> 目录中的文件列表，请输入以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec61f136023628\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nls Demo/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec61f136023628-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec61f136023628-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec61f136023628-1\"><span class=\"crayon-e\">ls </span><span class=\"crayon-v\">Demo</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec61f136023628-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>终端看起来应该是这样的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/bbaf1d51a27e653b3ff50bc5b5fd4034.png\" alt=\"\"></p>\n<h3 id=\"toc_2\">修改文件</h3>\n<p>现在我们已经克隆了仓库，让我们修改文件并在 GitHub 上更新它们。首先，逐个输入下面的命令，将目录更改为 <code>Demo/</code>，检查 <code>README.md</code> 中的内容，添加新的（附加的）内容到 <code>README.md</code>，然后使用 <code>git status</code> 检查状态:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec624032370404\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd Demo/\r\nls\r\ncat README.md\r\necho \"Added another line to REAMD.md\" &gt;&gt; README.md\r\ncat README.md\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec624032370404-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec624032370404-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec624032370404-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec624032370404-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec624032370404-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec624032370404-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec624032370404-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec624032370404-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-v\">Demo</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec624032370404-2\"><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec624032370404-3\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec624032370404-4\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Added another line to REAMD.md\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">md</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec624032370404-5\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec624032370404-6\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec624032370404-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如果你逐一运行这些命令，终端看起开将会是这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/72ebaab494134e1fef97873629f8df5a.png\" alt=\"\"></p>\n<p>让我们看一下 <code>git status</code> 的输出，并了解它的意思。不要担心这样的语句：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec628613217981\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nOn branch master\r\nYour branch is up-to-date with 'origin/master'.\".\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec628613217981-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec628613217981-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec628613217981-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec628613217981-1\"><span class=\"crayon-e\">On </span><span class=\"crayon-e\">branch </span><span class=\"crayon-e\">master</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec628613217981-2\"><span class=\"crayon-e\">Your </span><span class=\"crayon-e\">branch </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">up</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">date </span><span class=\"crayon-i\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'origin/master'</span><span class=\"crayon-sy\">.</span>\"<span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec628613217981-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>因为我们还没有学习这些。（LCTT 译注：学了你就知道了）下一行说：<code>Changes not staged for commit</code>（变化未筹划提交）；这是告诉你，它下面列出的文件没有被标记准备（“筹划stage”）提交。如果你运行 <code>git add</code>，Git 会把这些文件标记为 <code>Ready for commit</code>（准备提交）；换句话说就是 <code>Changes staged for commit</code>（变化筹划提交）。在我们这样做之前，让我们用 <code>git diff</code> 命令来检查我们添加了什么到 Git 中，然后运行 <code>git add</code>。</p>\n<p>这里是终端输出：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2787ca9ba76aedea3d424335e3cd5938.png\" alt=\"\"></p>\n<p>我们来分析一下：</p>\n<ul>\n<li><code>diff --git a/README.md b/README.md</code> 是 Git 比较的内容（在这个例子中是 <code>README.md</code>）。</li>\n<li><code>--- a/README.md</code> 会显示从文件中删除的任何东西。</li>\n<li><code>+++ b/README.md</code> 会显示从文件中添加的任何东西。</li>\n<li>任何添加到文件中的内容都以绿色文本打印，并在该行的开头加上 <code>+</code> 号。</li>\n<li>如果我们删除了任何内容，它将以红色文本打印，并在该行的开头加上 <code>-</code> 号。</li>\n<li>现在 <code>git status</code> 显示 <code>Changes to be committed:</code>（变化将被提交），并列出文件名（即 <code>README.md</code>）以及该文件发生了什么（即它已经被 <code>modified</code> 并准备提交）。</li>\n</ul>\n<p>提示：如果你已经运行了 <code>git add</code>，现在你想看看文件有什么不同，通常 <code>git diff</code> 不会输出任何东西，因为你已经添加了文件。相反，你必须使用 <code>git diff --cached</code>。它会告诉你 Git 添加的当前版本和以前版本文件之间的差别。你的终端输出看起来会是这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/9a0c05bdb3439247c9634ec4bf1f3b05.png\" alt=\"\"></p>\n<h3 id=\"toc_3\">上传文件到你的仓库</h3>\n<p>我们用一些新内容修改了 <code>README.md</code> 文件，现在是时候将它上传到 GitHub。</p>\n<p>让我们提交更改并将其推送到 GitHub。运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec62d294441758\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit commit -m \"Updated Readme file\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec62d294441758-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec62d294441758-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec62d294441758-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Updated Readme file\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec62d294441758-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这告诉 Git 你正在“提交”已经“添加”的更改，你可能还记得，从本系列的第一部分中，添加一条消息来解释你在提交中所做的操作是非常重要的，以便你在稍后回顾 Git 日志时了解当时的目的。（我们将在下一篇文章中更多地关注这个话题。）<code>Updated Readme file</code> 是这个提交的消息——如果你认为这没有合理解释你所做的事情，那么请根据需要写下你的提交消息。</p>\n<p>运行 <code>git push -u origin master</code>，这会提示你输入用户名和密码，然后将文件上传到你的 GitHub 仓库。刷新你的 GitHub 页面，你应该会看到刚刚对 <code>README.md</code> 所做的更改。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/78dda20702c27aabe4b05aa9195fe867.png\" alt=\"\"></p>\n<p>终端的右下角显示我提交了更改，检查了 Git 状态，并将更改推送到了 GitHub。<code>git status</code> 显示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec633106692692\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nYour branch is ahead of 'origin/master' by 1 commit\r\n  (use \"git push\" to publish your local commits)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec633106692692-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec633106692692-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec633106692692-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec633106692692-1\"><span class=\"crayon-e\">Your </span><span class=\"crayon-e\">branch </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ahead </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'origin/master'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">by</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">commit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec633106692692-2\"> <span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"git push\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">publish </span><span class=\"crayon-e\">your </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">commits</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec633106692692-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>第一行表示在本地仓库中有一个提交，但不在 <code>origin/master</code> 中（即在 GitHub 上）。下一行指示我们将这些更改推送到 <code>origin/master</code> 中，这就是我们所做的。（在本例中，请参阅本系列的第一篇文章，以唤醒你对 <code>origin</code> 含义的记忆。我将在下一篇文章中讨论分支的时候，解释 <code>master</code> 的含义。）</p>\n<h3 id=\"toc_4\">添加新文件到 Git</h3>\n<p>现在我们修改了一个文件并在 GitHub 上更新了它，让我们创建一个新文件，将它添加到 Git，然后将其上传到 GitHub。 运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec637411834720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\necho \"This is a new file\" &gt;&gt; file.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec637411834720-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec637411834720-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec637411834720-1\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"This is a new file\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec637411834720-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这将会创建一个名为 <code>file.txt</code> 的新文件。</p>\n<p>如果使用 <code>cat</code> 查看它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec63a165718444\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncat file.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec63a165718444-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec63a165718444-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec63a165718444-1\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec63a165718444-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0147 seconds] -->\r\n<p>你将看到文件的内容。现在继续运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec657089166362\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec657089166362-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec657089166362-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec657089166362-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec657089166362-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>Git 报告说你的仓库中有一个未跟踪的文件（名为 <code>file.txt</code>）。这是 Git 告诉你说在你的计算机中的仓库目录下有一个新文件，然而你并没有告诉 Git，Git 也没有跟踪你所做的任何修改。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/7b5fcf2b0b8426eb0f6947e13740d8b4.png\" alt=\"\"></p>\n<p>我们需要告诉 Git 跟踪这个文件，以便我们可以提交并上传文件到我们的仓库。以下是执行该操作的命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec67b410959214\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add file.txt\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec67b410959214-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec67b410959214-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec67b410959214-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec67b410959214-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec67b410959214-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec67b410959214-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0118 seconds] -->\r\n<p>终端输出如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/416a3cda5609a4d6af59d9b3ac7ed5a9.png\" alt=\"\"></p>\n<p><code>git status</code> 告诉你有 <code>file.txt</code> 被修改，对于 Git 来说它是一个 <code>new file</code>，Git 在此之前并不知道。现在我们已经为 Git 添加了 <code>file.txt</code>，我们可以提交更改并将其推送到 <code>origin/master</code>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b9726595fac48135765596f41e98112c.png\" alt=\"\"></p>\n<p>Git 现在已经将这个新文件上传到 GitHub；如果刷新 GitHub 页面，则应该在 GitHub 上的仓库中看到新文件 <code>file.txt</code>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/deb4e163d789a2e959251df26e0ef9cc.png\" alt=\"\"></p>\n<p>通过这些步骤，你可以创建尽可能多的文件，将它们添加到 Git 中，然后提交并将它们推送到 GitHub。</p>\n<h3 id=\"toc_5\">从 Git 中删除文件</h3>\n<p>如果我们发现我们犯了一个错误，并且需要从我们的仓库中删除 <code>file.txt</code>，该怎么办？一种方法是使用以下命令从本地副本中删除文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec67f680546329\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nrm file.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec67f680546329-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec67f680546329-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec67f680546329-1\"><span class=\"crayon-e\">rm </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec67f680546329-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如果你现在做 <code>git status</code>，Git 就会说有一个文件 <code>not staged for commit</code>（未筹划提交），并且它已经从仓库的本地拷贝中删除了。如果我们现在运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec685950894965\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add file.txt\r\ngit status\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec685950894965-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec685950894965-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec685950894965-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec685950894965-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec685950894965-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">status</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec685950894965-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>我知道我们正在删除这个文件，但是我们仍然运行 <code>git add</code>，因为我们需要告诉 Git 我们正在做的<strong>更改</strong>，<code>git add</code> 可以用于我们添加新文件、修改一个已存在文件的内容、或者从仓库中删除文件时。实际上，<code>git add</code> 将所有更改考虑在内，并将这些筹划提交这些更改。如果有疑问，请仔细查看下面终端屏幕截图中每个命令的输出。</p>\n<p>Git 会告诉我们已删除的文件正在进行提交。只要你提交此更改并将其推送到 GitHub，该文件也将从 GitHub 的仓库中删除。运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bec689980772777\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit commit -m \"Delete file.txt\"\r\ngit push -u origin master\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec689980772777-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bec689980772777-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bec689980772777-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bec689980772777-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Delete file.txt\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bec689980772777-2\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">origin </span><span class=\"crayon-i\">master</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bec689980772777-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>现在你的终端看起来像这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a702fafff9bde602d93411167d94710b.png\" alt=\"\"></p>\n<p>你的 GitHub 看起来像这样：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4d86c6b7db708b054256542492880b21.png\" alt=\"\"></p>\n<p>现在你知道如何从你的仓库克隆、添加、修改和删除 Git 文件。本系列的下一篇文章将检查 Git 分支。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114104\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114104votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114104\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/02da8890d313b46cdbac49de0b7a5f2041adce48.jpg"},{"title": "详解 Linux 文档属性、拥有者、群组、权限、差异", "url": "http://blog.jobbole.com/114031/", "url_object_id": "4382c32a2cdca2e189d33b686dc851bb", "create_date": "2018/05/22", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 3, "tags": "IT技术,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/justmine/p/9053419.html\">无痴迷，不成功</a>   </div><h2 id=\"写在前面\">写在前面</h2>\n<p>我们都知道<code>Linux</code>是一个支持<strong>多用户、多任务</strong>的系统，这也是它最优秀的特性，即可能同时有很多人都在系统上进行工作，所以千万不要<strong>强制关机</strong>，同时，为了保护每个人的隐私和工作环境，针对某一个文档(文件、目录)，<code>Linux</code>系统定义了三种身份，分别是<strong>拥有者(owner)、群组(group)、其他人(others)</strong>，每一种身份又对应三种权限，分别是<strong>可读(readable)、可写(writable)、可执行(excutable)</strong>。</p>\n<h2 id=\"文档属性\">文档属性</h2>\n<p>使用命令<code>ls -al --full-time</code>，或者此命令的简写<code>ll</code>可以查看文件或者目录的所有属性。如下：<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6eb4e7e09d926ea7adb505db505447d2.png\"><br>\n从上面可以看到，每一行都有7列，分别是：</p>\n<ol>\n<li><strong>第一列</strong><br>\n共10位，第1位表示文档类型，<code>d</code>表示目录，<code>-</code>表示文件，<code>l</code>表示链接文件，<code>d</code>表示可随机存取的设备，如U盘等，<code>c</code>表示一次性读取设备，如鼠标、键盘等。后9位，依次对应三种身份所拥有的权限，身份顺序为：owner、group、others，权限顺序为：readable、writable、excutable。如：<code>-r-xr-x---</code>的含义为<strong>当前文档是一个文件，拥有者可读、可执行，同一个群组下的用户，可读、可写，其他人没有任何权限</strong>。</li>\n<li><strong>第二列</strong><br>\n表示连结数</li>\n<li><strong>第三列</strong><br>\n表示拥有者</li>\n<li><strong>第四列</strong><br>\n表示所属群组</li>\n<li><strong>第五列</strong><br>\n表示文档容量大小，单位字节</li>\n<li><strong>第六列</strong><br>\n表示文档最后修改时间，注意不是文档的创建时间哦</li>\n<li><strong>第七列</strong><br>\n表示文档名称。以点(.)开头的是隐藏文档</li>\n</ol>\n<h2 id=\"变更拥有者owner\">变更拥有者(owner)</h2>\n<h3 id=\"位置\">位置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee91f0079118473\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\netc/passwd</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee91f0079118473-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee91f0079118473-1\"><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">passwd</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/71aa271ab220cecc626c63674cc660d4.png\"></p>\n<blockquote><p>注意：必须是该位置下已存在的帐号。也就是在<code>/etc/passwd</code>中有记录的拥有者才能改变。</p></blockquote>\n<h3 id=\"语法\">语法</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee91f9772918892\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchown [-R] [帐号名称] [文件或目录]\r\nchown [-R] [帐号名称]:[群组名称] [文件或目录]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee91f9772918892-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee91f9772918892-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee91f9772918892-1\"><span class=\"crayon-i\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>帐号名称<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>文件或目录<span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee91f9772918892-2\"><span class=\"crayon-i\">chown</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">R</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>帐号名称<span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span>群组名称<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>文件或目录<span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<blockquote><p>备注：此命令也可以顺便变更文档群组，但还是建议使用<strong>chgrp</strong>命令来变更文档群组。</p></blockquote>\n<h4 id=\"选项\">选项</h4>\n<p>-R 递归变更，即连同次目录下的所有文件(夹)都要变更。</p>\n<h3 id=\"用法\">用法</h3>\n<p><code>chown daemon test</code> 变更文件夹<strong>test</strong>账号为<strong>daemon</strong>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fcb43ff3f99e4cc0f24349f91c00a3ee.png\"><br>\n<code>chown daemon:root test</code> 变更文件夹<strong>test</strong>群组为<strong>root</strong>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/216562230373eef21e7b964e69fa7fe6.png\"></p>\n<p><code>chown root.users test</code> 变更文件夹账号为<strong>root</strong>，群组为<strong>users</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/469705efe86e04479131eee26983dd11.png\"><br>\n<code>chown .root test</code> 单独变更群组为<strong>root</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cd23a79ca203ca771e40988d1acc9013.png\"></p>\n<blockquote><p>备注：虽然也可以在拥有者与群组间加小数点(<strong>.</strong>)，但为了避免有的同学命名中带点，故还是建议使用冒号“:”来隔开拥有者与群组，避免误判。</p></blockquote>\n<h2 id=\"变更群组group\">变更群组(group)</h2>\n<h3 id=\"位置-1\">位置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee91ff220189441\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\netc/group</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee91ff220189441-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee91ff220189441-1\"><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">group</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ece6b7d40fd616dbb26d3c639a0c5764.png\"></p>\n<blockquote><p>备注：从这里可以查看到所有群组</p></blockquote>\n<h3 id=\"语法-1\">语法</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee9203596980656\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchgrp [-options] [群组名] [文档路径]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9203596980656-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee9203596980656-1\"><span class=\"crayon-i\">chgrp</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">options</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>群组名<span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span>文档路径<span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<blockquote><p>备注：关于<strong>options</strong>，可以通过<code>man chgrp、info chgrp、chgrp --help</code>等命令查询详细用法。</p></blockquote>\n<h3 id=\"用法-1\">用法</h3>\n<p><code>chgrp -R users test</code> 改变<code>test</code>文件夹及其所有子文件(夹)的群组为<code>users</code>。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/324a71a1e4b3ee4ec38eb3c555c82cf1.png\"></p>\n<blockquote><p>注意：群组名称不在位置内，将会报错<code>invalid group</code>。</p></blockquote>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e26a356e4af1b5db53ee00817cc16660.png\"></p>\n<h2 id=\"变更权限\">变更权限</h2>\n<p>Linux文档的基本权限就三个，分别是<code>read/write/execute</code>，加上身份<code>owner/group/others</code>也只有九个。权限变更的方式有2种，分别是<strong>符号法</strong>和<strong>数字法</strong>。</p>\n<h3 id=\"符号法\">符号法</h3>\n<p>分别使用u，g，o来代表三种身份，a表示全部身份；分别使用r、w、x表示三种权限；分别使用+、-、=表示操作行为</p>\n<h4 id=\"语法-2\">语法</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee9207400440455\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod | u g o a | +（加入） -（除去） =（设置） | r w x | 文档路径 </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9207400440455-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee9207400440455-1\"><span class=\"crayon-v\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">g</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span>（加入）<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span>（除去）<span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span>（设置）<span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span>文档路径<span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"设置权限\">设置权限(=)</h3>\n<p>变更目录test的权限为任何人都可读、写、执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee920a822474152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod u=rwx,g=rwx,o=rwx test \r\n或\r\nchmod ugo=rwx test \r\n或\r\nchmod a=rwx test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee920a822474152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee920a822474152-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee920a822474152-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee920a822474152-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee920a822474152-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee920a822474152-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">rwx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">rwx </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee920a822474152-2\">或</div><div class=\"crayon-line\" id=\"crayon-5b35be0ee920a822474152-3\"><span class=\"crayon-e\">chmod </span><span class=\"crayon-v\">ugo</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">rwx </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee920a822474152-4\">或</div><div class=\"crayon-line\" id=\"crayon-5b35be0ee920a822474152-5\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">rwx </span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/5ce9bb78e6d7b8626e226fe43a69040f.png\"></p>\n<h3 id=\"去掉权限-\">去掉权限(-)</h3>\n<p>去掉目录test执行权限</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee920e140913928\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod u-x,g-x,o-x test \r\n或\r\nchmod ugo-x test \r\n或\r\nchmod a-x test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee920e140913928-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee920e140913928-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee920e140913928-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee920e140913928-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee920e140913928-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee920e140913928-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee920e140913928-2\">或</div><div class=\"crayon-line\" id=\"crayon-5b35be0ee920e140913928-3\"><span class=\"crayon-e\">chmod </span><span class=\"crayon-v\">ugo</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee920e140913928-4\">或</div><div class=\"crayon-line\" id=\"crayon-5b35be0ee920e140913928-5\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/bb7c408bad9334918b678f5a15105cff.png\"></p>\n<blockquote><p>备注：执行权限(x)，对目录而已就是其他用户能否<strong>cd test</strong>成为工作目录。</p></blockquote>\n<h3 id=\"添加权限\">添加权限(+)</h3>\n<p>增加目录test执行权限</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee9211865912064\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod u+x,g+x,o+x test \r\n或\r\nchmod ugo+x test \r\n或\r\nchmod a+x test</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9211865912064-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee9211865912064-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9211865912064-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0ee9211865912064-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9211865912064-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee9211865912064-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">g</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee9211865912064-2\">或</div><div class=\"crayon-line\" id=\"crayon-5b35be0ee9211865912064-3\"><span class=\"crayon-e\">chmod </span><span class=\"crayon-v\">ugo</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0ee9211865912064-4\">或</div><div class=\"crayon-line\" id=\"crayon-5b35be0ee9211865912064-5\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6ab28b525a72bc8b09e26d048f72701a.png\"></p>\n<blockquote><p>备注：很熟悉吧，如果我们编写完一个shell文件test.sh后，通过<code>chmod a+x test.sh</code>就添加了文件执行权限。</p></blockquote>\n<h3 id=\"数字法\">数字法</h3>\n<p>顾名思义，就是使用数字来代表权限，r,w,x分别为4,2,1。三种权限累加就可以得出一种身份的权限。</p>\n<p>设置目录test的权限为任何人都可读、写、执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee9214758051546\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod 777 test </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9214758051546-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee9214758051546-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">777</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/be87c870ece0e5311d409991d369de5e.png\"><br>\n设置目录test的权限为任何人都可读、写。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee9217663292582\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod 666 test </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee9217663292582-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee9217663292582-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">666</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ff0b2a1d263b70a1f7ac7581df8def45.png\"></p>\n<p>赋予一个shell文件test.sh可执行权限，拥有者可读、写、执行，群组账号和其他人可读、执行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0ee921a359808564\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchmod 755 test </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0ee921a359808564-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0ee921a359808564-1\"><span class=\"crayon-i\">chmod</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">755</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">test</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<blockquote><p>备注：有没有发现数字法更简单啊！！！</p></blockquote>\n<h2 id=\"文件和目录权限差异\">文件和目录权限差异</h2>\n<p>文档权限对于文件和目录有巨大的差异</p>\n<h3 id=\"文件\">文件</h3>\n<p>针对的是该文件内容</p>\n<ul>\n<li>readable 可读取该文件的实际内容</li>\n<li>writable 可以编辑、新增或者是修改该文件的内容</li>\n<li>executable 有可以被系统执行的权限</li>\n</ul>\n<blockquote><p>备注：具有w权限不可以删除文件，删除文件是目录权限控制的范围！！！记住<strong>文件权限针对是文件内容</strong>。</p></blockquote>\n<h3 id=\"目录\">目录</h3>\n<p>针对的是该目录下的文件对象</p>\n<ul>\n<li>readable 具有读取目录结构清单的权限，即可以通过<strong>ls</strong>命令，查询该目录清单。</li>\n<li>writable 具有变动该目录结构清单的权限，即可以创建、迁移、删除、更名该目录下的文件。</li>\n<li>executable 具备进入该目录的权限，即可以通过<strong>cd</strong>命令，转到工作目录。</li>\n</ul>\n<blockquote><p>备注：从上面可以得出，开放目录给任何人浏览时，至少需要赋予<code>r</code>或<code>x</code>权限。读取目录文件内容，至少需要目录权限<code>x</code>和文件权限<code>r</code>。</p></blockquote>\n<h2 id=\"总结\">总结</h2>\n<p><code>Linux</code>的每个文档可以分别针对三种身份赋予<code>rwx</code>权限；<code>chgrp</code>命令变更文件群组，<code>chmod</code>命令变更文件权限，<code>chown</code>变更文件拥有者；那么以后记得使用<strong>文档权限来保护数据的安全性哦</strong>。</p>\n<p><strong>如果你觉得本篇文章对您有帮助的话，感谢您的【推荐】</strong>。<br>\n<strong>如果你对 linux 感兴趣的话可以关注我，我会定期的在博客分享我的学习心得</strong>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114031\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114031votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114031\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"},{"title": "九年程序人生", "url": "http://blog.jobbole.com/114124/", "url_object_id": "c7bbdb3c6c79c01bffbefa062036a56f", "create_date": "2018/06/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/03/2b70b826c50f6f6721d816371ec7fd6a.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 1, "tags": "职场,工作", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/flame7/p/9110579.html\">flame7</a>   </div><p>时间一晃而过，大学毕业转眼间已经工作9年了，总结一下自己这些年来感受。</p>\n<h2><strong>与程序打交道的人生，是简单的人生</strong></h2>\n<p>一次做规划局的项目，规划局的职员很是钦佩地说：“你们真了不起，在电脑上敲敲键盘就能做出软件来。”，</p>\n<p>规划局领导说：“跟电脑打交道是最简单的，难的是跟人打交道。”。</p>\n<p>领导的话很有深意，一语道破了本质，做程序的人，是比较简单的。</p>\n<h2><strong> 不懂什么叫编程</strong></h2>\n<p>大学本科，读“计算机科学与技术专业”（相信看这篇博客的人多半也是学这个专业的 ^_*），课程重理论而轻实践。</p>\n<p>最初学习C语言，对于编程没有任何概念，我清楚的记得，一次在课堂上问老师：“计算机输入法，可视化操作界面已经很完善了，为什么要用C语言中 Print() 函数输出一段字符呢？而且我们学习使用Console控制台的黑白屏输入输出，也不像是平时使用的软件啊？”。</p>\n<p>老师听后也是一脸的懵逼，说：“你好好学，慢慢就明白了”。</p>\n<p>你不懂的，老师也没法回答你，只有靠自己慢慢地摸索，慢慢去领悟。</p>\n<h2><strong>Java还是C#，平台选择的爱恨情仇</strong></h2>\n<p>初学Java，这是我接触的第一个最具有实用意义的编程语言（可以做网站，做软件，虽然C语言，C++也可以开发应用软件，但毕竟使用的人较少，对于初学者，找到一个合适的教程都困难）。当时的学习，基本是自学，上网下载视频教程，一集一集地看，不懂的概念上网查，去图书馆借阅相关书籍资料，什么JSP标签，Servlet，JDBC，到Struts MVC，Hibernate，Spring，设计模式，半年时间，算是初步入门，尽管对知识还是一知半解，但还是成功用Java做了毕业设计，做过几个小程序。</p>\n<p>工作之后，开始使用C#，算是与.NET平台结缘，一行一行地敲代码，一个接一个的做项目，一版又一版的升级软件，一晃9年了。从最初的ASP.NET WebForm，ADO.NET，到ASP.NET MVC，WebAPI，EntityFramework，面向服务架构的WCF，以及最新的跨平台.NET Core，微软为软件开发人员，提供了编程最大的便利性。</p>\n<p>仅从开发语言本身角度讲，C#并不比Java差，并且很多细微的地方，C#比Java做的要好，比如，C#中的get，set属性访问，要比Java的字段访问方便很多，相同逻辑代码运行效率方面，C#的MSIL比Java的字节码允许效率还要稍微高一些，但是无奈，.NET平台发展始终不及Java平台。诚然，平台的发展不能仅从开发语言本身考虑，平台运行环境，平台参与人员整体水平，使用成本等，更是起着决定性作用，.NET平台在互联网大潮中，逐渐被边缘化，免费的Java平台，被开源社区拥抱，成为互联网项目开发平台的中流砥柱。微软似乎意识到问题所在，逐步加入开源队伍，并提供了跨平台方案.Net Core，但并没有明显起色，.NET平台开发人员心中不免有一丝悲观情绪，.Net平台开发人员似乎比Java开发人员始终矮一头的感觉。</p>\n<h2><strong> 前端编程，JavaScript从无知到觉醒</strong></h2>\n<p>做Web开发，离不开HTML，CSS，JavaScript，尽管日常工作以后台开发为主，但接触的多了，慢慢地理解深入，从只会使用JS写函数，发展到使用JS面向对象的功能，理解了JS中闭包的概念（好烧脑，用离散数学中的概念来表示函数集合，让没学过集合概念的同学情何以堪）。明白了JS的面向对象编程，通过JS自定义前端控件，数据与逻辑代码分离，达到优雅地实现前端逻辑。学习的过程是曲折的，有时候一个概念始终理解不了，但一旦明白过来，会有一种眼前一亮，豁然开朗的感觉。起初一直不明白，为什么JQuery中的“$”这么牛，一个“$”符号能操作一切，读过JQuery源码之后才明白，这个“$”原来是jQuery在Window中定义的的一个变量，同时也是jQuery这个函数的别名，每次调用$(…)时，其实间接地创建了一个JQuery的示例。当然，这种操作得益于JS是一直动态语言，可以给对象任意添加属性和方法（相比较Java和C#是不能这样操作的）。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fsb1rtwtcfj20hu05n74a.jpg\"></p>\n<h2>技术之路要不断学习，路漫漫其修远</h2>\n<p>技术更新迭代的速度，远超想象，往往是刚学会一个新技术，另一个更新的技术又变的火热，似乎新技术的产生，也在遵循一个摩尔定律。追赶技术的脚步，就如同夸父追日一般，你一直在追赶，但它一直在你前面。好在，每一个新技术，新架构的产生，都是在为更简单、更高效的解决现有的问题，所以，新的技术，虽然增加了学习的负担，但是新技术的应用，能够解决现实的问题，是效率的提升。从这个角度讲，学习是值得的。通常来说，没有谁天生就会做什么，只要肯学习，别人能做到的，你也能做到。</p>\n<p>React火热的时候，学习React，了解了这种基于模板的开发方式，见识了这种类似于MVC，实现数据与业务逻辑分离的编程方式在JS中的实际应用，对于这种仅需要一个render()函数的超简洁的框架赞叹不已。</p>\n<p>Facebook搞出了React，国人也不示弱，于是诞生了Vue，相对来说更简洁，使用更方便。</p>\n<p>React发展出了React Native，圈子里更是为止振奋，为火热的移动端开发又添了一把柴，让移动端开发，在Android和IOS原生开发之外，又多了一种全新的选择。</p>\n<p>我用3天时间，学会了开发微信小程序，完成了原有Web功能向小程序的移植。</p>\n<p>Node.JS火热的时候，我用了一周的业余时间，学习NodeJS编程，配合MongoDB，搭建了简单的日志系统。</p>\n<p>说起来有点吹牛的意思，但却是事实。</p>\n<p>一方面，不管是React，微信小程序，Node.JS，本质上都是JavaScript，Html，CSS的组合使用，相似度很高，只是各自有各自特点的规范特色而已，学习难度是逐渐降低的。</p>\n<p>另一方面，我相信大多数人也有感受，当工作经验，认知水平达到一定积累之后，学习其实是一件水到渠成的事情。</p>\n<h2>总结</h2>\n<p>有一次跟朋友聊天，朋友说，“感觉自己越学习，越感觉到不懂的方面更多了”。</p>\n<p>我笑笑，表示同意他的观点，这是一个叫做“知识边界”的问题，每个人的知识，就如同是一个圆，圆内是你已经了解的知识，圆之外就是还不懂的知识，一个人掌握的知识越多，这个圆也就越大，而圆越大，圆周所接触的那些未知领域也就越多。如果一个人说自己没有什么不懂的，那只能说明他知识面太小。如此，当我们意识到自己有很多不懂的东西的时候，也不用焦虑，因为我们的知识在扩展，保持一颗开放，学习的心，这是人生路上所必须的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114124\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114124votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114124\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/eafe21f5bcf6519b0ad6dfff3f114ffef96d6a04.jpg"},{"title": "RabbitMQ 发布订阅实战：实现延时重试队列", "url": "http://blog.jobbole.com/113984/", "url_object_id": "a1c4868d9e1eb29137006234c75e2c5e", "create_date": "2018/06/15", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/a099bdc26462540c4ca8ac310b8a24b8.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "开发,RabbitMQ", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/mylxsw\">管宜尧</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>RabbitMQ是一款使用Erlang开发的开源消息队列。本文假设读者对RabbitMQ是什么已经有了基本的了解，如果你还不知道它是什么以及可以用来做什么，建议先从官网的 <a href=\"http://www.rabbitmq.com/getstarted.html\" rel=\"nofollow noreferrer\">RabbitMQ Tutorials</a> 入门教程开始学习。</p>\n<p>本文将会讲解如何使用RabbitMQ实现延时重试和失败消息队列，实现可靠的消息消费，消费失败后，自动延时将消息重新投递，当达到一定的重试次数后，将消息投递到失败消息队列，等待人工介入处理。在这里我会带领大家一步一步的实现一个带有失败重试功能的发布订阅组件，使用该组件后可以非常简单的实现消息的发布订阅，在进行业务开发的时候，业务开发人员可以将主要精力放在业务逻辑实现上，而不需要花费时间去理解RabbitMQ的一些复杂概念。</p>\n<h2>概要</h2>\n<p>我们将会实现如下功能</p>\n<ul>\n<li>结合RabbitMQ的Topic模式和Work Queue模式实现生产方产生消息，消费方按需订阅，消息投递到消费方的队列之后，多个worker同时对消息进行消费</li>\n<li>结合RabbitMQ的 <a href=\"http://www.rabbitmq.com/ttl.html\" rel=\"nofollow noreferrer\">Message TTL</a> 和 <a href=\"http://www.rabbitmq.com/dlx.html\" rel=\"nofollow noreferrer\">Dead Letter Exchange</a> 实现消息的延时重试功能</li>\n<li>消息达到最大重试次数之后，将其投递到失败队列，等待人工介入处理bug后，重新将其加入队列消费</li>\n</ul>\n<p>具体流程见下图</p>\n<p><img title=\"xxx\" src=\"https://segmentfault.com/img/remote/1460000014847793?w=809&amp;h=926\" alt=\"xxx\"></p>\n<ol>\n<li>生产者发布消息到主Exchange</li>\n<li>主Exchange根据Routing Key将消息分发到对应的消息队列</li>\n<li>多个消费者的worker进程同时对队列中的消息进行消费，因此它们之间采用“竞争”的方式来争取消息的消费</li>\n<li>消息消费后，不管成功失败，都要返回ACK消费确认消息给队列，避免消息消费确认机制导致重复投递，同时，如果消息处理成功，则结束流程，否则进入重试阶段</li>\n<li>如果重试次数小于设定的最大重试次数（3次），则将消息重新投递到Retry Exchange的重试队列</li>\n<li>重试队列不需要消费者直接订阅，它会等待消息的有效时间过期之后，重新将消息投递给Dead Letter Exchange，我们在这里将其设置为主Exchange，实现延时后重新投递消息，这样消费者就可以重新消费消息</li>\n<li>如果三次以上都是消费失败，则认为消息无法被处理，直接将消息投递给Failed Exchange的Failed Queue，这时候应用可以触发报警机制，以通知相关责任人处理</li>\n<li>等待人工介入处理（解决bug）之后，重新将消息投递到主Exchange，这样就可以重新消费了</li>\n</ol>\n<h2>技术实现</h2>\n<p><a href=\"https://en.wikiquote.org/wiki/Linus_Torvalds\" rel=\"nofollow noreferrer\">Linus Torvalds</a> 曾经说过</p>\n<blockquote><p>Talk is cheap. Show me the code</p></blockquote>\n<p>我分别用Java和PHP实现了本文所讲述的方案，读者可以通过参考代码以及本文中的基本步骤来更好的理解</p>\n<ul>\n<li><a href=\"https://github.com/mylxsw/rabbitmq-pubsub-php\" rel=\"nofollow noreferrer\">rabbitmq-pubsub-php</a></li>\n<li><a href=\"https://github.com/mylxsw/rabbitmq-pubsub-java\" rel=\"nofollow noreferrer\">rabbitmq-pubsub-java</a></li>\n</ul>\n<h3>创建Exchange</h3>\n<p>为了实现消息的延时重试和失败存储，我们需要创建三个Exchange来处理消息。</p>\n<ul>\n<li><strong>master</strong> 主Exchange，发布消息时发布到该Exchange</li>\n<li><strong>master.retry</strong> 重试Exchange，消息处理失败时（3次以内），将消息重新投递给该Exchange</li>\n<li><strong>master.failed</strong> 失败Exchange，超过三次重试失败后，消息投递到该Exchange</li>\n</ul>\n<p>所有的Exchange声明(declare)必须使用以下参数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>exchange</td>\n<td>–</td>\n<td>Exchange名称</td>\n</tr>\n<tr>\n<td>type</td>\n<td>topic</td>\n<td>Exchange 类型</td>\n</tr>\n<tr>\n<td>passive</td>\n<td>false</td>\n<td>如果Exchange已经存在，则返回成功，不存在则创建</td>\n</tr>\n<tr>\n<td>durable</td>\n<td>true</td>\n<td>持久化存储Exchange，这里仅仅是Exchange本身持久化，消息和队列需要单独指定其持久化</td>\n</tr>\n<tr>\n<td>no-wait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n</tbody>\n</table>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc71f1925714173\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 声明Exchange：主体，失败，重试\r\nchannel.exchangeDeclare(\"master\", \"topic\", true);\r\nchannel.exchangeDeclare(\"master.retry\", \"topic\", true);\r\nchannel.exchangeDeclare(\"master.failed\", \"topic\", true);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc71f1925714173-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc71f1925714173-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc71f1925714173-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc71f1925714173-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc71f1925714173-1\"><span class=\"crayon-c\">// 声明Exchange：主体，失败，重试</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc71f1925714173-2\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exchangeDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc71f1925714173-3\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exchangeDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc71f1925714173-4\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exchangeDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"topic\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc71fa831822719\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 普通交换机\r\n$this-&gt;channel-&gt;exchange_declare('master', 'topic', false, true, false);\r\n// 重试交换机\r\n$this-&gt;channel-&gt;exchange_declare('master.retry', 'topic', false, true, false);\r\n// 失败交换机\r\n$this-&gt;channel-&gt;exchange_declare('master.failed', 'topic', false, true, false);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc71fa831822719-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc71fa831822719-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc71fa831822719-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc71fa831822719-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc71fa831822719-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc71fa831822719-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc71fa831822719-1\"><span class=\"crayon-c\">// 普通交换机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc71fa831822719-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">exchange_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'topic'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc71fa831822719-3\"><span class=\"crayon-c\">// 重试交换机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc71fa831822719-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">exchange_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'master.retry'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'topic'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc71fa831822719-5\"><span class=\"crayon-c\">// 失败交换机</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc71fa831822719-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">exchange_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'master.failed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'topic'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0142 seconds] -->\r\n<p>在RabbitMQ的管理界面中，我们可以看到创建的三个Exchange</p>\n<p><img title=\"-w539\" src=\"https://segmentfault.com/img/remote/1460000014847794\" alt=\"-w539\"></p>\n<h3>消息发布</h3>\n<p>消息发布时，使用<code>basic_publish</code>方法，参数如下</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>message</td>\n<td>–</td>\n<td>发布的消息对象</td>\n</tr>\n<tr>\n<td>exchange</td>\n<td><strong>master</strong></td>\n<td>消息发布到的Exchange</td>\n</tr>\n<tr>\n<td>routing-key</td>\n<td>–</td>\n<td>路由KEY，用于标识消息类型</td>\n</tr>\n<tr>\n<td>mandatory</td>\n<td>false</td>\n<td>是否强制路由，指定了该选项后，如果没有订阅该消息，则会返回路由不可达错误</td>\n</tr>\n<tr>\n<td>immediate</td>\n<td>false</td>\n<td>指定了当消息无法直接路由给消费者时如何处理</td>\n</tr>\n</tbody>\n</table>\n<p>发布消息时，对于<code>message</code>对象，其内容建议使用<strong>json编码后的字符串</strong>，同时消息需要标识以下属性</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc71fe948302852\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n'delivery_mode'=&gt; 2 // 1为非持久化，2为持久化</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc71fe948302852-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc71fe948302852-1\"><span class=\"crayon-s\">'delivery_mode'</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 1为非持久化，2为持久化</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7202492288468\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchannel.basicPublish(\r\n    \"master\", \r\n    routingKey, \r\n    MessageProperties.PERSISTENT_BASIC, // delivery_mode\r\n    message.getBytes()\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7202492288468-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7202492288468-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7202492288468-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7202492288468-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7202492288468-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7202492288468-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7202492288468-1\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7202492288468-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"master\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7202492288468-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7202492288468-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MessageProperties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PERSISTENT_BASIC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// delivery_mode</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7202492288468-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getBytes</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7202492288468-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7205273455421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$msg = new AMQPMessage($message-&gt;serialize(), [\r\n    'delivery_mode' =&gt; AMQPMessage::DELIVERY_MODE_PERSISTENT,\r\n]);\r\n\r\n$this-&gt;channel-&gt;basic_publish($msg, 'master', $routingKey);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7205273455421-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7205273455421-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7205273455421-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7205273455421-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7205273455421-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7205273455421-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AMQPMessage</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">message</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">serialize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7205273455421-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'delivery_mode'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AMQPMessage</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">DELIVERY_MODE_PERSISTENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7205273455421-3\"><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7205273455421-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7205273455421-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p>\n<h3>消息订阅</h3>\n<p>消息订阅的实现相对复杂一些，需要完成队列的声明以及队列和Exchange的绑定。</p>\n<h4>Declare Queue</h4>\n<p>对于每一个订阅消息的服务，都必须创建一个该服务对应的队列，将该队列绑定到关注的路由规则，这样之后，消息生产者将消息投递给Exchange之后，就会按照路由规则将消息分发到对应的队列供消费者消费了。</p>\n<p>消费服务需要declare三个队列</p>\n<ul>\n<li><code>[queue_name]</code> 队列名称，格式符合 <code>[服务名称]@订阅服务标识</code></li>\n<li><code>[queue_name]@retry</code> 重试队列</li>\n<li><code>[queue_name]@failed</code> 失败队列</li>\n</ul>\n<blockquote><p><code>订阅服务标识</code>是客户端自己对订阅的分类标识符，比如用户中心服务（服务名称ucenter），包含两个订阅：user和enterprise，这里两个订阅的队列名称就为 <code>ucenter@user</code>和<code>ucenter@enterprise</code>，其对应的重试队列为 <code>ucenter@user@retry</code>和<code>ucenter@enterprise@retry</code>。</p></blockquote>\n<p>Declare队列时，参数规定规则如下</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>queue</td>\n<td>–</td>\n<td>队列名称</td>\n</tr>\n<tr>\n<td>passive</td>\n<td>false</td>\n<td>队列不存在则创建，存在则直接成功</td>\n</tr>\n<tr>\n<td>durable</td>\n<td>true</td>\n<td>队列持久化</td>\n</tr>\n<tr>\n<td>exclusive</td>\n<td>false</td>\n<td>排他，指定该选项为true则队列只对当前连接有效，连接断开后自动删除</td>\n</tr>\n<tr>\n<td>no-wait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n<tr>\n<td>auto-delete</td>\n<td>false</td>\n<td>当不再使用时，是否自动删除</td>\n</tr>\n</tbody>\n</table>\n<p>对于<code>@retry</code>重试队列，需要指定额外参数</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc720a358411950\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n'x-dead-letter-exchange' =&gt; 'master'\r\n'x-message-ttl'          =&gt; 30 * 1000 // 重试时间设置为30s</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720a358411950-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720a358411950-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc720a358411950-1\"><span class=\"crayon-s\">'x-dead-letter-exchange'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720a358411950-2\"><span class=\"crayon-s\">'x-message-ttl'</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 重试时间设置为30s</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<blockquote><p>这里的两个header字段的含义是，在队列中延迟30s后，将该消息重新投递到<code>x-dead-letter-exchange</code>对应的Exchange中</p></blockquote>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc720d480628942\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 声明监听队列\r\nchannel.queueDeclare(\r\n    queueName, // 队列名称\r\n    true,      // durable\r\n    false,     // exclusive\r\n    false,     // autoDelete\r\n    null       // arguments\r\n);\r\nchannel.queueDeclare(queueName + \"@failed\", true, false, false, null);\r\n\r\nMap arguments = new HashMap();\r\narguments.put(\"x-dead-letter-exchange\", exchangeName());\r\narguments.put(\"x-message-ttl\", 30 * 1000);\r\nchannel.queueDeclare(queueName + \"@retry\", true, false, false, arguments);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc720d480628942-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc720d480628942-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-1\"><span class=\"crayon-c\">// 声明监听队列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-2\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueDeclare</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 队列名称</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">      </span><span class=\"crayon-c\">// durable</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// exclusive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\">// autoDelete</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\">       </span><span class=\"crayon-c\">// arguments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-8\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-9\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-11\"><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-12\"><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-dead-letter-exchange\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exchangeName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc720d480628942-13\"><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-message-ttl\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc720d480628942-14\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueDeclare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7211333333154\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$this-&gt;channel-&gt;queue_declare($queueName, false, true, false, false, false);\r\n$this-&gt;channel-&gt;queue_declare($failedQueueName, false, true, false, false, false);\r\n$this-&gt;channel-&gt;queue_declare(\r\n    $retryQueueName, // 队列名称\r\n    false,           // passive\r\n    true,            // durable\r\n    false,           // exclusive\r\n    false,           // auto_delete\r\n    false,           // nowait\r\n    new AMQPTable([\r\n        'x-dead-letter-exchange' =&gt; 'master',\r\n        'x-message-ttl'          =&gt; 30 * 1000,\r\n    ])\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7211333333154-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7211333333154-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_declare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">failedQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_declare</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retryQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 队列名称</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// passive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// durable</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// exclusive</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// auto_delete</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\">// nowait</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AMQPTable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'x-dead-letter-exchange'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'x-message-ttl'</span><span class=\"crayon-h\">          </span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7211333333154-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7211333333154-14\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0097 seconds] -->\r\n<p>在RabbitMQ的管理界面中，Queues部分可以看到我们创建的三个队列</p>\n<p><img title=\"\" src=\"https://segmentfault.com/img/remote/1460000014847795?w=1626&amp;h=284\" alt=\"\"></p>\n<p>查看队列的详细信息，我们可以看到 <strong>queueName@retry</strong> 队列与其它两个队列的不同</p>\n<p><img title=\"-w486\" src=\"https://segmentfault.com/img/remote/1460000014847796\" alt=\"-w486\"></p>\n<h4>Bind Exchange &amp; Queue</h4>\n<p>创建完队列之后，需要将队列与Exchange绑定（<code>bind</code>），不同队列需要绑定到之前创建的对应的Exchange上面</p>\n<table>\n<thead>\n<tr>\n<th>Queue</th>\n<th>Exchange</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>[queue_name]</td>\n<td>master</td>\n</tr>\n<tr>\n<td>[queue_name]@retry</td>\n<td>master.retry</td>\n</tr>\n<tr>\n<td>[queue_name]@failed</td>\n<td>master.failed</td>\n</tr>\n</tbody>\n</table>\n<p>绑定时，需要提供订阅的路由KEY，该路由KEY与消息发布时的路由KEY对应，区别是这里可以使用通配符同时订阅多种类型的消息。</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>queue</td>\n<td>–</td>\n<td>绑定的队列</td>\n</tr>\n<tr>\n<td>exchange</td>\n<td>–</td>\n<td>绑定的Exchange</td>\n</tr>\n<tr>\n<td>routing-key</td>\n<td>–</td>\n<td>订阅的消息路由规则</td>\n</tr>\n<tr>\n<td>no-wait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n</tbody>\n</table>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7215033287807\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 绑定监听队列到Exchange\r\nchannel.queueBind(queueName, \"master\", routingKey);\r\nchannel.queueBind(queueName + \"@failed\", \"master.failed\", routingKey);\r\nchannel.queueBind(queueName + \"@retry\", \"master.retry\", routingKey);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7215033287807-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7215033287807-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7215033287807-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7215033287807-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7215033287807-1\"><span class=\"crayon-c\">// 绑定监听队列到Exchange</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7215033287807-2\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueBind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7215033287807-3\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueBind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master.failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7215033287807-4\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">queueBind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"@retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"master.retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7218848684711\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$this-&gt;channel-&gt;queue_bind($queueName, 'master', $routingKey);\r\n$this-&gt;channel-&gt;queue_bind($retryQueueName, 'master.retry', $routingKey);\r\n$this-&gt;channel-&gt;queue_bind($failedQueueName, 'master.failed', $routingKey);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7218848684711-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7218848684711-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7218848684711-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7218848684711-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7218848684711-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retryQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.retry'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7218848684711-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">queue_bind</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">failedQueueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.failed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在RabbitMQ的管理界面中，我们可以看到该队列与Exchange和routing-key的绑定关系</p>\n<p><img title=\"-w361\" src=\"https://segmentfault.com/img/remote/1460000014847797\" alt=\"-w361\"></p>\n<p><img title=\"-w405\" src=\"https://segmentfault.com/img/remote/1460000014847798\" alt=\"-w405\"></p>\n<p><img title=\"-w399\" src=\"https://segmentfault.com/img/remote/1460000014847799\" alt=\"-w399\"></p>\n<h4>消息消费实现</h4>\n<p>使用 <code>basic_consume</code> 对消息进行消费的时候，需要注意下面参数</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>queue</td>\n<td>–</td>\n<td>消费的队列名称</td>\n</tr>\n<tr>\n<td>consumer-tag</td>\n<td>–</td>\n<td>消费者标识，留空即可</td>\n</tr>\n<tr>\n<td>no_local</td>\n<td>false</td>\n<td>如果设置了该字段，服务器将不会发布消息到 发布它的客户端</td>\n</tr>\n<tr>\n<td>no_ack</td>\n<td>false</td>\n<td>需要消费确认应答</td>\n</tr>\n<tr>\n<td>exclusive</td>\n<td>false</td>\n<td>排他访问，设置后只允许当前消费者访问该队列</td>\n</tr>\n<tr>\n<td>nowait</td>\n<td>false</td>\n<td>该方法需要应答确认</td>\n</tr>\n</tbody>\n</table>\n<p>消费端在消费消息时，需要从消息中获取消息被消费的次数，以此判断该消息处理失败时重试还是发送到失败队列。</p>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc721d531402895\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprotected Long getRetryCount(AMQP.BasicProperties properties) {\r\n    Long retryCount = 0L;\r\n    try {\r\n        Map headers = properties.getHeaders();\r\n        if (headers != null) {\r\n            if (headers.containsKey(\"x-death\")) {\r\n                List\r\n\r\n\r\n\r\n&lt;map&gt;&gt; deaths = (List\r\n\r\n\r\n\r\n&lt;map&gt;&gt;) headers.get(\"x-death\");\r\n                if (deaths.size() &gt; 0) {\r\n                    Map death = deaths.get(0);\r\n                    retryCount = (Long) death.get(\"count\");\r\n                }\r\n            }\r\n        }\r\n    } catch (Exception e) {}\r\n\r\n    return retryCount;\r\n}&lt;/map&gt;\r\n \r\n\r\n\r\n&lt;/map&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc721d531402895-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc721d531402895-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-1\"><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRetryCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">AMQP</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">BasicProperties </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0L</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getHeaders</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">containsKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-death\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">List</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-11\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deaths</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">List</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-15\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"x-death\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">deaths</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-17\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">death</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deaths</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-18\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">death</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"count\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-19\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-25\"><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-26\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc721d531402895-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc721d531402895-29\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">map</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0061 seconds] -->\r\n<p> </p>\n<p> </p>\n<p> </p>\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7220136717856\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprotected function getRetryCount(AMQPMessage $msg): int\r\n{\r\n    $retry = 0;\r\n    if ($msg-&gt;has('application_headers')) {\r\n        $headers = $msg-&gt;get('application_headers')-&gt;getNativeData();\r\n        if (isset($headers['x-death'][0]['count'])) {\r\n            $retry = $headers['x-death'][0]['count'];\r\n        }\r\n    }\r\n\r\n    return (int)$retry;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7220136717856-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7220136717856-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7220136717856-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7220136717856-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7220136717856-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7220136717856-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7220136717856-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7220136717856-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7220136717856-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7220136717856-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7220136717856-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7220136717856-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7220136717856-1\"><span class=\"crayon-m\">protected</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRetryCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">AMQPMessage</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7220136717856-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7220136717856-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retry</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7220136717856-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">has</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'application_headers'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7220136717856-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'application_headers'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">getNativeData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7220136717856-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">isset</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'x-death'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'count'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7220136717856-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retry</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'x-death'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'count'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7220136717856-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7220136717856-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7220136717856-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7220136717856-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">retry</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7220136717856-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0303 seconds] -->\r\n<p>消息消费完成后，需要发送消费确认消息给服务端，使用<code>basic_ack</code>方法</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7224547125781\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nack(delivery-tag=消息的delivery-tag标识)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7224547125781-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7224547125781-1\"><span class=\"crayon-e\">ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tag</span><span class=\"crayon-o\">=</span>消息的<span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">tag</span>标识<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7227034103050\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 消息消费处理\r\nConsumer consumer = new DefaultConsumer(channel) {\r\n    @ Override\r\n    public void handleDelivery(String consumerTag, Envelope envelope,\r\n                               AMQP.BasicProperties properties, byte[] body) throws IOException {\r\n        ...\r\n        // 注意，由于使用了basicConsume的autoAck特性，因此这里就不需要手动执行\r\n        // channel.basicAck(envelope.getDeliveryTag(), false);\r\n    }\r\n};\r\n// 执行消息消费处理\r\nchannel.basicConsume(\r\n    queueName, \r\n    true, // autoAck\r\n    consumer\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7227034103050-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7227034103050-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-1\"><span class=\"crayon-c\">// 消息消费处理</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-2\"><span class=\"crayon-e\">Consumer </span><span class=\"crayon-v\">consumer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DefaultConsumer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleDelivery</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">consumerTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Envelope </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-5\"><span class=\"crayon-h\">                               </span><span class=\"crayon-v\">AMQP</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">BasicProperties </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">byte</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 注意，由于使用了basicConsume的autoAck特性，因此这里就不需要手动执行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// channel.basicAck(envelope.getDeliveryTag(), false);</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-10\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-11\"><span class=\"crayon-c\">// 执行消息消费处理</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-12\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicConsume</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// autoAck</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7227034103050-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">consumer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7227034103050-16\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc722a276358538\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$this-&gt;channel-&gt;basic_consume(\r\n    $queueName,\r\n    '',    // customer_tag\r\n    false, // no_local\r\n    false, // no_ack\r\n    false, // exclusive\r\n    false, // nowait\r\n    function (AMQPMessage $msg) use ($queueName, $routingKey, $callback) {\r\n        ...\r\n        $msg-&gt;delivery_info['channel']-&gt;basic_ack($msg-&gt;delivery_info['delivery_tag']);\r\n    }\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722a276358538-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722a276358538-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722a276358538-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722a276358538-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722a276358538-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722a276358538-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722a276358538-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722a276358538-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722a276358538-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722a276358538-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722a276358538-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722a276358538-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc722a276358538-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_consume</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722a276358538-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc722a276358538-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// customer_tag</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722a276358538-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// no_local</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc722a276358538-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// no_ack</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722a276358538-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// exclusive</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc722a276358538-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// nowait</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722a276358538-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">AMQPMessage</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">queueName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">callback</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc722a276358538-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722a276358538-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">delivery_info</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'channel'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">delivery_info</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'delivery_tag'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc722a276358538-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722a276358538-12\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0204 seconds] -->\r\n<p>如果消息处理中出现异常，应该将该消息重新投递到重试Exchange，等待下次重试</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc722e369358475\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbasic_publish(msg, 'master.retry', routing-key)\r\nack(delivery-tag) // 不要忘记了应答消费成功消息</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc722e369358475-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc722e369358475-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc722e369358475-1\"><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.retry'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc722e369358475-2\"><span class=\"crayon-e\">ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 不要忘记了应答消费成功消息</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如果判断重试次数大于3次，仍然处理失败，则应该讲消息投递到失败Exchange，等待人工处理</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7231090581847\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbasic_publish(msg, 'master.failed', routing-key)\r\nack(delivery-tag) // 不要忘记了应答消费成功消息</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7231090581847-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7231090581847-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7231090581847-1\"><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master.failed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routing</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7231090581847-2\"><span class=\"crayon-e\">ack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delivery</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tag</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 不要忘记了应答消费成功消息</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<blockquote><p>一定不要忘记ack消息，因为重试、失败都是通过将消息重新投递到重试、失败Exchange来实现的，如果忘记ack，则该消息在超时或者连接断开后，会重新被重新投递给消费者，如果消费者依旧无法处理，则会造成死循环。</p></blockquote>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7234736375708\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntry {\r\n    String message = new String(body, \"UTF-8\");\r\n    // 消息处理函数\r\n    handler.handle(message, envelope.getRoutingKey());\r\n\r\n} catch (Exception e) {\r\n    long retryCount = getRetryCount(properties);\r\n    if (retryCount &gt; 3) {\r\n        // 重试次数大于3次，则自动加入到失败队列\r\n        channel.basicPublish(\"master.failed\", envelope.getRoutingKey(), MessageProperties.PERSISTENT_BASIC, body);\r\n    } else {\r\n        // 重试次数小于3，则加入到重试队列，30s后再重试\r\n        channel.basicPublish(\"master.retry\", envelope.getRoutingKey(), properties, body);\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7234736375708-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7234736375708-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-1\"><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"UTF-8\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 消息处理函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">handle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getRetryCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">retryCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 重试次数大于3次，则自动加入到失败队列</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.failed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MessageProperties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PERSISTENT_BASIC</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 重试次数小于3，则加入到重试队列，30s后再重试</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"master.retry\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">properties</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7234736375708-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7234736375708-15\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p></p>\n<h4>失败任务重试</h4>\n<p>如果任务重试三次仍未成功，则会被投递到失败队列，这时候需要人工处理程序异常，处理完毕后，需要将消息重新投递到队列进行处理，这里唯一需要做的就是从失败队列订阅消息，然后获取到消息后，清空其<code>application_headers</code>头信息，然后重新投递到<code>master</code>这个Exchange即可。</p>\n<p>Java代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc7238817570427\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchannel.basicPublish(\r\n    'master', \r\n    envelope.getRoutingKey(),\r\n    MessageProperties.PERSISTENT_BASIC,\r\n    body\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7238817570427-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7238817570427-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7238817570427-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7238817570427-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc7238817570427-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc7238817570427-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc7238817570427-1\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">basicPublish</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7238817570427-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7238817570427-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">envelope</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRoutingKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7238817570427-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MessageProperties</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PERSISTENT_BASIC</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc7238817570427-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">body</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc7238817570427-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>PHP代码</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc723b054835345\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$msg-&gt;set('application_headers', new AMQPTable([]));\r\n$this-&gt;channel-&gt;basic_publish(\r\n    $msg,\r\n    'master',\r\n    $msg-&gt;get('routing_key')\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723b054835345-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723b054835345-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723b054835345-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723b054835345-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723b054835345-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723b054835345-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc723b054835345-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'application_headers'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">AMQPTable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723b054835345-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-r\">this</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">channel</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">basic_publish</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723b054835345-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723b054835345-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723b054835345-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">msg</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'routing_key'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723b054835345-6\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0137 seconds] -->\r\n<p></p>\n<h3>怎么使用</h3>\n<p>队列和Exchange以及发布订阅的关系我们就说完了，那么使用起来是什么效果呢？这里我们以Java代码为例</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0bc723f802459617\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 发布消息\r\nPublisher publisher = new Publisher(factory.newConnection(), 'master');\r\npublisher.publish(\"{\\\"id\\\":121, \\\"name\\\":\\\"guanyiyao\\\"}\", \"user.create\");\r\n\r\n// 订阅消息\r\nnew Subscriber(factory.newConnection(), Main.EXCHANGE_NAME)\r\n    .init(\"user-monitor\", \"user.*\")\r\n    .subscribe((message, routingKey) -&gt; {\r\n        // TODO 业务逻辑\r\n        System.out.printf(\"     message consumed: %s\\n\", routingKey, message);\r\n    }\r\n);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723f802459617-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723f802459617-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723f802459617-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723f802459617-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723f802459617-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723f802459617-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723f802459617-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723f802459617-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723f802459617-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723f802459617-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0bc723f802459617-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0bc723f802459617-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0bc723f802459617-1\"><span class=\"crayon-c\">// 发布消息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723f802459617-2\"><span class=\"crayon-e\">Publisher </span><span class=\"crayon-v\">publisher</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Publisher</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'master'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723f802459617-3\"><span class=\"crayon-v\">publisher</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">publish</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"{\\\"id\\\":121, \\\"name\\\":\\\"guanyiyao\\\"}\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"user.create\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723f802459617-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723f802459617-5\"><span class=\"crayon-c\">// 订阅消息</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723f802459617-6\"><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Subscriber</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">factory</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newConnection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Main</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">EXCHANGE_NAME</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723f802459617-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">init</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user-monitor\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"user.*\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723f802459617-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subscribe</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723f802459617-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// TODO 业务逻辑</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723f802459617-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"     message consumed: %s\\n\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">routingKey</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0bc723f802459617-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0bc723f802459617-12\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<h2>总结</h2>\n<p>使用RabbitMQ时，实现延时重试和失败队列的方式并不仅仅局限于本文中描述的方法，如果读者有更好的实现方案，欢迎拍砖，在这里我也只是抛砖引玉了。本文中讲述的方法还有很多优化空间，读者也可以试着去改进其实现方案，比如本文中使用了三个Exchagne，是否只使用一个Exchange也能实现本文中所讲述的功能。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/e8b93699352c7d38fa1d9d15a95ba461.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/2197f30341190c0c9daab43dd2d4ce0c.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113984\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113984votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113984\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/mylxsw\">管宜尧</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/mylxsw\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/01/691a6775e88ff962fd90f229d711d0da.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            PHP程序猿，常用网络ID为mylxsw，具有6年以上PHP研发经验，专注于PHP，Golang以及Linux生态、微服务架构等方向，对技术比较执着，经常会写一些博文分享自己的所学，目前就职于重庆允升科技有限公司。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/mylxsw\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/mylxsw/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/mylxsw/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"我的网站\" target=\"_blank\" href=\"https://aicode.cc\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/code404\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/mylxsw\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/a4ef892dcc22d6d944ae2c4ec2d3472908ff01eb.jpg"},{"title": "如何高效学习", "url": "http://blog.jobbole.com/114034/", "url_object_id": "4138e1905de02770bdfcad265c9040f4", "create_date": "2018/05/22", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/09/cfb878cc788ffd38bb744dd98d83c4fb.jpg"], "praise_nums": "2", "comment_nums": 3, "fav_nums": 7, "tags": "职场,学习", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://zilongshanren.com/blog/2017-05-09-learning-how-to-learn.html\">子龙山人</a>   </div><div id=\"table-of-contents\"></div>\n<p>IT 行业是一个变化非常快的行业，它需要我们持续去学习新的知识和技能。 但是，工作以后，我们经常会发现自己学习的东西很少了，倒不是没有时间去学习， 而是学习的效率太低了。久而久之，就演变成『一年的工作经验，重复用十年』。</p>\n<p>当然，有些人会说自己经常加班，没有时间学习，这只是表象，时间挤挤总是有的。 你想想你为了上王者，浪费了多少时间？为了刷今日头条，又消磨了多少光阴？</p>\n<p>另外，很多人推崇碎片化学习，但是有一些东西碎片化学习效率是很低的，比如数学。</p>\n<p>这篇文章是我学习完 coursera 上面的《Learning How to Learn》MOOC加上我自己多年来的学习经验积累整理而来。</p>\n<p>注：文中可能有一些内容思考没有很深入，另外一些观点可能还需要更多的时间去检验，读者请自行甄别。</p>\n<p> </p>\n<div id=\"outline-container-sec-1\" class=\"outline-2\">\n<h2 id=\"1-一些学习的坏习惯\"><span class=\"section-number-2\">1</span> 一些学习的坏习惯</h2>\n<h3 id=\"text-1\" class=\"outline-text-2\"> <span class=\"section-number-3\">1.1</span> 被动反复阅读</h3>\n<div id=\"outline-container-sec-1-1\" class=\"outline-3\">\n<div id=\"text-1-1\" class=\"outline-text-3\">\n<p>通常编程新手在学习一个新东西的时候，喜欢买一本权威指南之类的书（大神或者同事推荐），比如「C++ Primer」和「Javascript 权威指南」。 而这样一本书，一般页数在700-1400页左右，要完整读完，在不求甚解的基础之上大概要花费好几个月甚至大半年时间。 别说是新手，就算是一个C++编程老手去读「Javascript 权威指南」这样的书也不可能在只阅读一遍之后就能理解。 这时，很多人会选择重复多次阅读。有人会从头开始重复阅读，也有人只挑不理解的章节来阅读。 我以前上大学那会儿就是这么干的，读了好多C++的书籍，其实自己编写的C++代码并不多，也没有做过大型的C++项目。 看了好多书，其实都是一知半解，效率很低。工作以后，这种学习方式更加不可取，因为你没有那么多时间这么干。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-2\" class=\"outline-3\">\n<h3 id=\"12-喜欢在书上划重点\"><span class=\"section-number-3\">1.2</span> 喜欢在书上划重点</h3>\n<div id=\"text-1-2\" class=\"outline-text-3\">\n<p>很多人偏好纸质书，因为在看书的时候手感不错，另外，还可以在书上把喜欢的句子和重点的段落用彩色笔标注出来。 这样做除了给自己造成一种假象「书上的重点我都标出来了，所以我都掌握了」之外，其实并无多大益处。 我现在喜欢在电脑上面看PDF，可以边看边写代码。</p>\n<p>读书的时候，还有一个误区，就是大脑被动地跟着作者的思路在走，如果是一本经典的书，你会每每被作者的真知灼见所震惊， 一种「于我心有戚戚焉」的感觉由然而生。如果作者的书写枯燥乏味，估计看几页你就丢到一边去了。在看书的时候，头脑中要 有自我意识，要感觉自己在跟作者对话，对于作者的观点不能一味全盘吸收，可以看一会儿，停下来，问几个为什么。</p>\n<p>另外，我并不是说划重点是不好的，只是划重点的效率没有想像中的高。划重点有点像收集资料和网页链接，在你收集了一大堆PDF和视频教程之后， 你会得到一种满足，但是这并不代表你真正学到了东西，这个是要非常警惕的。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-3\" class=\"outline-3\">\n<h3 id=\"13-看书中代码示例认为自己就理解了从不动手编程\"><span class=\"section-number-3\">1.3</span> 看书中代码示例认为自己就理解了，从不动手编程</h3>\n<div id=\"text-1-3\" class=\"outline-text-3\">\n<p>这是新手学编程的大忌，不去动手写，不去跟编译器和开发环境做斗争，你永远不知道软件开发过程中的操蛋事情。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-4\" class=\"outline-3\">\n<h3 id=\"14-拖延\"><span class=\"section-number-3\">1.4</span> 拖延</h3>\n<div id=\"text-1-4\" class=\"outline-text-3\">\n<p>这个问题最大，也是影响N多人不去学习的理由。解决的办法只有一个，马上去做！一旦你开始去做了，你的大脑就不会排斥了。 你的计划再完美，你选的书籍再经典，你挑的视频水平再高，如果你不马上去看，去学，去动手实践，那永远也只是停留在空想的阶段。 成功学习的典范就是成功战胜拖延症的典范。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-5\" class=\"outline-3\">\n<h3 id=\"15-学习任何东西只停留在编写hello-world的水平\"><span class=\"section-number-3\">1.5</span> 学习任何东西，只停留在编写「Hello World」的水平</h3>\n<div id=\"text-1-5\" class=\"outline-text-3\">\n<p>这个是什么意思呢？不是说你真的只会写「Hello World」，而是说要跳出自己的舒适区，去尝试一些自己不了解的领域，去做一些超过自己能力范围的事情 。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-6\" class=\"outline-3\">\n<h3 id=\"16-喜欢加qq群和微信群美其名曰技术交流\"><span class=\"section-number-3\">1.6</span> 喜欢加QQ群和微信群，美其名曰「技术交流」</h3>\n<div id=\"text-1-6\" class=\"outline-text-3\">\n<p>这是国内技术圈的一大通病，可能刚开始会聊点技术，但是时间一长就水了。好好的技术群一秒钟就可能变成水群。 而且经常还有老司机冒然发车，此时马上有人冒出一句「留图不留种，菊花万人捅」。</p>\n<p>我强烈建议大家不要过渡依赖Q群和微信群来学习技术或者解决问题，技术论坛，Stackoverflow 和 Github issue是你更好的去处。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-7\" class=\"outline-3\">\n<h3 id=\"17-天天熬夜打王者和lol睡眠严重不足\"><span class=\"section-number-3\">1.7</span> 天天熬夜打王者和LOL，睡眠严重不足</h3>\n<div id=\"text-1-7\" class=\"outline-text-3\">\n<p>实践证明，睡眠不足，啥事也干不成，只想睡觉。有人会说我晚上不到那个点睡不着，我这里有一招。 拿着一本 Kindle，挑一本英文书，躺在床上看，半小时保管睡着。虽然说看书的效果不一定佳，但是催眠也是极好的。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-8\" class=\"outline-3\">\n<h3 id=\"18-工作中遇到模糊的问题不搞清楚停留在面向-google-编程\"><span class=\"section-number-3\">1.8</span> 工作中遇到模糊的问题不搞清楚，停留在面向 Google 编程</h3>\n<div id=\"text-1-8\" class=\"outline-text-3\">\n<p>遇到问题，不假思索「百度」和「Google」，虽然现在80%的问题都可以找到解决方案，但是这样做对于自己并无多大益处。 找到解决方案之后，还要花几分钟时间探寻问题根源。可以查找背景资料，以便自己下次遇到同类型的问题时可以举一反三。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-9\" class=\"outline-3\">\n<h3 id=\"19-看几分钟书敲几行代码就开始刷知乎和朋友圈\"><span class=\"section-number-3\">1.9</span> 看几分钟书，敲几行代码就开始刷知乎和朋友圈</h3>\n<div id=\"text-1-9\" class=\"outline-text-3\">\n<p>做事情不专注，注意力不能集中，这也是学习的大忌。可以利用番茄工作法，给自己一段时间专注于某件事情，这样可以极大地提高 自己的工作效率。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-1-10\" class=\"outline-3\">\n<h3 id=\"110-从不看书所有问题的解决方案都从论坛q群和google中来\"><span class=\"section-number-3\">1.10</span> 从不看书，所有问题的解决方案都从论坛，Q群和Google中来</h3>\n<div id=\"text-1-10\" class=\"outline-text-3\">\n<p>认为看书效率太低，而且收益也不高，看书需要大量的时间，而且看完感觉也没太大的用，不如直接Google和Q群来得容易。 如果你真的这样想过，我只想说「小伙子，你思想很危险！」</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-2\" class=\"outline-2\">\n<h2 id=\"2-一些学习的好习惯\"><span class=\"section-number-2\">2</span> 一些学习的好习惯</h2>\n<div id=\"outline-container-sec-2-1\" class=\"outline-3\">\n<h3 id=\"21-与其反复阅读不如经常回顾\"><span class=\"section-number-3\">2.1</span> 与其反复阅读，不如经常回顾</h3>\n<div id=\"text-2-1\" class=\"outline-text-3\">\n<p>与其一遍又一遍地阅读重复的书籍，编写同样的「Hello World」，不如有意识地总结回顾看过的书，学过的知识。 只需要每晚趟在床上的时候，回想一下今天都学到了什么？今天自己有进步一点点吗？</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-2\" class=\"outline-3\">\n<h3 id=\"22-多做练习多写代码从错误中学习\"><span class=\"section-number-3\">2.2</span> 多做练习，多写代码，从错误中学习</h3>\n<div id=\"text-2-2\" class=\"outline-text-3\">\n<p>看技术书籍要多写书中的代码，在初学阶段哪怕对着书本敲也没有什么问题。认真完成书中留的习题，在自己没有尽最大努力的情况下面不要去看答案。 不要怕犯错，每一次犯错都是自己进步的机会。不断地测试自己是最好的学习方法，不管是「刻意练习」还是「10000小时定律」，都要求我们通过不断地 实践来巩固我们的所学，从而让自己成为大师。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-3\" class=\"outline-3\">\n<h3 id=\"23-多总结问题的解决方案多写可复用的代码拒绝复制粘贴\"><span class=\"section-number-3\">2.3</span> 多总结问题的解决方案，多写可复用的代码，拒绝复制粘贴</h3>\n<div id=\"text-2-3\" class=\"outline-text-3\">\n<p>每天把工作中遇到问题的解决方案总结一下，想想为什么要这么做，是什么导致了这个BUG，导致BUG的根本原因是什么。 是自己的逻辑混乱，粗心大意，还是程序框架太复杂？做需求的时候，要尽量避免复制粘贴，不要让代码里面有重复代码。 Don’t Repeat Yourself! Don’t Repeat Yourself! Don’t Repeat Yourself! 「重要的事情说三遍！」</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-4\" class=\"outline-3\">\n<h3 id=\"24-对于自己想要学习的内容制订一下计划有节奏地学习\"><span class=\"section-number-3\">2.4</span> 对于自己想要学习的内容，制订一下计划，有节奏地学习</h3>\n<div id=\"text-2-4\" class=\"outline-text-3\">\n<p>我是一个非常爱学习的人，但是有时候还是感觉学习不够高效。经常会由于一些突发情况把原本的学习计划打乱，导致学习效果打折扣。 因为学习一个东西最怕三天打渔，如果能够持续地学习一个东西，我可以把它学习地很好。这时候，我就得结合我自身的情况，选择一段最佳的 学习时间，在这段学习时间里我可以不被打扰，保持高度专注。比如每天早上6.30起床看一个小时书。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-5\" class=\"outline-3\">\n<h3 id=\"25-尝试使用不同的方式来解决一个问题\"><span class=\"section-number-3\">2.5</span> 尝试使用不同的方式来解决一个问题</h3>\n<div id=\"text-2-5\" class=\"outline-text-3\">\n<p>在遇到一个没有显而易见解决方案的问题时，你可能费了好大功夫想出一个方案，但是千万要记得，该方案不一定是最优的， 而且很大可能还存在一个更佳的方法。而这个方法只需要你退后一步，换个思路，或者与同事讨论一下就可以得出。 这也是我为什么非常喜欢别人 Review 我的代码的原因，因为别人能看到我代码中存在的不足。另外，有些时候，对现有的方案做一些 「微创新」也能使原本普通的方案变得不普通。</p>\n<p>另外，习惯了面向对象，何不尝尝函数式编程？每年学习一门新的不同范式的编程语言，可以极大地开拓你的眼界，给你一些不一样的解题思路。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-6\" class=\"outline-3\">\n<h3 id=\"26-注意劳逸结合\"><span class=\"section-number-3\">2.6</span> 注意劳逸结合</h3>\n<div id=\"text-2-6\" class=\"outline-text-3\">\n<p>多参加体育锻炼，多去户外走走，运动能够增强人的记忆力，并且有时候还能产生灵感。 如果身体不好，比如颈椎不好，下了班你就只想葛优躺了，因为你的本能告诉你，我不能再写代码了，会挂的。。。 想要成为大神，身体好是前提条件。有人30岁成为大神，我资质不好，我35岁成为大神总可以吧。 切莫在30岁的时候就把身体弄跨了，然后35岁转行了，永远失去了成长为大神的机会。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-7\" class=\"outline-3\">\n<h3 id=\"27-向别人解释你的知识多与人讨论\"><span class=\"section-number-3\">2.7</span> 向别人解释你的知识，多与人讨论</h3>\n<div id=\"text-2-7\" class=\"outline-text-3\">\n<p>多写博客，多分享自己的所学所思，这些对于学习者自身也是非常有益的。通过用别人能够理解的语言来解释你学到的东西， 本身就要求你对该知识充分理解。另外，很多人经常感叹「跟你讨论一下，我马上变得有思路了」，这其实就是交流的作用。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-8\" class=\"outline-3\">\n<h3 id=\"28-保持学习的专注\"><span class=\"section-number-3\">2.8</span> 保持学习的专注</h3>\n<div id=\"text-2-8\" class=\"outline-text-3\">\n<p>很多知识没有足够的专注力和足够多的时间是很难学好的，保持学习的专注尤其重要。 因为人的大脑在专注模式下面，神经细胞更活跃，你学的东西更容易从短期记忆变成中长期记忆。 而且在高度专注下面，你的解决问题的能力也会提高，原本看起来复杂的东西，在专注面前说不定就不是事了。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-9\" class=\"outline-3\">\n<h3 id=\"29-找到自己的短板并补足自己的短板\"><span class=\"section-number-3\">2.9</span> 找到自己的短板并补足自己的短板</h3>\n<div id=\"text-2-9\" class=\"outline-text-3\">\n<p>发现并找到自己的不足相对来说是比较容易的，但是要补齐短板就非常不易了。 因为人总是有畏难思想的，拖延症是怎么来的，就是你的大脑出于本能去做一些让自己分泌更多多巴胺的事情。 如果自己英语不好，就要下决心把英语攻克。如果自己数学不行，就要下死力气掌握数学。 补齐短板就像渡劫，越早渡劫，越快升仙。</p>\n</div>\n</div>\n<div id=\"outline-container-sec-2-10\" class=\"outline-3\">\n<h3 id=\"210-给自己设计学习奖励\"><span class=\"section-number-3\">2.10</span> 给自己设计学习奖励</h3>\n<div id=\"text-2-10\" class=\"outline-text-3\">\n<p>比如学好了 3D 数学，就给自己买一台顶配 MacBookPro 之类的。为什么游戏可以让你上瘾，因为它有反馈，有奖励机制。 学习数学是非常枯燥的，如果有了这个奖励机制，也许自己就更容易坚持了呢。</p>\n<p>PS：这一点对于有家室的程序员有用，你想学好什么，要获得什么奖励，你可以当着你老婆的面立个FLAG</p>\n</div>\n</div>\n</div>\n<div id=\"outline-container-sec-3\" class=\"outline-2\">\n<h2 id=\"3-小结\"><span class=\"section-number-2\">3</span> 小结</h2>\n<div id=\"text-3\" class=\"outline-text-2\">\n<p>Coursera 的这门MOOC 《Learning How to Learn》 强烈推荐给每一伴热爱学习的小伙伴，也欢迎大家给我留言，分享你的学习感悟。</p>\n</div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114034\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114034votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114034\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/23173d6ca86d727a81c2d7e88a6d0158f93860e7.jpg"},{"title": "深入学习 Redis（2）：持久化", "url": "http://blog.jobbole.com/114093/", "url_object_id": "e4cc420154439ecffbc963653c5f7cd8", "create_date": "2018/06/07", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Redis,数据库", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/kismetv/p/9137897.html\">编程迷思</a>   </div><h2>前言</h2>\n<p>在上一篇文章中，介绍了<a href=\"http://blog.jobbole.com/113789/\" target=\"_blank\">Redis的内存模型</a>，从这篇文章开始，将依次介绍Redis高可用相关的知识——持久化、复制(及读写分离)、哨兵、以及集群。</p>\n<p>本文将先说明上述几种技术分别解决了Redis高可用的什么问题；然后详细介绍Redis的持久化技术，主要是RDB和AOF两种持久化方案；在介绍RDB和AOF方案时，不仅介绍其作用及操作方法，同时介绍持久化实现的一些原理细节及需要注意的问题。最后，介绍在实际使用中，持久化方案的选择，以及经常遇到的问题等。</p>\n<h1>一、Redis高可用概述</h1>\n<p>在介绍Redis高可用之前，先说明一下在Redis的语境中高可用的含义。</p>\n<p>我们知道，在web服务器中，高可用是指服务器可以正常访问的时间，衡量的标准是在多长时间内可以提供正常服务（99.9%、99.99%、99.999% 等等）。但是在Redis语境中，高可用的含义似乎要宽泛一些，除了保证提供正常服务(如主从分离、快速容灾技术)，还需要考虑数据容量的扩展、数据安全不会丢失等。</p>\n<p>在Redis中，实现高可用的技术主要包括持久化、复制、哨兵和集群，下面分别说明它们的作用，以及解决了什么样的问题。</p>\n<ol>\n<li>持久化：持久化是最简单的高可用方法(有时甚至不被归为高可用的手段)，主要作用是数据备份，即将数据存储在硬盘，保证数据不会因进程退出而丢失。</li>\n<li>复制：复制是高可用Redis的基础，哨兵和集群都是在复制基础上实现高可用的。复制主要实现了数据的多机备份，以及对于读操作的负载均衡和简单的故障恢复。缺陷：故障恢复无法自动化；写操作无法负载均衡；存储能力受到单机的限制。</li>\n<li>哨兵：在复制的基础上，哨兵实现了自动化的故障恢复。缺陷：写操作无法负载均衡；存储能力受到单机的限制。</li>\n<li>集群：通过集群，Redis解决了写操作无法负载均衡，以及存储能力受到单机限制的问题，实现了较为完善的高可用方案。</li>\n</ol>\n<h1>二、Redis 持久化概述</h1>\n<p>持久化的功能：Redis是内存数据库，数据都是存储在内存中，为了避免进程退出导致数据的永久丢失，需要定期将Redis中的数据以某种形式(数据或命令)从内存保存到硬盘；当下次Redis重启时，利用持久化文件实现数据恢复。除此之外，为了进行灾难备份，可以将持久化文件拷贝到一个远程位置。</p>\n<p>Redis持久化分为RDB持久化和AOF持久化<strong>：前者将当前数据保存到硬盘，后者则是将每次执行的写命令保存到硬盘（类似于MySQL的binlog）；</strong>由于AOF持久化的实时性更好，即当进程意外退出时丢失的数据更少，因此AOF是目前主流的持久化方式，不过RDB持久化仍然有其用武之地。</p>\n<p>下面依次介绍RDB持久化和AOF持久化；由于Redis各个版本之间存在差异，如无特殊说明，以Redis3.0为准。</p>\n<h1>三、RDB持久化</h1>\n<p>RDB持久化是将当前进程中的数据生成快照保存到硬盘(因此也称作快照持久化)，保存的文件后缀是rdb；当Redis重新启动时，可以读取快照文件恢复数据。</p>\n<h2>1. 触发条件</h2>\n<p>RDB持久化的触发分为手动触发和自动触发两种。</p>\n<h3>1) 手动触发</h3>\n<p>save命令和bgsave命令都可以生成RDB文件。</p>\n<p>save命令会阻塞Redis服务器进程，直到RDB文件创建完毕为止，在Redis服务器阻塞期间，服务器不能处理任何命令请求。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/662665d4fe41bbae40cff2548bc1c4ee.png\" alt=\"\"></p>\n<p>而bgsave命令会创建一个子进程，由子进程来负责创建RDB文件，父进程(即Redis主进程)则继续处理请求。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/fbe173ede64bc88f834bc25d89f8f44f.png\" alt=\"\"></p>\n<p>此时服务器执行日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/fbb24a124ecb5ddf9c02d425ddc488d2.png\" alt=\"\"></p>\n<p>bgsave命令执行过程中，只有fork子进程时会阻塞服务器，而对于save命令，整个过程都会阻塞服务器，因此save已基本被废弃，线上环境要杜绝save的使用；后文中也将只介绍bgsave命令。此外，在自动触发RDB持久化时，Redis也会选择bgsave而不是save来进行持久化；下面介绍自动触发RDB持久化的条件。</p>\n<h3>2) 自动触发</h3>\n<p><strong>save m n</strong></p>\n<p>自动触发最常见的情况是在配置文件中通过save m n，指定当m秒内发生n次变化时，会触发bgsave。</p>\n<p>例如，查看redis的默认配置文件(Linux下为redis根目录下的redis.conf)，可以看到如下配置信息：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/940eea59eb4ff44da2ba1a95bf28ab2c.png\" alt=\"\"></p>\n<p>其中save 900 1的含义是：当时间到900秒时，如果redis数据发生了至少1次变化，则执行bgsave；save 300 10和save 60 10000同理。当三个save条件满足任意一个时，都会引起bgsave的调用。</p>\n<p><strong>save m n的实现原理</strong></p>\n<p>Redis的save m n，是通过serverCron函数、dirty计数器、和lastsave时间戳来实现的。</p>\n<p>serverCron是Redis服务器的周期性操作函数，默认每隔100ms执行一次；该函数对服务器的状态进行维护，其中一项工作就是检查 save m n 配置的条件是否满足，如果满足就执行bgsave。</p>\n<p>dirty计数器是Redis服务器维持的一个状态，记录了上一次执行bgsave/save命令后，服务器状态进行了多少次修改(包括增删改)；而当save/bgsave执行完成后，会将dirty重新置为0。</p>\n<p>例如，如果Redis执行了set mykey helloworld，则dirty值会+1；如果执行了sadd myset v1 v2 v3，则dirty值会+3；注意dirty记录的是服务器进行了多少次修改，而不是客户端执行了多少修改数据的命令。</p>\n<p>lastsave时间戳也是Redis服务器维持的一个状态，记录的是上一次成功执行save/bgsave的时间。</p>\n<p>save m n的原理如下：每隔100ms，执行serverCron函数；在serverCron函数中，遍历save m n配置的保存条件，只要有一个条件满足，就进行bgsave。对于每一个save m n条件，只有下面两条同时满足时才算满足：</p>\n<p>（1）当前时间-lastsave &gt; m</p>\n<p>（2）dirty &gt;= n</p>\n<p><strong>save m n 执行日志</strong></p>\n<p>下图是save m n触发bgsave执行时，服务器打印日志的情况：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/969e9ec6f50fedbdd85b68d2becb5b9a.png\" alt=\"\"></p>\n<p><strong>其他自动触发机制</strong></p>\n<p>除了save m n 以外，还有一些其他情况会触发bgsave：</p>\n<ul>\n<li>在主从复制场景下，如果从节点执行全量复制操作，则主节点会执行bgsave命令，并将rdb文件发送给从节点</li>\n<li>执行shutdown命令时，自动执行rdb持久化，如下图所示：</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/026e36b9dd1e7d05a54e83405e4a8d19.png\" alt=\"\"></p>\n<h2>2. 执行流程</h2>\n<p>前面介绍了触发bgsave的条件，下面将说明bgsave命令的执行流程，如下图所示(图片来源：https://blog.csdn.net/a1007720052/article/details/79126253)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d7320b5cc683f2e4eafeff120f5242cc.png\" alt=\"\"></p>\n<p>图片中的5个步骤所进行的操作如下：</p>\n<p>1)  Redis父进程首先判断：当前是否在执行save，或bgsave/bgrewriteaof（后面会详细介绍该命令）的子进程，如果在执行则bgsave命令直接返回。bgsave/bgrewriteaof 的子进程不能同时执行，主要是基于性能方面的考虑：两个并发的子进程同时执行大量的磁盘写操作，可能引起严重的性能问题。</p>\n<p>2)  父进程执行fork操作创建子进程，这个过程中父进程是阻塞的，Redis不能执行来自客户端的任何命令</p>\n<p>3)  父进程fork后，bgsave命令返回”Background saving started”信息并不再阻塞父进程，并可以响应其他命令</p>\n<p>4)  子进程创建RDB文件，根据父进程内存快照生成临时快照文件，完成后对原有文件进行原子替换</p>\n<p>5)  子进程发送信号给父进程表示完成，父进程更新统计信息</p>\n<h2>3. RDB文件</h2>\n<p>RDB文件是经过压缩的二进制文件，下面介绍关于RDB文件的一些细节。</p>\n<p><strong>存储路径</strong></p>\n<p>RDB文件的存储路径既可以在启动前配置，也可以通过命令动态设定。</p>\n<p>配置：dir配置指定目录，dbfilename指定文件名。默认是Redis根目录下的dump.rdb文件。</p>\n<p>动态设定：Redis启动后也可以动态修改RDB存储路径，在磁盘损害或空间不足时非常有用；执行命令为config set dir {newdir}和config set dbfilename {newFileName}。如下所示(Windows环境)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d9908e2d6d9a38ed4b11ae1f2e976cd1.png\" alt=\"\"></p>\n<p><strong>RDB文件格式</strong></p>\n<p>RDB文件格式如下图所示（图片来源：《Redis设计与实现》）：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/58d5a97304a02565e67339cabadade6c.png\" alt=\"\"></p>\n<p>其中各个字段的含义说明如下：</p>\n<p>1)  REDIS：常量，保存着”REDIS”5个字符。</p>\n<p>2)  db_version：RDB文件的版本号，注意不是Redis的版本号。</p>\n<p>3)  SELECTDB 0 pairs：表示一个完整的数据库(0号数据库)，同理SELECTDB 3 pairs表示完整的3号数据库；只有当数据库中有键值对时，RDB文件中才会有该数据库的信息(上图所示的Redis中只有0号和3号数据库有键值对)；如果Redis中所有的数据库都没有键值对，则这一部分直接省略。其中：SELECTDB是一个常量，代表后面跟着的是数据库号码；0和3是数据库号码；pairs则存储了具体的键值对信息，包括key、value值，及其数据类型、内部编码、过期时间、压缩信息等等。</p>\n<p>4)  EOF：常量，标志RDB文件正文内容结束。</p>\n<p>5)  check_sum：前面所有内容的校验和；Redis在载入RBD文件时，会计算前面的校验和并与check_sum值比较，判断文件是否损坏。</p>\n<p><strong>压缩</strong></p>\n<p>Redis默认采用LZF算法对RDB文件进行压缩。虽然压缩耗时，但是可以大大减小RDB文件的体积，因此压缩默认开启；可以通过命令关闭：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/4d88ca2d61427189a211b9652d4d5dc6.png\" alt=\"\"></p>\n<p>需要注意的是，RDB文件的压缩并不是针对整个文件进行的，而是对数据库中的字符串进行的，且只有在字符串达到一定长度(20字节)时才会进行。</p>\n<h2>4. 启动时加载</h2>\n<p>RDB文件的载入工作是在服务器启动时自动执行的，并没有专门的命令。但是由于AOF的优先级更高，因此当AOF开启时，Redis会优先载入AOF文件来恢复数据；只有当AOF关闭时，才会在Redis服务器启动时检测RDB文件，并自动载入。服务器载入RDB文件期间处于阻塞状态，直到载入完成为止。</p>\n<p>Redis启动日志中可以看到自动载入的执行：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1ae2921155458ca1803759968945bc9f.png\" alt=\"\"></p>\n<p>Redis载入RDB文件时，会对RDB文件进行校验，如果文件损坏，则日志中会打印错误，Redis启动失败。</p>\n<h2>5. RDB常用配置总结</h2>\n<p>下面是RDB常用的配置项，以及默认值；前面介绍过的这里不再详细介绍。</p>\n<ul>\n<li>save m n：bgsave自动触发的条件；如果没有save m n配置，相当于自动的RDB持久化关闭，不过此时仍可以通过其他方式触发</li>\n<li>stop-writes-on-bgsave-error yes：当bgsave出现错误时，Redis是否停止执行写命令；设置为yes，则当硬盘出现问题时，可以及时发现，避免数据的大量丢失；设置为no，则Redis无视bgsave的错误继续执行写命令，当对Redis服务器的系统(尤其是硬盘)使用了监控时，该选项考虑设置为no</li>\n<li>rdbcompression yes：是否开启RDB文件压缩</li>\n<li>rdbchecksum yes：是否开启RDB文件的校验，在写入文件和读取文件时都起作用；关闭checksum在写入文件和启动文件时大约能带来10%的性能提升，但是数据损坏时无法发现</li>\n<li>dbfilename dump.rdb：RDB文件名</li>\n<li>dir ./：RDB文件和AOF文件所在目录</li>\n</ul>\n<h1>四、AOF持久化</h1>\n<p>RDB持久化是将进程数据写入文件，而AOF持久化(即Append Only File持久化)，则是将Redis执行的每次写命令记录到单独的日志文件中（有点像MySQL的binlog）；当Redis重启时再次执行AOF文件中的命令来恢复数据。</p>\n<p>与RDB相比，AOF的实时性更好，因此已成为主流的持久化方案。</p>\n<h2>1. 开启AOF</h2>\n<p>Redis服务器默认开启RDB，关闭AOF；要开启AOF，需要在配置文件中配置：</p>\n<p>appendonly yes</p>\n<h2>2. 执行流程</h2>\n<p>由于需要记录Redis的每条写命令，因此AOF不需要触发，下面介绍AOF的执行流程。</p>\n<p>AOF的执行流程包括：</p>\n<ul>\n<li>命令追加(append)：将Redis的写命令追加到缓冲区aof_buf；</li>\n<li>文件写入(write)和文件同步(sync)：根据不同的同步策略将aof_buf中的内容同步到硬盘；</li>\n<li>文件重写(rewrite)：定期重写AOF文件，达到压缩的目的。</li>\n</ul>\n<h3>1) 命令追加(append)</h3>\n<p>Redis先将写命令追加到缓冲区，而不是直接写入文件，主要是为了避免每次有写命令都直接写入硬盘，导致硬盘IO成为Redis负载的瓶颈。</p>\n<p>命令追加的格式是Redis命令请求的协议格式，它是一种纯文本格式，具有兼容性好、可读性强、容易处理、操作简单避免二次开销等优点；具体格式略。在AOF文件中，除了用于指定数据库的select命令（如select 0 为选中0号数据库）是由Redis添加的，其他都是客户端发送来的写命令。</p>\n<h3>2) 文件写入(write)和文件同步(sync)</h3>\n<p>Redis提供了多种AOF缓存区的同步文件策略，策略涉及到操作系统的write函数和fsync函数，说明如下：</p>\n<p>为了提高文件写入效率，在现代操作系统中，当用户调用write函数将数据写入文件时，操作系统通常会将数据暂存到一个内存缓冲区里，当缓冲区被填满或超过了指定时限后，才真正将缓冲区的数据写入到硬盘里。这样的操作虽然提高了效率，但也带来了安全问题：如果计算机停机，内存缓冲区中的数据会丢失；因此系统同时提供了fsync、fdatasync等同步函数，可以强制操作系统立刻将缓冲区中的数据写入到硬盘里，从而确保数据的安全性。</p>\n<p>AOF缓存区的同步文件策略由参数appendfsync控制，各个值的含义如下：</p>\n<ul>\n<li>always：命令写入aof_buf后立即调用系统fsync操作同步到AOF文件，fsync完成后线程返回。这种情况下，每次有写命令都要同步到AOF文件，硬盘IO成为性能瓶颈，Redis只能支持大约几百TPS写入，严重降低了Redis的性能；即便是使用固态硬盘（SSD），每秒大约也只能处理几万个命令，而且会大大降低SSD的寿命。</li>\n<li>no：命令写入aof_buf后调用系统write操作，不对AOF文件做fsync同步；同步由操作系统负责，通常同步周期为30秒。这种情况下，文件同步的时间不可控，且缓冲区中堆积的数据会很多，数据安全性无法保证。</li>\n<li>everysec：命令写入aof_buf后调用系统write操作，write完成后线程返回；fsync同步文件操作由专门的线程每秒调用一次。<strong>everysec是前述两种策略的折中，是性能和数据安全性的平衡，因此是Redis的默认配置，也是我们推荐的配置。</strong></li>\n</ul>\n<h3>3) 文件重写(rewrite)</h3>\n<p>随着时间流逝，Redis服务器执行的写命令越来越多，AOF文件也会越来越大；过大的AOF文件不仅会影响服务器的正常运行，也会导致数据恢复需要的时间过长。</p>\n<p>文件重写是指定期重写AOF文件，减小AOF文件的体积。需要注意的是，<strong>AOF重写是把Redis进程内的数据转化为写命令，同步到新的AOF文件；不会对旧的AOF文件进行任何读取、写入操作!</strong></p>\n<p>关于文件重写需要注意的另一点是：对于AOF持久化来说，文件重写虽然是强烈推荐的，但并不是必须的；即使没有文件重写，数据也可以被持久化并在Redis启动的时候导入；因此在一些实现中，会关闭自动的文件重写，然后通过定时任务在每天的某一时刻定时执行。</p>\n<p>文件重写之所以能够压缩AOF文件，原因在于：</p>\n<ul>\n<li>过期的数据不再写入文件</li>\n<li>无效的命令不再写入文件：如有些数据被重复设值(set mykey v1, set mykey v2)、有些数据被删除了(sadd myset v1, del myset)等等</li>\n<li>多条命令可以合并为一个：如sadd myset v1, sadd myset v2, sadd myset v3可以合并为sadd myset v1 v2 v3。不过为了防止单条命令过大造成客户端缓冲区溢出，对于list、set、hash、zset类型的key，并不一定只使用一条命令；而是以某个常量为界将命令拆分为多条。这个常量在redis.h/REDIS_AOF_REWRITE_ITEMS_PER_CMD中定义，不可更改，3.0版本中值是64。</li>\n</ul>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/dbd265625fa30c7c5837136e70171248.png\" alt=\"\"></p>\n<p>通过上述内容可以看出，由于重写后AOF执行的命令减少了，文件重写既可以减少文件占用的空间，也可以加快恢复速度。</p>\n<p><strong>文件重写的触发</strong></p>\n<p>文件重写的触发，分为手动触发和自动触发：</p>\n<p>手动触发：直接调用bgrewriteaof命令，该命令的执行与bgsave有些类似：都是fork子进程进行具体的工作，且都只有在fork时阻塞。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/a3bfe8ea04147795290a39f4debe1602.png\" alt=\"\"></p>\n<p>此时服务器执行日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/c81bed0689ff70ea950574eacb26684c.png\" alt=\"\"></p>\n<p>自动触发：根据auto-aof-rewrite-min-size和auto-aof-rewrite-percentage参数，以及aof_current_size和aof_base_size状态确定触发时机。</p>\n<ul>\n<li>auto-aof-rewrite-min-size：执行AOF重写时，文件的最小体积，默认值为64MB。</li>\n<li>auto-aof-rewrite-percentage：执行AOF重写时，当前AOF大小(即aof_current_size)和上一次重写时AOF大小(aof_base_size)的比值。</li>\n</ul>\n<p>其中，参数可以通过config get命令查看：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/ab802fac49820819fd9f5896ebaaaeb5.png\" alt=\"\"></p>\n<p>状态可以通过info persistence查看：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/e1385eb5e949e1cd2155ec601ad65fb7.png\" alt=\"\"></p>\n<p>只有当auto-aof-rewrite-min-size和auto-aof-rewrite-percentage两个参数同时满足时，才会自动触发AOF重写，即bgrewriteaof操作。</p>\n<p>自动触发bgrewriteaof时，可以看到服务器日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/402b56947d9affe03aa1e13bad670e45.png\" alt=\"\"></p>\n<p><strong>文件重写的流程</strong></p>\n<p>文件重写流程如下图所示(图片来源：http://www.cnblogs.com/yangmingxianshen/p/8373205.html)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1324311267755f0686b519bb6064f99f.png\" alt=\"\"></p>\n<p>关于文件重写的流程，有两点需要特别注意：(1)重写由父进程fork子进程进行；(2)重写期间Redis执行的写命令，需要追加到新的AOF文件中，为此Redis引入了aof_rewrite_buf缓存。</p>\n<p>对照上图，文件重写的流程如下：</p>\n<p>1) Redis父进程首先判断当前是否存在正在执行 bgsave/bgrewriteaof的子进程，如果存在则bgrewriteaof命令直接返回，如果存在bgsave命令则等bgsave执行完成后再执行。前面曾介绍过，这个主要是基于性能方面的考虑。</p>\n<p>2) 父进程执行fork操作创建子进程，这个过程中父进程是阻塞的。</p>\n<p>3.1) 父进程fork后，bgrewriteaof命令返回”Background append only file rewrite started”信息并不再阻塞父进程，并可以响应其他命令。<strong>Redis的所有写命令依然写入AOF缓冲区，并根据appendfsync策略同步到硬盘，保证原有AOF机制的正确。</strong></p>\n<p>3.2) 由于fork操作使用写时复制技术，子进程只能共享fork操作时的内存数据。<strong>由于父进程依然在响应命令，因此Redis使用AOF重写缓冲区(图中的aof_rewrite_buf)保存这部分数据，防止新AOF文件生成期间丢失这部分数据。也就是说，bgrewriteaof执行期间，Redis的写命令同时追加到aof_buf和aof_rewirte_buf两个缓冲区。</strong></p>\n<p>4) 子进程根据内存快照，按照命令合并规则写入到新的AOF文件。</p>\n<p>5.1) 子进程写完新的AOF文件后，向父进程发信号，父进程更新统计信息，具体可以通过info persistence查看。</p>\n<p>5.2) 父进程把AOF重写缓冲区的数据写入到新的AOF文件，这样就保证了新AOF文件所保存的数据库状态和服务器当前状态一致。</p>\n<p>5.3) 使用新的AOF文件替换老文件，完成AOF重写。</p>\n<h2>3. 启动时加载</h2>\n<p>前面提到过，当AOF开启时，Redis启动时会优先载入AOF文件来恢复数据；只有当AOF关闭时，才会载入RDB文件恢复数据。</p>\n<p>当AOF开启，且AOF文件存在时，Redis启动日志：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/d49381c9c2e7613607d5ea44f4e01e8a.png\" alt=\"\"></p>\n<p>当AOF开启，但AOF文件不存在时，即使RDB文件存在也不会加载(更早的一些版本可能会加载，但3.0不会)，Redis启动日志如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/6bc3128e30e32da4892e6838adbcab3c.png\" alt=\"\"></p>\n<p><strong>文件校验</strong></p>\n<p>与载入RDB文件类似，Redis载入AOF文件时，会对AOF文件进行校验，如果文件损坏，则日志中会打印错误，Redis启动失败。但如果是AOF文件结尾不完整(机器突然宕机等容易导致文件尾部不完整)，且aof-load-truncated参数开启，则日志中会输出警告，Redis忽略掉AOF文件的尾部，启动成功。aof-load-truncated参数默认是开启的：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/1355e2b884fc0fd4dd40a6aba7dad6da.png\" alt=\"\"></p>\n<p><strong>伪客户端</strong></p>\n<p>因为Redis的命令只能在客户端上下文中执行，而载入AOF文件时命令是直接从文件中读取的，并不是由客户端发送；因此Redis服务器在载入AOF文件之前，会创建一个没有网络连接的客户端，之后用它来执行AOF文件中的命令，命令执行的效果与带网络连接的客户端完全一样。</p>\n<h2>4. AOF常用配置总结</h2>\n<p>下面是AOF常用的配置项，以及默认值；前面介绍过的这里不再详细介绍。</p>\n<ul>\n<li>appendonly no：是否开启AOF</li>\n<li>appendfilename “appendonly.aof”：AOF文件名</li>\n<li>dir ./：RDB文件和AOF文件所在目录</li>\n<li>appendfsync everysec：fsync持久化策略</li>\n<li>no-appendfsync-on-rewrite no：AOF重写期间是否禁止fsync；如果开启该选项，可以减轻文件重写时CPU和硬盘的负载（尤其是硬盘），但是可能会丢失AOF重写期间的数据；需要在负载和安全性之间进行平衡</li>\n<li>auto-aof-rewrite-percentage 100：文件重写触发条件之一</li>\n<li>auto-aof-rewrite-min-size 64mb：文件重写触发提交之一</li>\n<li>aof-load-truncated yes：如果AOF文件结尾损坏，Redis启动时是否仍载入AOF文件</li>\n</ul>\n<h1>五、方案选择与常见问题</h1>\n<p>前面介绍了RDB和AOF两种持久化方案的细节，下面介绍RDB和AOF的特点、如何选择持久化方案，以及在持久化过程中常遇到的问题等。</p>\n<h2>1. RDB和AOF的优缺点</h2>\n<p>RDB和AOF各有优缺点：</p>\n<p><strong>RDB持久化</strong></p>\n<p>优点：RDB文件紧凑，体积小，网络传输快，适合全量复制；恢复速度比AOF快很多。当然，与AOF相比，RDB最重要的优点之一是对性能的影响相对较小。</p>\n<p>缺点：RDB文件的致命缺点在于其数据快照的持久化方式决定了必然做不到实时持久化，而在数据越来越重要的今天，数据的大量丢失很多时候是无法接受的，因此AOF持久化成为主流。此外，RDB文件需要满足特定格式，兼容性差（如老版本的Redis不兼容新版本的RDB文件）。</p>\n<p><strong>AOF持久化</strong></p>\n<p>与RDB持久化相对应，AOF的优点在于支持秒级持久化、兼容性好，缺点是文件大、恢复速度慢、对性能影响大。</p>\n<h2>2. 持久化策略选择</h2>\n<p>在介绍持久化策略之前，首先要明白无论是RDB还是AOF，持久化的开启都是要付出性能方面代价的：对于RDB持久化，一方面是bgsave在进行fork操作时Redis主进程会阻塞，另一方面，子进程向硬盘写数据也会带来IO压力；对于AOF持久化，向硬盘写数据的频率大大提高(everysec策略下为秒级)，IO压力更大，甚至可能造成AOF追加阻塞问题（后面会详细介绍这种阻塞），此外，AOF文件的重写与RDB的bgsave类似，会有fork时的阻塞和子进程的IO压力问题。相对来说，由于AOF向硬盘中写数据的频率更高，因此对Redis主进程性能的影响会更大。</p>\n<p>在实际生产环境中，根据数据量、应用对数据的安全要求、预算限制等不同情况，会有各种各样的持久化策略；如完全不使用任何持久化、使用RDB或AOF的一种，或同时开启RDB和AOF持久化等。此外，持久化的选择必须与Redis的主从策略一起考虑，因为主从复制与持久化同样具有数据备份的功能，而且主机master和从机slave可以独立的选择持久化方案。</p>\n<p>下面分场景来讨论持久化策略的选择，下面的讨论也只是作为参考，实际方案可能更复杂更具多样性。</p>\n<p>（1）如果Redis中的数据完全丢弃也没有关系（如Redis完全用作DB层数据的cache），那么无论是单机，还是主从架构，都可以不进行任何持久化。</p>\n<p>（2）在单机环境下（对于个人开发者，这种情况可能比较常见），如果可以接受十几分钟或更多的数据丢失，选择RDB对Redis的性能更加有利；如果只能接受秒级别的数据丢失，应该选择AOF。</p>\n<p>（3）但在多数情况下，我们都会配置主从环境，slave的存在既可以实现数据的热备，也可以进行读写分离分担Redis读请求，以及在master宕掉后继续提供服务。</p>\n<p>在这种情况下，一种可行的做法是：</p>\n<p>master：完全关闭持久化（包括RDB和AOF），这样可以让master的性能达到最好</p>\n<p>slave：关闭RDB，开启AOF（如果对数据安全要求不高，开启RDB关闭AOF也可以），并定时对持久化文件进行备份（如备份到其他文件夹，并标记好备份的时间）；然后关闭AOF的自动重写，然后添加定时任务，在每天Redis闲时（如凌晨12点）调用bgrewriteaof。</p>\n<p>这里需要解释一下，为什么开启了主从复制，可以实现数据的热备份，还需要设置持久化呢？因为在一些特殊情况下，主从复制仍然不足以保证数据的安全，例如：</p>\n<ul>\n<li>master和slave进程同时停止：考虑这样一种场景，如果master和slave在同一栋大楼或同一个机房，则一次停电事故就可能导致master和slave机器同时关机，Redis进程停止；如果没有持久化，则面临的是数据的完全丢失。</li>\n<li>master误重启：考虑这样一种场景，master服务因为故障宕掉了，如果系统中有自动拉起机制（即检测到服务停止后重启该服务）将master自动重启，由于没有持久化文件，那么master重启后数据是空的，slave同步数据也变成了空的；如果master和slave都没有持久化，同样会面临数据的完全丢失。需要注意的是，即便是使用了哨兵(关于哨兵后面会有文章介绍)进行自动的主从切换，也有可能在哨兵轮询到master之前，便被自动拉起机制重启了。因此，应尽量避免“自动拉起机制”和“不做持久化”同时出现。</li>\n</ul>\n<p>（4）异地灾备：上述讨论的几种持久化策略，针对的都是一般的系统故障，如进程异常退出、宕机、断电等，这些故障不会损坏硬盘。但是对于一些可能导致硬盘损坏的灾难情况，如火灾地震，就需要进行异地灾备。例如对于单机的情形，可以定时将RDB文件或重写后的AOF文件，通过scp拷贝到远程机器，如阿里云、AWS等；对于主从的情形，可以定时在master上执行bgsave，然后将RDB文件拷贝到远程机器，或者在slave上执行bgrewriteaof重写AOF文件后，将AOF文件拷贝到远程机器上。一般来说，由于RDB文件文件小、恢复快，因此灾难恢复常用RDB文件；异地备份的频率根据数据安全性的需要及其他条件来确定，但最好不要低于一天一次。</p>\n<h2>3. fork阻塞：CPU的阻塞</h2>\n<p>在Redis的实践中，众多因素限制了Redis单机的内存不能过大，例如：</p>\n<ul>\n<li>当面对请求的暴增，需要从库扩容时，Redis内存过大会导致扩容时间太长；</li>\n<li>当主机宕机时，切换主机后需要挂载从库，Redis内存过大导致挂载速度过慢；</li>\n<li>以及持久化过程中的fork操作，下面详细说明。</li>\n</ul>\n<p>首先说明一下fork操作：</p>\n<p>父进程通过fork操作可以创建子进程；子进程创建后，父子进程共享代码段，不共享进程的数据空间，但是子进程会获得父进程的数据空间的副本。在操作系统fork的实际实现中，基本都采用了写时复制技术，即在父/子进程试图修改数据空间之前，父子进程实际上共享数据空间；但是当父/子进程的任何一个试图修改数据空间时，操作系统会为修改的那一部分(内存的一页)制作一个副本。</p>\n<p>虽然fork时，子进程不会复制父进程的数据空间，但是会复制内存页表（页表相当于内存的索引、目录）；父进程的数据空间越大，内存页表越大，fork时复制耗时也会越多。</p>\n<p>在Redis中，无论是RDB持久化的bgsave，还是AOF重写的bgrewriteaof，都需要fork出子进程来进行操作。如果Redis内存过大，会导致fork操作时复制内存页表耗时过多；而Redis主进程在进行fork时，是完全阻塞的，也就意味着无法响应客户端的请求，会造成请求延迟过大。</p>\n<p>对于不同的硬件、不同的操作系统，fork操作的耗时会有所差别，一般来说，如果Redis单机内存达到了10GB，fork时耗时可能会达到百毫秒级别（如果使用Xen虚拟机，这个耗时可能达到秒级别）。因此，一般来说Redis单机内存一般要限制在10GB以内；不过这个数据并不是绝对的，可以通过观察线上环境fork的耗时来进行调整。观察的方法如下：执行命令info stats，查看latest_fork_usec的值，单位为微秒。</p>\n<p>为了减轻fork操作带来的阻塞问题，除了控制Redis单机内存的大小以外，还可以适度放宽AOF重写的触发条件、选用物理机或高效支持fork操作的虚拟化技术等，例如使用Vmware或KVM虚拟机，不要使用Xen虚拟机。</p>\n<h2>4. AOF追加阻塞：硬盘的阻塞</h2>\n<p>前面提到过，在AOF中，如果AOF缓冲区的文件同步策略为everysec，则：在主线程中，命令写入aof_buf后调用系统write操作，write完成后主线程返回；fsync同步文件操作由专门的文件同步线程每秒调用一次。</p>\n<p>这种做法的问题在于，如果硬盘负载过高，那么fsync操作可能会超过1s；如果Redis主线程持续高速向aof_buf写入命令，硬盘的负载可能会越来越大，IO资源消耗更快；如果此时Redis进程异常退出，丢失的数据也会越来越多，可能远超过1s。</p>\n<p>为此，Redis的处理策略是这样的：主线程每次进行AOF会对比上次fsync成功的时间；如果距上次不到2s，主线程直接返回；如果超过2s，则主线程阻塞直到fsync同步完成。因此，如果系统硬盘负载过大导致fsync速度太慢，会导致Redis主线程的阻塞；此外，使用everysec配置，AOF最多可能丢失2s的数据，而不是1s。</p>\n<p>AOF追加阻塞问题定位的方法：</p>\n<p>（1）监控info Persistence中的aof_delayed_fsync：当AOF追加阻塞发生时（即主线程等待fsync而阻塞），该指标累加。</p>\n<p>（2）AOF阻塞时的Redis日志：</p>\n<p>Asynchronous AOF fsync is taking too long (disk is busy?). Writing the AOF buffer without waiting for fsync to complete, this may slow down Redis.</p>\n<p>（3）如果AOF追加阻塞频繁发生，说明系统的硬盘负载太大；可以考虑更换IO速度更快的硬盘，或者通过IO监控分析工具对系统的IO负载进行分析，如iostat（系统级io）、iotop（io版的top）、pidstat等。</p>\n<h2><a name=\"t55\"></a>5. info命令与持久化</h2>\n<p>前面提到了一些通过info命令查看持久化相关状态的方法，下面来总结一下。</p>\n<p>（1）info Persistence</p>\n<p>执行结果如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/f238e2d52950ad685901cade59bf8809.png\" alt=\"\"></p>\n<p>其中比较重要的包括：</p>\n<ul>\n<li>rdb_last_bgsave_status:上次bgsave 执行结果，可以用于发现bgsave错误</li>\n<li>rdb_last_bgsave_time_sec:上次bgsave执行时间（单位是s），可以用于发现bgsave是否耗时过长</li>\n<li>aof_enabled:AOF是否开启</li>\n<li>aof_last_rewrite_time_sec: 上次文件重写执行时间（单位是s），可以用于发现文件重写是否耗时过长</li>\n<li>aof_last_bgrewrite_status: 上次bgrewrite执行结果，可以用于发现bgrewrite错误</li>\n<li>aof_buffer_length和aof_rewrite_buffer_length:aof缓存区大小和aof重写缓冲区大小</li>\n<li>aof_delayed_fsync:AOF追加阻塞情况的统计</li>\n</ul>\n<p>（2）info stats</p>\n<p>其中与持久化关系较大的是：latest_fork_usec，代表上次fork耗时，可以参见前面的讨论。</p>\n<h1>六、总结</h1>\n<p>本文主要内容可以总结如下：</p>\n<p>1、持久化在Redis高可用中的作用：数据备份，与主从复制相比强调的是由内存到硬盘的备份。</p>\n<p>2、RDB持久化：将数据快照备份到硬盘；介绍了其触发条件（包括手动出发和自动触发）、执行流程、RDB文件等，特别需要注意的是文件保存操作由fork出的子进程来进行。</p>\n<p>3、AOF持久化：将执行的写命令备份到硬盘（类似于MySQL的binlog），介绍了其开启方法、执行流程等，特别需要注意的是文件同步策略的选择（everysec）、文件重写的流程。</p>\n<p>4、一些现实的问题：包括如何选择持久化策略，以及需要注意的fork阻塞、AOF追加阻塞等。</p>\n<h1>参考文献</h1>\n<p>《Redis开发与运维》</p>\n<p>《Redis设计与实现》</p>\n<p>《Redis实战》</p>\n<p><a href=\"http://www.redis.cn/topics/persistence.html\">http://www.redis.cn/topics/persistence.html</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s/fpupqLp-wjR8fQvYSQhVLg\">https://mp.weixin.qq.com/s/fpupqLp-wjR8fQvYSQhVLg</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650764050&amp;idx=1&amp;sn=891287b9f99a8c1dd4ce9e1805646741&amp;chksm=f3f9c687c48e4f91c6631e7f5e36a9169c10549386bec541dbeef92ed0023a373f6ec25c2ef1&amp;mpshare=1&amp;scene=1&amp;srcid=0525xnHQxiFwpzFWSME2LQrb#rd\">https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650764050&amp;idx=1&amp;sn=891287b9f99a8c1dd4ce9e1805646741&amp;chksm=f3f9c687c48e4f91c6631e7f5e36a9169c10549386bec541dbeef92ed0023a373f6ec25c2ef1&amp;mpshare=1&amp;scene=1&amp;srcid=0525xnHQxiFwpzFWSME2LQrb#rd</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650763383&amp;idx=1&amp;sn=348a84605a7cdefe4e075c9f0310f257&amp;chksm=f3f9c5e2c48e4cf41bd3f708bce3f9a1302a699cf7defe611e9aea120fcb424944119e079362&amp;mpshare=1&amp;scene=1&amp;srcid=0525XIl8KXvHYvX42oaUcop0#rd\">https://mp.weixin.qq.com/s?__biz=MzI4NTA1MDEwNg==&amp;mid=2650763383&amp;idx=1&amp;sn=348a84605a7cdefe4e075c9f0310f257&amp;chksm=f3f9c5e2c48e4cf41bd3f708bce3f9a1302a699cf7defe611e9aea120fcb424944119e079362&amp;mpshare=1&amp;scene=1&amp;srcid=0525XIl8KXvHYvX42oaUcop0#rd</a></p>\n<p><a href=\"https://blog.csdn.net/tonyxf121/article/details/8475603\">https://blog.csdn.net/tonyxf121/article/details/8475603</a></p>\n<p><a href=\"http://heylinux.com/archives/1932.html\">http://heylinux.com/archives/1932.html</a></p>\n<p><a href=\"https://www.m690.com/archives/380/\">https://www.m690.com/archives/380/</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114093\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114093votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114093\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg"},{"title": "分布式之消息队列复习精讲", "url": "http://blog.jobbole.com/114016/", "url_object_id": "1b36123333a36dfc38deb859d6cb3ce6", "create_date": "2018/05/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": 7, "tags": "IT技术,分布式,数据库", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/rjzheng/p/8994962.html\">孤独烟</a>   </div><h2 id=\"引言\">引言</h2>\n<h3 id=\"为什么写这篇文章\">为什么写这篇文章?</h3>\n<p>博主有两位朋友分别是小A和小B:</p>\n<ol>\n<li>小A，工作于传统软件行业(某社保局的软件外包公司)，每天工作内容就是和产品聊聊需求，改改业务逻辑。再不然就是和运营聊聊天，写几个SQL，生成下报表。又或者接到客服的通知，某某功能故障了，改改数据，然后下班部署上线。每天过的都是这种生活，技术零成长。</li>\n<li>小B，工作于某国企，虽然能接触到一些中间件技术。然而，他只会订阅/发布消息。通俗点说，就是调调API。对为什么使用这些中间件啊？如何保证高可用啊？没有充分的认识。</li>\n</ol>\n<p>庆幸的是两位朋友都很有上进心，于是博主写这篇文章，帮助他们复习一下关于消息队列中间件这块的要点</p>\n<h3 id=\"复习要点\">复习要点</h3>\n<p>本文大概围绕如下几点进行阐述:</p>\n<ol>\n<li>为什么使用消息队列？</li>\n<li>使用消息队列有什么缺点?</li>\n<li>消息队列如何选型?</li>\n<li>如何保证消息队列是高可用的？</li>\n<li>如何保证消息不被重复消费?</li>\n<li>如何保证消费的可靠性传输?</li>\n<li>如何保证消息的顺序性？</li>\n</ol>\n<p>我们围绕以上七点进行阐述。需要说明一下，本文不是《消息队列从入门到精通》这种课程，因此只是提供一个复习思路，而不是去教你们怎么调用消息队列的API。建议对消息队列不了解的人，去找点消息队列的博客看看，再看本文，收获更大</p>\n<h2 id=\"正文\">正文</h2>\n<h3 id=\"为什么要使用消息队列\">1、为什么要使用消息队列?</h3>\n<p><strong>分析</strong>:一个用消息队列的人，不知道为啥用，这就有点尴尬。没有复习这点，很容易被问蒙，然后就开始胡扯了。<br>\n<strong>回答</strong>:这个问题,咱只答三个最主要的应用场景(不可否认还有其他的，但是只答三个主要的),即以下六个字:<strong>解耦、异步、削峰</strong></p>\n<h4 id=\"解耦\">(1)解耦</h4>\n<p><strong>传统模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/56e7aff9d63f0f4383fa069aa8c8bfb2.png\"><br>\n传统模式的缺点：</p>\n<ul>\n<li>系统间耦合性太强，如上图所示，系统A在代码中直接调用系统B和系统C的代码，如果将来D系统接入，系统A还需要修改代码，过于麻烦！</li>\n</ul>\n<p><strong>中间件模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/58111d7a4fd8b531bfc034f708a16660.png\"><br>\n中间件模式的的优点：</p>\n<ul>\n<li>将消息写入消息队列，需要消息的系统自己从消息队列中订阅，从而系统A不需要做任何修改。</li>\n</ul>\n<h4 id=\"异步\">(2)异步</h4>\n<p><strong>传统模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f143f69236fa3ea412679f166b018249.png\"><br>\n传统模式的缺点：</p>\n<ul>\n<li>一些非必要的业务逻辑以同步的方式运行，太耗费时间。</li>\n</ul>\n<p><strong>中间件模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/16ac587309c929e6b286d00eed9723f5.png\"><br>\n中间件模式的的优点：</p>\n<ul>\n<li>将消息写入消息队列，非必要的业务逻辑以异步的方式运行，加快响应速度</li>\n</ul>\n<h4 id=\"削峰\">(3)削峰</h4>\n<p><strong>传统模式</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a25d591aad6af8be2af03281b0648dbe.png\"><br>\n传统模式的缺点：</p>\n<ul>\n<li>并发量大的时候，所有的请求直接怼到数据库，造成数据库连接异常</li>\n</ul>\n<p><strong>中间件模式:</strong><br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1e39849ee5829567e914ccf126e058ae.png\"><br>\n中间件模式的的优点：</p>\n<ul>\n<li>系统A慢慢的按照数据库能处理的并发量，从消息队列中慢慢拉取消息。在生产中，这个短暂的高峰期积压是允许的。</li>\n</ul>\n<h3 id=\"使用了消息队列会有什么缺点\">2、使用了消息队列会有什么缺点?</h3>\n<p><strong>分析</strong>:一个使用了MQ的项目，如果连这个问题都没有考虑过，就把MQ引进去了，那就给自己的项目带来了风险。我们引入一个技术，要对这个技术的弊端有充分的认识，才能做好预防。<strong>要记住，不要给公司挖坑！</strong><br>\n<strong>回答</strong>:回答也很容易，从以下两个个角度来答</p>\n<ul>\n<li><strong>系统可用性降低</strong>:你想啊，本来其他系统只要运行好好的，那你的系统就是正常的。现在你非要加个消息队列进去，那消息队列挂了，你的系统不是呵呵了。因此，系统可用性降低</li>\n<li><strong>系统复杂性增加</strong>:要多考虑很多方面的问题，比如一致性问题、如何保证消息不被重复消费，如何保证保证消息可靠传输。因此，需要考虑的东西更多，系统复杂性增大。</li>\n</ul>\n<p>但是，我们该用还是要用的。</p>\n<h3 id=\"消息队列如何选型\">3、消息队列如何选型?</h3>\n<p>先说一下，博主只会ActiveMQ,RabbitMQ,RocketMQ,Kafka，对什么ZeroMQ等其他MQ没啥理解，因此只能基于这四种MQ给出回答。<br>\n<strong>分析</strong>:既然在项目中用了MQ，肯定事先要对业界流行的MQ进行调研，如果连每种MQ的优缺点都没了解清楚，就拍脑袋依据喜好，用了某种MQ，还是给项目挖坑。如果面试官问:”你为什么用这种MQ？。”你直接回答”领导决定的。”这种回答就很LOW了。<strong>还是那句话，不要给公司挖坑。</strong><br>\n<strong>回答</strong>:首先，咱先上<a href=\"http://activemq.apache.org/\">ActiveMQ的社区</a>，看看该MQ的更新频率:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0f1b537528071572\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nApache ActiveMQ 5.15.3 Release\r\nChristopher L. Shannon posted on Feb 12, 2018\r\nApache ActiveMQ 5.15.2 Released\r\nChristopher L. Shannon posted on Oct 23, 2017\r\nApache ActiveMQ 5.15.0 Released\r\nChristopher L. Shannon posted on Jul 06, 2017\r\n省略以下记录\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b537528071572-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b537528071572-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b537528071572-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b537528071572-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b537528071572-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b537528071572-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b537528071572-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b537528071572-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0f1b537528071572-1\"><span class=\"crayon-e\">Apache </span><span class=\"crayon-i\">ActiveMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.15.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Release</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b537528071572-2\"><span class=\"crayon-i\">Christopher</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">L</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Shannon </span><span class=\"crayon-e\">posted </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">Feb</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b537528071572-3\"><span class=\"crayon-e\">Apache </span><span class=\"crayon-i\">ActiveMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.15.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Released</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b537528071572-4\"><span class=\"crayon-i\">Christopher</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">L</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Shannon </span><span class=\"crayon-e\">posted </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b537528071572-5\"><span class=\"crayon-e\">Apache </span><span class=\"crayon-i\">ActiveMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.15.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Released</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b537528071572-6\"><span class=\"crayon-i\">Christopher</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">L</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Shannon </span><span class=\"crayon-e\">posted </span><span class=\"crayon-e\">on </span><span class=\"crayon-i\">Jul</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b537528071572-7\">省略以下记录</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b537528071572-8\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>我们可以看出，ActiveMq几个月才发一次版本，据说研究重心在他们的下一代产品Apollo。<br>\n接下来，我们再去<a href=\"http://www.rabbitmq.com/\">RabbitMQ的社区</a>去看一下,RabbitMQ的更新频率</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0f1b540151484467\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nRabbitMQ 3.7.3 release  30 January 2018\r\nRabbitMQ 3.6.15 release  17 January 2018\r\nRabbitMQ 3.7.2 release23 December 2017\r\nRabbitMQ 3.7.1 release21 December 2017\r\n省略以下记录\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b540151484467-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b540151484467-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b540151484467-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b540151484467-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b540151484467-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b540151484467-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0f1b540151484467-1\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">release</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">January</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b540151484467-2\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.6.15</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">release</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">January</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b540151484467-3\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">release23 </span><span class=\"crayon-i\">December</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b540151484467-4\"><span class=\"crayon-i\">RabbitMQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.7.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">release21 </span><span class=\"crayon-i\">December</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b540151484467-5\">省略以下记录</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b540151484467-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>我们可以看出，RabbitMQ版本发布比ActiveMq频繁很多。至于RocketMQ和kafka就不带大家看了，总之也比ActiveMQ活跃的多。详情，可自行查阅。<br>\n再来一个性能对比表</p>\n<table>\n<thead>\n<tr>\n<th>特性</th>\n<th>ActiveMQ</th>\n<th>RabbitMQ</th>\n<th>RocketMQ</th>\n<th>kafka</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>开发语言</td>\n<td>java</td>\n<td>erlang</td>\n<td>java</td>\n<td>scala</td>\n</tr>\n<tr>\n<td>单机吞吐量</td>\n<td>万级</td>\n<td>万级</td>\n<td>10万级</td>\n<td>10万级</td>\n</tr>\n<tr>\n<td>时效性</td>\n<td>ms级</td>\n<td>us级</td>\n<td>ms级</td>\n<td>ms级以内</td>\n</tr>\n<tr>\n<td>可用性</td>\n<td>高(主从架构)</td>\n<td>高(主从架构)</td>\n<td>非常高(分布式架构)</td>\n<td>非常高(分布式架构)</td>\n</tr>\n<tr>\n<td>功能特性</td>\n<td>成熟的产品，在很多公司得到应用；有较多的文档；各种协议支持较好</td>\n<td>基于erlang开发，所以并发能力很强，性能极其好，延时很低;管理界面较丰富</td>\n<td>MQ功能比较完备，扩展性佳</td>\n<td>只支持主要的MQ功能，像一些消息查询，消息回溯等功能没有提供，毕竟是为大数据准备的，在大数据领域应用广。</td>\n</tr>\n</tbody>\n</table>\n<p>综合上面的材料得出以下两点:<br>\n(1)中小型软件公司，建议选RabbitMQ.一方面，erlang语言天生具备高并发的特性，而且他的管理界面用起来十分方便。正所谓，成也萧何，败也萧何！他的弊端也在这里，虽然RabbitMQ是开源的，然而国内有几个能定制化开发erlang的程序员呢？所幸，RabbitMQ的社区十分活跃，可以解决开发过程中遇到的bug，这点对于中小型公司来说十分重要。不考虑rocketmq和kafka的原因是，一方面中小型软件公司不如互联网公司，数据量没那么大，选消息中间件，应首选功能比较完备的，所以kafka排除。不考虑rocketmq的原因是，rocketmq是阿里出品，如果阿里放弃维护rocketmq，中小型公司一般抽不出人来进行rocketmq的定制化开发，因此不推荐。<br>\n(2)大型软件公司，根据具体使用在rocketMq和kafka之间二选一。一方面，大型软件公司，具备足够的资金搭建分布式环境，也具备足够大的数据量。针对rocketMQ,大型软件公司也可以抽出人手对rocketMQ进行定制化开发，毕竟国内有能力改JAVA源码的人，还是相当多的。至于kafka，根据业务场景选择，如果有日志采集功能，肯定是首选kafka了。具体该选哪个，看使用场景。</p>\n<h3 id=\"如何保证消息队列是高可用的\">4、如何保证消息队列是高可用的？</h3>\n<p><strong>分析</strong>:在第二点说过了，引入消息队列后，系统的可用性下降。在生产中，没人使用单机模式的消息队列。因此，作为一个合格的程序员，应该对消息队列的高可用有很深刻的了解。如果面试的时候，面试官问，你们的消息中间件如何保证高可用的？你的回答只是表明自己只会订阅和发布消息，面试官就会怀疑你是不是只是自己搭着玩，压根没在生产用过。<strong>请做一个爱思考，会思考，懂思考的程序员。</strong><br>\n<strong>回答</strong>:这问题，其实要对消息队列的集群模式要有深刻了解，才好回答。<br>\n以rcoketMQ为例，他的集群就有多master 模式、多master多slave异步复制模式、多 master多slave同步双写模式。多master多slave模式部署架构图(网上找的,偷个懒，懒得画):<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b80ee0d20718dbdd97cf522295312787.png\" alt=\"image\"><br>\n其实博主第一眼看到这个图，就觉得和kafka好像，只是NameServer集群，在kafka中是用zookeeper代替，都是用来保存和发现master和slave用的。通信过程如下:<br>\nProducer 与 NameServer集群中的其中一个节点（随机选择）建立长连接，定期从 NameServer 获取 Topic 路由信息，并向提供 Topic 服务的 Broker Master 建立长连接，且定时向 Broker 发送心跳。Producer 只能将消息发送到 Broker master，但是 Consumer 则不一样，它同时和提供 Topic 服务的 Master 和 Slave建立长连接，既可以从 Broker Master 订阅消息，也可以从 Broker Slave 订阅消息。<br>\n那么kafka呢,为了对比说明直接上kafka的拓补架构图(也是找的，懒得画)<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7a938865203b9c2ff91a37429991b9a6.png\" alt=\"image\"><br>\n如上图所示，一个典型的Kafka集群中包含若干Producer（可以是web前端产生的Page View，或者是服务器日志，系统CPU、Memory等），若干broker（Kafka支持水平扩展，一般broker数量越多，集群吞吐率越高），若干Consumer Group，以及一个Zookeeper集群。Kafka通过Zookeeper管理集群配置，选举leader，以及在Consumer Group发生变化时进行rebalance。Producer使用push模式将消息发布到broker，Consumer使用pull模式从broker订阅并消费消息。<br>\n至于rabbitMQ,也有普通集群和镜像集群模式，自行去了解，比较简单，两小时即懂。<br>\n要求，在回答高可用的问题时，应该能逻辑清晰的画出自己的MQ集群架构或清晰的叙述出来。</p>\n<h3 id=\"如何保证消息不被重复消费\">5、如何保证消息不被重复消费？</h3>\n<p><strong>分析</strong>:这个问题其实换一种问法就是，如何保证消息队列的幂等性?这个问题可以认为是消息队列领域的基本问题。换句话来说，是在考察你的设计能力，这个问题的回答可以根据具体的业务场景来答，没有固定的答案。<br>\n<strong>回答</strong>:先来说一下为什么会造成重复消费?<br>\n其实无论是那种消息队列，造成重复消费原因其实都是类似的。正常情况下，消费者在消费消息时候，消费完毕后，会发送一个确认信息给消息队列，消息队列就知道该消息被消费了，就会将该消息从消息队列中删除。只是不同的消息队列发送的确认信息形式不同,例如RabbitMQ是发送一个ACK确认消息，RocketMQ是返回一个CONSUME_SUCCESS成功标志，kafka实际上有个offset的概念，简单说一下(如果还不懂，出门找一个kafka入门到精通教程),就是每一个消息都有一个offset，kafka消费过消息后，需要提交offset，让消息队列知道自己已经消费过了。那造成重复消费的原因?，就是因为网络传输等等故障，确认信息没有传送到消息队列，导致消息队列不知道自己已经消费过该消息了，再次将该消息分发给其他的消费者。<br>\n如何解决?这个问题针对业务场景来答分以下几点<br>\n(1)比如，你拿到这个消息做数据库的insert操作。那就容易了，给这个消息做一个唯一主键，那么就算出现重复消费的情况，就会导致主键冲突，避免数据库出现脏数据。<br>\n(2)再比如，你拿到这个消息做redis的set的操作，那就容易了，不用解决，因为你无论set几次结果都是一样的，set操作本来就算幂等操作。<br>\n(3)如果上面两种情况还不行，上大招。准备一个第三方介质,来做消费记录。以redis为例，给消息分配一个全局id，只要消费过该消息，将&lt;id,message&gt;以K-V形式写入redis。那消费者开始消费前，先去redis中查询有没消费记录即可。</p>\n<h3 id=\"如何保证消费的可靠性传输\">6、如何保证消费的可靠性传输?</h3>\n<p><strong>分析</strong>:我们在使用消息队列的过程中，应该做到消息不能多消费，也不能少消费。如果无法做到可靠性传输，可能给公司带来千万级别的财产损失。同样的，如果可靠性传输在使用过程中，没有考虑到，这不是给公司挖坑么，你可以拍拍屁股走了，公司损失的钱，谁承担。还是那句话，<strong>认真对待每一个项目，不要给公司挖坑。</strong><br>\n<strong>回答</strong>:其实这个可靠性传输，每种MQ都要从三个角度来分析:生产者弄丢数据、消息队列弄丢数据、消费者弄丢数据</p>\n<h4 id=\"rabbitmq\">RabbitMQ</h4>\n<p><strong>(1)生产者丢数据</strong><br>\n从生产者弄丢数据这个角度来看，RabbitMQ提供transaction和confirm模式来确保生产者不丢消息。<br>\ntransaction机制就是说，发送消息前，开启事物(channel.txSelect())，然后发送消息，如果发送过程中出现什么异常，事物就会回滚(channel.txRollback())，如果发送成功则提交事物(channel.txCommit())。<br>\n然而缺点就是吞吐量下降了。因此，按照博主的经验，生产上用confirm模式的居多。一旦channel进入confirm模式，所有在该信道上面发布的消息都将会被指派一个唯一的ID(从1开始)，一旦消息被投递到所有匹配的队列之后，rabbitMQ就会发送一个Ack给生产者(包含消息的唯一ID)，这就使得生产者知道消息已经正确到达目的队列了.如果rabiitMQ没能处理该消息，则会发送一个Nack消息给你，你可以进行重试操作。处理Ack和Nack的代码如下所示（说好不上代码的，偷偷上了）:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0f1b54a978673957\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nchannel.addConfirmListener(new ConfirmListener() {  \r\n                &lt;a href=\"http://www.jobbole.com/members/wx610506454\"&gt;@Override&lt;/a&gt;  \r\n                public void handleNack(long deliveryTag, boolean multiple) throws IOException {  \r\n                    System.out.println(\"nack: deliveryTag = \"+deliveryTag+\" multiple: \"+multiple);  \r\n                }  \r\n                &lt;a href=\"http://www.jobbole.com/members/wx610506454\"&gt;@Override&lt;/a&gt;  \r\n                public void handleAck(long deliveryTag, boolean multiple) throws IOException {  \r\n                    System.out.println(\"ack: deliveryTag = \"+deliveryTag+\" multiple: \"+multiple);  \r\n                }  \r\n            });  </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b54a978673957-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b54a978673957-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b54a978673957-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b54a978673957-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b54a978673957-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b54a978673957-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b54a978673957-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b54a978673957-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0f1b54a978673957-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0f1b54a978673957-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0f1b54a978673957-1\"><span class=\"crayon-v\">channel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addConfirmListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ConfirmListener</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b54a978673957-2\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx610506454\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b54a978673957-3\"><span class=\"crayon-h\">                </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleNack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b54a978673957-4\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"nack: deliveryTag = \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\" multiple: \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b54a978673957-5\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b54a978673957-6\"><span class=\"crayon-h\">                </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/wx610506454\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b54a978673957-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">handleAck</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">boolean</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IOException</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b54a978673957-8\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ack: deliveryTag = \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">deliveryTag</span><span class=\"crayon-o\">+</span><span class=\"crayon-s\">\" multiple: \"</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">multiple</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0f1b54a978673957-9\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0f1b54a978673957-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p><strong>(2)消息队列丢数据</strong><br>\n处理消息队列丢数据的情况，一般是开启持久化磁盘的配置。这个持久化配置可以和confirm机制配合使用，你可以在消息持久化磁盘后，再给生产者发送一个Ack信号。这样，如果消息持久化磁盘之前，rabbitMQ阵亡了，那么生产者收不到Ack信号，生产者会自动重发。<br>\n那么如何持久化呢，这里顺便说一下吧，其实也很容易，就下面两步<br>\n1、将queue的持久化标识durable设置为true,则代表是一个持久的队列<br>\n2、发送消息的时候将deliveryMode=2<br>\n这样设置以后，rabbitMQ就算挂了，重启后也能恢复数据<br>\n<strong>(3)消费者丢数据</strong><br>\n消费者丢数据一般是因为采用了自动确认消息模式。这种模式下，消费者会自动确认收到信息。这时rahbitMQ会立即将消息删除，这种情况下如果消费者出现异常而没能处理该消息，就会丢失该消息。<br>\n至于解决方案，采用手动确认消息即可。</p>\n<h4 id=\"kafka\">kafka</h4>\n<p>这里先引一张kafka Replication的<a href=\"http://www.infoq.com/cn/articles/kafka-analysis-part-2/\">数据流向图</a><br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/aa0ea1ebe9e63e04c033e8544bf8e944.png\" alt=\"image\"><br>\nProducer在发布消息到某个Partition时，先通过ZooKeeper找到该Partition的Leader，然后无论该Topic的Replication Factor为多少（也即该Partition有多少个Replica），Producer只将该消息发送到该Partition的Leader。Leader会将该消息写入其本地Log。每个Follower都从Leader中pull数据。<br>\n针对上述情况，得出如下分析<br>\n<strong>(1)生产者丢数据</strong><br>\n在kafka生产中，基本都有一个leader和多个follwer。follwer会去同步leader的信息。因此，为了避免生产者丢数据，做如下两点配置</p>\n<ol>\n<li>第一个配置要在producer端设置acks=all。这个配置保证了，follwer同步完成后，才认为消息发送成功。</li>\n<li>在producer端设置retries=MAX，一旦写入失败，这无限重试</li>\n</ol>\n<p><strong>(2)消息队列丢数据</strong><br>\n针对消息队列丢数据的情况，无外乎就是，数据还没同步，leader就挂了，这时zookpeer会将其他的follwer切换为leader,那数据就丢失了。针对这种情况，应该做两个配置。</p>\n<ol>\n<li>replication.factor参数，这个值必须大于1，即要求每个partition必须有至少2个副本</li>\n<li>min.insync.replicas参数，这个值必须大于1，这个是要求一个leader至少感知到有至少一个follower还跟自己保持联系</li>\n</ol>\n<p>这两个配置加上上面生产者的配置联合起来用，基本可确保kafka不丢数据</p>\n<p><strong>(3)消费者丢数据</strong><br>\n这种情况一般是自动提交了offset，然后你处理程序过程中挂了。kafka以为你处理好了。再强调一次offset是干嘛的<br>\n<strong>offset</strong>：指的是kafka的topic中的每个消费组消费的下标。简单的来说就是一条消息对应一个offset下标，每次消费数据的时候如果提交offset，那么下次消费就会从提交的offset加一那里开始消费。<br>\n比如一个topic中有100条数据，我消费了50条并且提交了，那么此时的kafka服务端记录提交的offset就是49(offset从0开始)，那么下次消费的时候offset就从50开始消费。<br>\n解决方案也很简单，改成手动提交即可。</p>\n<h4 id=\"activemq和rocketmq\">ActiveMQ和RocketMQ</h4>\n<p>大家自行查阅吧</p>\n<h3 id=\"如何保证消息的顺序性\">7、如何保证消息的顺序性？</h3>\n<p><strong>分析</strong>:其实并非所有的公司都有这种业务需求，但是还是对这个问题要有所复习。<br>\n<strong>回答</strong>:针对这个问题，通过某种算法，将需要保持先后顺序的消息放到同一个消息队列中(kafka中就是partition,rabbitMq中就是queue)。然后只用一个消费者去消费该队列。<br>\n有的人会问:那如果为了吞吐量，有多个消费者去消费怎么办？<br>\n这个问题，没有固定回答的套路。比如我们有一个微博的操作，发微博、写评论、删除微博，这三个异步操作。如果是这样一个业务场景，那只要重试就行。比如你一个消费者先执行了写评论的操作，但是这时候，微博都还没发，写评论一定是失败的，等一段时间。等另一个消费者，先执行写评论的操作后，再执行，就可以成功。<br>\n总之，针对这个问题，我的观点是保证入队有序就行，出队以后的顺序交给消费者自己去保证，没有固定套路。</p>\n<h2 id=\"总结\">总结</h2>\n<p>写到这里，希望读者把本文提出的这几个问题，经过深刻的准备后，一般来说，能囊括大部分的消息队列的知识点。如果面试官不问这几个问题怎么办，简单，自己把几个问题讲清楚，突出以下自己考虑的全面性。<br>\n最后，其实我不太提倡这样突击复习，希望大家打好基本功，<strong>做一个爱思考，懂思考，会思考的程序员</strong>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114016\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114016votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114016\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg"},{"title": "分布式之数据库和缓存双写一致性方案解析", "url": "http://blog.jobbole.com/113992/", "url_object_id": "97dd29d801309a1f0316b5b23e4fbb18", "create_date": "2018/05/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 0, "tags": "IT技术,分布式,数据库", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/rjzheng/p/9041659.html\">孤独烟</a>   </div><h2 id=\"引言\">引言</h2>\n<h3 id=\"为什么写这篇文章\">为什么写这篇文章？</h3>\n<p>首先，缓存由于其高并发和高性能的特性，已经在项目中被广泛使用。在读取缓存方面，大家没啥疑问，都是按照下图的流程来进行业务操作。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/efb54ba1306999e884c5f44d35db7380.png\" alt=\"image\"><br>\n但是在更新缓存方面，对于更新完数据库，是更新缓存呢，还是删除缓存。又或者是先删除缓存，再更新数据库，其实大家存在很大的争议。目前没有一篇全面的博客，对这几种方案进行解析。于是博主战战兢兢，顶着被大家喷的风险，写了这篇文章。</p>\n<h3 id=\"文章结构\">文章结构</h3>\n<p>本文由以下三个部分组成<br>\n1、讲解缓存更新策略<br>\n2、对每种策略进行缺点分析<br>\n3、针对缺点给出改进方案</p>\n<h2 id=\"正文\">正文</h2>\n<p>先做一个说明，从理论上来说，给缓存设置过期时间，是保证最终一致性的解决方案。这种方案下，我们可以对存入缓存的数据设置过期时间，所有的写操作以数据库为准，对缓存操作只是尽最大努力即可。也就是说如果数据库写成功，缓存更新失败，那么只要到达过期时间，则后面的读请求自然会从数据库中读取新值然后回填缓存。因此，接下来讨论的思路不依赖于给缓存设置过期时间这个方案。<br>\n在这里，我们讨论<strong>三种</strong>更新策略：</p>\n<ol>\n<li>先更新数据库，再更新缓存</li>\n<li>先删除缓存，再更新数据库</li>\n<li>先更新数据库，再删除缓存</li>\n</ol>\n<p>应该没人问我，为什么没有先更新缓存，再更新数据库这种策略。</p>\n<h3 id=\"先更新数据库再更新缓存\">(1)先更新数据库，再更新缓存</h3>\n<p>这套方案，大家是普遍反对的。为什么呢？有如下两点原因。<br>\n<strong>原因一（线程安全角度）</strong><br>\n同时有请求A和请求B进行更新操作，那么会出现<br>\n（1）线程A更新了数据库<br>\n（2）线程B更新了数据库<br>\n（3）线程B更新了缓存<br>\n（4）线程A更新了缓存<br>\n这就出现请求A更新缓存应该比请求B更新缓存早才对，但是因为网络等原因，B却比A更早更新了缓存。这就导致了脏数据，因此不考虑。<br>\n<strong>原因二（业务场景角度）</strong><br>\n有如下两点：<br>\n（1）如果你是一个写数据库场景比较多，而读数据场景比较少的业务需求，采用这种方案就会导致，数据压根还没读到，缓存就被频繁的更新，浪费性能。<br>\n（2）如果你写入数据库的值，并不是直接写入缓存的，而是要经过一系列复杂的计算再写入缓存。那么，每次写入数据库后，都再次计算写入缓存的值，无疑是浪费性能的。显然，删除缓存更为适合。</p>\n<p>接下来讨论的就是争议最大的，先删缓存，再更新数据库。还是先更新数据库，再删缓存的问题。</p>\n<h3 id=\"先删缓存再更新数据库\">(2)先删缓存，再更新数据库</h3>\n<p>该方案会导致不一致的原因是。同时有一个请求A进行更新操作，另一个请求B进行查询操作。那么会出现如下情形:<br>\n（1）请求A进行写操作，删除缓存<br>\n（2）请求B查询发现缓存不存在<br>\n（3）请求B去数据库查询得到旧值<br>\n（4）请求B将旧值写入缓存<br>\n（5）请求A将新值写入数据库<br>\n上述情况就会导致不一致的情形出现。而且，如果不采用给缓存设置过期时间策略，该数据永远都是脏数据。<br>\n那么，<strong>如何解决呢？采用延时双删策略</strong><br>\n伪代码如下</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be107c872027328196\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic void write(String key,Object data){\r\n        redis.delKey(key);\r\n        db.updateData(data);\r\n        Thread.sleep(1000);\r\n        redis.delKey(key);\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be107c872027328196-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be107c872027328196-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be107c872027328196-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be107c872027328196-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be107c872027328196-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be107c872027328196-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be107c872027328196-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-t\">Object</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be107c872027328196-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be107c872027328196-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">updateData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be107c872027328196-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">Thread</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be107c872027328196-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delKey</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be107c872027328196-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p>转化为中文描述就是<br>\n（1）先淘汰缓存<br>\n（2）再写数据库（这两步和原来一样）<br>\n（3）休眠1秒，再次淘汰缓存<br>\n这么做，可以将1秒内所造成的缓存脏数据，再次删除。<br>\n<strong>那么，这个1秒怎么确定的，具体该休眠多久呢？</strong><br>\n针对上面的情形，读者应该自行评估自己的项目的读数据业务逻辑的耗时。然后写数据的休眠时间则在读数据业务逻辑的耗时基础上，加几百ms即可。这么做的目的，就是确保读请求结束，写请求可以删除读请求造成的缓存脏数据。<br>\n<strong>如果你用了mysql的读写分离架构怎么办？</strong><br>\nok，在这种情况下，造成数据不一致的原因如下，还是两个请求，一个请求A进行更新操作，另一个请求B进行查询操作。<br>\n（1）请求A进行写操作，删除缓存<br>\n（2）请求A将数据写入数据库了，<br>\n（3）请求B查询缓存发现，缓存没有值<br>\n（4）请求B去从库查询，这时，还没有完成主从同步，因此查询到的是旧值<br>\n（5）请求B将旧值写入缓存<br>\n（6）数据库完成主从同步，从库变为新值<br>\n上述情形，就是数据不一致的原因。还是使用双删延时策略。只是，睡眠时间修改为在主从同步的延时时间基础上，加几百ms。<br>\n<strong>采用这种同步淘汰策略，吞吐量降低怎么办？</strong><br>\nok，那就将第二次删除作为异步的。自己起一个线程，异步删除。这样，写的请求就不用沉睡一段时间后了，再返回。这么做，加大吞吐量。<br>\n<strong>第二次删除,如果删除失败怎么办？</strong><br>\n这是个非常好的问题，因为第二次删除失败，就会出现如下情形。还是有两个请求，一个请求A进行更新操作，另一个请求B进行查询操作，为了方便，假设是单库：<br>\n（1）请求A进行写操作，删除缓存<br>\n（2）请求B查询发现缓存不存在<br>\n（3）请求B去数据库查询得到旧值<br>\n（4）请求B将旧值写入缓存<br>\n（5）请求A将新值写入数据库<br>\n（6）请求A试图去删除请求B写入对缓存值，结果失败了。<br>\nok,这也就是说。如果第二次删除缓存失败，会再次出现缓存和数据库不一致的问题。<br>\n<strong>如何解决呢？</strong><br>\n具体解决方案，且看博主对第(3)种更新策略的解析。</p>\n<h3 id=\"先更新数据库再删缓存\">(3)先更新数据库，再删缓存</h3>\n<p>首先，先说一下。老外提出了一个缓存更新套路，名为<a href=\"https://docs.microsoft.com/en-us/azure/architecture/patterns/cache-aside\">《Cache-Aside pattern》</a>。其中就指出</p>\n<ul>\n<li><strong>失效</strong>：应用程序先从cache取数据，没有得到，则从数据库中取数据，成功后，放到缓存中。</li>\n<li><strong>命中</strong>：应用程序从cache中取数据，取到后返回。</li>\n<li><strong>更新</strong>：先把数据存到数据库中，成功后，再让缓存失效。</li>\n</ul>\n<p>另外，知名社交网站facebook也在论文<a href=\"https://www.usenix.org/system/files/conference/nsdi13/nsdi13-final170_update.pdf\">《Scaling Memcache at Facebook》</a>中提出，他们用的也是先更新数据库，再删缓存的策略。<br>\n<strong>这种情况不存在并发问题么？</strong><br>\n不是的。假设这会有两个请求，一个请求A做查询操作，一个请求B做更新操作，那么会有如下情形产生<br>\n（1）缓存刚好失效<br>\n（2）请求A查询数据库，得一个旧值<br>\n（3）请求B将新值写入数据库<br>\n（4）请求B删除缓存<br>\n（5）请求A将查到的旧值写入缓存<br>\nok，如果发生上述情况，确实是会发生脏数据。<br>\n<strong>然而，发生这种情况的概率又有多少呢？</strong><br>\n发生上述情况有一个先天性条件，就是步骤（3）的写数据库操作比步骤（2）的读数据库操作耗时更短，才有可能使得步骤（4）先于步骤（5）。可是，大家想想，数据库的读操作的速度远快于写操作的（不然做读写分离干嘛，做读写分离的意义就是因为读操作比较快，耗资源少），因此步骤（3）耗时比步骤（2）更短，这一情形很难出现。<br>\n假设，有人非要抬杠，有强迫症，一定要解决怎么办？<br>\n<strong>如何解决上述并发问题？</strong><br>\n首先，给缓存设有效时间是一种方案。其次，采用策略（2）里给出的异步延时删除策略，保证读请求完成以后，再进行删除操作。<br>\n<strong>还有其他造成不一致的原因么？</strong><br>\n有的，这也是缓存更新策略（2）和缓存更新策略（3）都存在的一个问题，如果删缓存失败了怎么办，那不是会有不一致的情况出现么。比如一个写数据请求，然后写入数据库了，删缓存失败了，这会就出现不一致的情况了。这也是缓存更新策略（2）里留下的最后一个疑问。<br>\n<strong>如何解决？</strong><br>\n提供一个保障的重试机制即可，这里给出两套方案。<br>\n<strong>方案一</strong>：<br>\n如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e74363356412a2063817224f814e7972.png\" alt=\"image\"><br>\n流程如下所示<br>\n（1）更新数据库数据；<br>\n（2）缓存因为种种问题删除失败<br>\n（3）将需要删除的key发送至消息队列<br>\n（4）自己消费消息，获得需要删除的key<br>\n（5）继续重试删除操作，直到成功<br>\n然而，该方案有一个缺点，对业务线代码造成大量的侵入。于是有了方案二，在方案二中，启动一个订阅程序去订阅数据库的binlog，获得需要操作的数据。在应用程序中，另起一段程序，获得这个订阅程序传来的信息，进行删除缓存操作。<br>\n<strong>方案二</strong>：<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/771c3424c83f1059ce967f769dea20ae.png\" alt=\"image\"><br>\n流程如下图所示：<br>\n（1）更新数据库数据<br>\n（2）数据库会将操作信息写入binlog日志当中<br>\n（3）订阅程序提取出所需要的数据以及key<br>\n（4）另起一段非业务代码，获得该信息<br>\n（5）尝试删除缓存操作，发现删除失败<br>\n（6）将这些信息发送至消息队列<br>\n（7）重新从消息队列中获得该数据，重试操作。</p>\n<p><strong>备注说明：</strong>上述的订阅binlog程序在mysql中有现成的中间件叫canal，可以完成订阅binlog日志的功能。至于oracle中，博主目前不知道有没有现成中间件可以使用。另外，重试机制，博主是采用的是消息队列的方式。如果对一致性要求不是很高，直接在程序中另起一个线程，每隔一段时间去重试即可，这些大家可以灵活自由发挥，只是提供一个思路。</p>\n<h2 id=\"总结\">总结</h2>\n<p>本文其实是对目前互联网中已有的一致性方案，进行了一个总结。对于先删缓存，再更新数据库的更新策略，还有方案提出维护一个内存队列的方式，博主看了一下，觉得实现异常复杂，没有必要，因此没有必要在文中给出。最后，希望大家有所收获。</p>\n<h2 id=\"参考文献\">参考文献</h2>\n<p>1、<a href=\"https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=404308725&amp;idx=1&amp;sn=1a25ce76dd1956014ceb8a011855268e&amp;scene=21#wechat_redirect\">主从DB与cache一致性</a><br>\n2、<a href=\"https://coolshell.cn/articles/17416.html\">缓存更新的套路</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113992\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113992votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113992\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg"},{"title": "我曾误删了公司的数据库，但还是活下来了", "url": "http://blog.jobbole.com/113909/", "url_object_id": "e471e2a60cb82e666c724e013e14e93b", "create_date": "2018/04/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2011/12/i-accidentally-deleted-all-our-data.jpg"], "praise_nums": "1", "comment_nums": 4, "fav_nums": 1, "tags": "IT技术,数据库", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/the-times-ive-messed-up-as-a-developer-3c0bcaa1afd6\">Zachary Kuhn</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5129182.html\">36氪</a>   </div><p>上周我与同事们进行了一次关于职业生涯中搞砸了一些事情的简短谈话。这确实会沦为他人笑柄，却更给我们带来了珍贵的教训。重要的是，我们应该分享那些曾经的错误，这样其他人就可以从其中学习。下文是最近在我身上发生的例子。</p>\n<h3>为什么有如此多误删生产数据库的事情发生？</h3>\n<p>几个月前，Reddit上有<a href=\"https://www.reddit.com/r/cscareerquestions/comments/6ez8ag/accidentally_destroyed_production_database_on/\">一篇文章</a>，讲了一名初级开发人员在上班的第一天就删除了生产数据库的事。我们都很憷于读到这类犯了这类无法让人忘却的大错误的文章。因为我们离这些也不远，而大多数人都是“死里逃生”。</p>\n<p>在我的第一份工作中，一位高级数据库管理员在上班第一天就误删了生产数据库。这类故事情节比比皆是。这个团队从一个星期的备份中恢复了他导致的错误，并让他继续工作。十年后，他们依然将其作为笑点。</p>\n<p>今年早些时候，我被派去检查一个客户的生产数据上的问题。他们进行了小范围的非公开测试，结果网站上没有显示任何内容。我想查查是否是存在漏洞或是易损性问题导致了这一结果。</p>\n<p>我通过了生产机器上的签名环节，然后打开了数据库。内容库（articles table）内空空如也。这证实了我们在网站上看到的情况是真实的。</p>\n<p>用户库（users table）内依然有用户数据存在。真让人奇怪。所以情况是我们丢失了所有内容，但是至少测试用户的信息依然存在。我们给出的解释是这是一个测试行为，所以这些事情有可能发生。</p>\n<p>接下来的几分钟一片混乱。我不记得自己做了什么。我不认为自己笨到在控制台上执行了删除用户库的操作。但是事实就是这么发生了，现在后台既没有了内容库，也没有了用户库。这真实下了我一大跳。</p>\n<p>然后我的大脑就开始转动起来思考如何解决这个问题。我真的把用户库给删掉了吗？是的。我们存备份了吗？没有。我们应该如何告诉客户这个事情？不知道。</p>\n<p>我犹记得自己走向项目经理那里，坐在她身边，向她解释了发生了什么事情时的场面。因为我们的内容库中没有内容，这就是为什么网站上空空如也的原因。同时，我还删除了用户库。他们现在需要重新邀请所有的用户，如果他们能够弄清楚谁是谁。</p>\n<p>我回到了自己的办公室，垂头丧气。</p>\n<p>不过，我还是没有接受这件事。我们一开始是如何失去这些东西的？</p>\n<p>我开始不停地往深处想。半是为了否认这件事，半是想要挽回面子。不久，我注意到了一些重要事情。</p>\n<p>在服务器上还存在着其他5个数据库。其中一个数据库的名字和我刚才看到的数据库名字很像。</p>\n<p>当我查看这个数据库的时候，发现所有的内容都在里面。用户库也安然无恙。结果证明，是一个配置变动无意中改变了生产设置，使站点指向了一个全新的数据库。我之前所看的用户信息是什么？种子数据。</p>\n<p>真是谢天谢地。早上的神经紧张和胃酸让我觉得很不舒服，但是我们“恢复”了数据，并在坏消息传开之前找到了真正的问题。</p>\n<p>从这件事中可以吸取很多教训。其中一点是关于最简单原则：我们总是在做的备份，也许是开发人员最有成效的挽救药。</p>\n<h3>继续前进但不要冲得过前</h3>\n<p>我最近犯的一个错误不太引人注目。事实上，这是一个经由小错误所引起的小错误最终导致了一场混乱的故事。</p>\n<p>我们面临的是一个时间紧迫的项目。</p>\n<p>在初次会议上，我们团队一致认为完成它会花费比预定时间多一倍的时间。这个最后期限一开始就对我们产生影响，让我宽松地通过了身份认证部分而留有更多时间去关注客户所实际关注的功能设计。</p>\n<p>我只是在一个单一页面测试了身份验证测试，但是当时还不了解它们将如何被组合在一起。</p>\n<p>把它单列出来是我做的一个错误决定。我忽略了一些重要事情：</p>\n<ol class=\" list-paddingleft-2\">\n<li>用户在登陆之后会从cookie中加载内容，但是这个页面却试图在没有任何等待的情况下进行加载。根据事件的发生顺序，用户会得到带来服务器的反映，说其是未经授权的。</li>\n<li>身份验证也未检查令牌是否过期。如果用户不经常访问这个网站。那么当其再一次访问时，网站需要用户登出再登入才会运行。</li>\n<li>令牌应该基于每个请求进行更新，但是我从未花费时间去理解其发生前后的规则。所以，这又产生了一个时间问题。如果我们同时发送了几个请求，根据它们返回的顺序，用户会得到那个在后来的请求中无法使用的令牌。</li>\n</ol>\n<p>我们匆匆忙忙地赶着项目，却仍花费了比规定多一倍的时间。区别之处在于有更多的漏洞，并需要花更多时间去跟踪并修复这些漏洞。</p>\n<p>这使我感到窘迫。之后因为整件事情变得比较糟糕哦而让我在公众场合感到羞愧。</p>\n<p>我想说的是：在此之后，我花费了时间去学习认证程序。我现在了解了OAuth、JWT、刷新令牌和到期行为。我仔细研究了其他人所编写的身份验证代码。我能够在不同的语言和框架中建构身份验证程序。</p>\n<h3>将失败转化为未来的成功</h3>\n<p>这是我从那些表现糟糕的事情中所获得的经验。如果你愿意，那么几乎所有好的结果都会由此而来。</p>\n<p>如果有人能从自己的错误中汲取教训，那么他就会比现在更优秀。我试着不去打击那些第一次犯错误的队友。他们通常都知道自己把事情搞的一团糟。</p>\n<p>我也正尝试不对那些不断犯同样错误的人施加压力。他们仍然值得同情。</p>\n<p>如果在错误中做到这4点，那么你就会不断成长：</p>\n<ol class=\" list-paddingleft-2\">\n<li>嘲笑自己。</li>\n<li>从中汲取经验教训。</li>\n<li>改正错误。</li>\n<li>分享自己的错误，让其他人也有所收获。</li>\n</ol>\n<p>最后，我想讲一个关于错误价值的轶事。20世纪初，IBM的首席执行官托马斯·J·沃森曾遇到过一名员工，这名员工的一系列糟糕决策让公司付出了巨大代价。当沃森被问到是否会解雇这名员工时，他回应道：</p>\n<blockquote><p>“不，我刚在他身上花了60万美元的培训费。为什么要让别人白白捡去这个便宜？”</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113909\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113909votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113909\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/c8797b2eefd269f7cad89f821eb64889f001b563.jpg"},{"title": "手把手指导您使用 Git", "url": "http://blog.jobbole.com/114101/", "url_object_id": "b0fe29cc0c4c89c756cfc2daf1bfe5cb", "create_date": "2018/06/08", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/02/2027c50856ddfe647e45b4ac2e86c9f1.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 4, "tags": "IT技术,Git,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/1/step-step-guide-git\">Kedar Vijay Kulkarni</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9319-1.html\">Linux中国/ChenYi</a>   </div><p>如果您从未使用过 <a href=\"https://opensource.com/resources/what-is-git\">Git</a>，甚至可能从未听说过它。莫慌张，只需要一步步地跟着这篇入门教程，很快您就会在 <a href=\"https://opensource.com/life/15/11/short-introduction-github\">GitHub</a> 上拥有一个全新的 Git 仓库。</p>\n<p>在开始之前，让我们先理清一个常见的误解：Git 并不是 GitHub。Git 是一套版本控制系统（或者说是一款软件），能够协助您跟踪计算机程序和文件在任何时间的更改。它同样允许您在程序、代码和文件操作上与同事协作。GitHub 以及类似服务（包括 GitLab 和 BitBucket）都属于部署了 Git 程序的网站，能够托管您的代码。</p>\n<h3 id=\"toc_1\">步骤 1：申请一个 GitHub 账户</h3>\n<p>在 <a href=\"https://github.com/\">GitHub.com</a> 网站上（免费）创建一个账户是最简单的方式。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2ea0e8b205ec27442832ce5b1e0c4b8e.png\" alt=\"\"></p>\n<p>选择一个用户名（比如说，octocat123），输入您的邮箱地址和密码，然后点击 <strong>Sign up for GitHub</strong>。进入之后，您将看到下方插图的界面：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/40cb004cd0b2c76974a758187dd42609.png\" alt=\"\"></p>\n<h3 id=\"toc_2\">步骤 2：创建一个新的仓库</h3>\n<p>一个仓库（ repository），类似于能储存物品的场所或是容器；在这里，我们创建仓库存储代码。在 <code>+</code> 符号（在插图的右上角，我已经选中它了） 的下拉菜单中选择 <strong>New Repository</strong>。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/03428a7fdaed912f2fe0b4cd3d7e6b21.png\" alt=\"\"></p>\n<p>给您的仓库命名（比如说，Demo）然后点击 <strong>Create Repository</strong>。无需考虑本页面的其他选项。</p>\n<p>恭喜！您已经在 GitHub.com 中建立了您的第一个仓库。</p>\n<h3 id=\"toc_3\">步骤 3: 创建文件</h3>\n<p>当仓库创建完毕后，界面将和下方一致：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/495f98aaf52d221a19f36c00fab9f348.png\" alt=\"\"></p>\n<p>不必惊慌，它比看上去简单。跟紧步骤。忽略其他内容，注意截图上的 “…or create a new repository on the command line,”。</p>\n<p>在您的计算机中打开终端。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/2d4acbf3a6a04a52708163d0e0076ab6.png\" alt=\"\"></p>\n<p>键入 <code>git</code> 然后回车。如果命令行显示 <code>bash: git: command not found</code>，在您的操作系统或发行版 <a href=\"https://www.linuxbabe.com/linux-server/install-git-verion-control-on-linux-debianubuntufedoraarchlinux#crt-2\">安装 Git</a> 命令。键入 <code>git</code> 并回车检查是否成功安装；如果安装成功，您将看见大量关于使用该命令的说明信息。</p>\n<p>在终端内输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc420d862553404\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmkdir Demo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc420d862553404-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc420d862553404-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc420d862553404-1\"><span class=\"crayon-e\">mkdir </span><span class=\"crayon-i\">Demo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc420d862553404-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个命令将会创建一个名为 Demo 的目录（文件夹）。</p>\n<p>如下命令将会切换终端目录，跳转到 Demo 目录：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc4218384288236\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncd Demo\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc4218384288236-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc4218384288236-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc4218384288236-1\"><span class=\"crayon-e\">cd </span><span class=\"crayon-i\">Demo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc4218384288236-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>然后输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc421c438714538\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\necho \"#Demo\" &gt;&gt; README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc421c438714538-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc421c438714538-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc421c438714538-1\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"#Demo\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc421c438714538-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>创建一个名为 <code>README.md</code> 的文件，并写入 <code>#Demo</code>。检查文件是否创建成功，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc421f230601809\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncat README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc421f230601809-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc421f230601809-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc421f230601809-1\"><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc421f230601809-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这将会为您显示 <code>README.md</code> 文件的内容，如果文件创建成功，您的终端会有如下显示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/dc452e9264aa58b7502df5c06069e24c.png\" alt=\"\"></p>\n<p>使用 Git 程序告诉您的电脑，Demo 是一个被 Git 管理的目录，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc4223805432818\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit init\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc4223805432818-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc4223805432818-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc4223805432818-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-i\">init</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc4223805432818-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>然后，告诉 Git 程序您关心的文件并且想在此刻起跟踪它的任何改变，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc4226177480658\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit add README.md\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc4226177480658-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc4226177480658-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc4226177480658-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">add </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">md</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc4226177480658-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">步骤 4：创建一次提交</h3>\n<p>目前为止，您已经创建了一个文件，并且已经通知了 Git，现在，是时候创建一次提交commit了。提交可以看作是一个里程碑。每当完成一些工作之时，您都可以创建一次提交，保存文件当前版本，这样一来，您可以返回之前的版本，并且查看那时候的文件内容。无论何时您修改了文件，都可以对文件创建一个上一次的不一样的新版本。</p>\n<p>创建一次提交，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc4229837571450\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit commit -m \"first commit\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc4229837571450-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc4229837571450-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc4229837571450-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"first commit\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc4229837571450-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>就是这样！刚才您创建了包含一条注释为 “first commit” 的 Git 提交。每次提交，您都必须编辑注释信息；它不仅能协助您识别提交，而且能让您理解此时您对文件做了什么修改。这样到了明天，如果您在文件中添加新的代码，您可以写一句提交信息：“添加了新的代码”，然后当您一个月后回来查看提交记录或者 Git 日志（即提交列表），您还能知道当时的您在文件夹里做了什么。</p>\n<h3 id=\"toc_5\">步骤 5: 将您的计算机与 GitHub 仓库相连接</h3>\n<p>现在，是时候用如下命令将您的计算机连接到 GitHub 仓库了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0cc422d542401424\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit remote add origin https://github.com/&lt;your_username&gt;/Demo.git\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0cc422d542401424-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0cc422d542401424-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0cc422d542401424-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-e\">remote </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">origin </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/&lt;your_username&gt;/Demo.git</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0cc422d542401424-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>让我们一步步的分析这行命令。我们通知 Git 去添加一个叫做 <code>origin</code> （起源）的，拥有地址为 <code>https://github.com/&lt;your_username&gt;/Demo.git</code>（它也是您的仓库的 GitHub 地址） 的 <code>remote</code> （远程仓库）。当您提交代码时，这允许您在 GitHub.com 和 Git 仓库交互时使用 <code>origin</code> 这个名称而不是完整的 Git 地址。为什么叫做 <code>origin</code>？当然，您可以叫点别的，只要您喜欢（惯例而已）。</p>\n<p>现在，我们已经将本地 Demo 仓库副本连接到了其在 GitHub.com 远程副本上。您的终端看起来如下：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/8ca11bf5cd5069c6edbc8b5081048f10.png\" alt=\"\"></p>\n<p>此刻我们已经连接到远程仓库，可以推送我们的代码 到 GitHub.com（例如上传 <code>README.md</code> 文件）。</p>\n<p>执行完毕后，您的终端会显示如下信息：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/ad6f842634493d3eb98b683488023800.png\" alt=\"\"></p>\n<p>然后，如果您访问 <code>https://github.com/&lt;your_username&gt;/Demo</code>，您会看到截图内显示的情况：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/b09c603947a63405fe70e869b60c3b34.png\" alt=\"\"></p>\n<p>就是这么回事！您已经创建了您的第一个 GitHub 仓库，连接到了您的电脑，并且从你的计算机推送（或者称：上传）一个文件到 GitHub.com 名叫 Demo 的远程仓库上了。下一次，我将编写关于 Git 复制（从 GitHub 上下载文件到你的计算机上）、添加新文件、修改现存文件、推送（上传）文件到 GitHub。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114101\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114101votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114101\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/b7572ca0b31306f69135c34a75fb5c67782dfb3a.jpg"},{"title": "如何在 Linux 中使用 find", "url": "http://blog.jobbole.com/114000/", "url_object_id": "50e131c5200d426df175c11073a3dcc7", "create_date": "2018/05/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 3, "tags": "IT技术,Linux", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/how-use-find-linux\">Ben Cotton</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9648-1.html\">Linux中国/geekpi</a>   </div><p>在<a href=\"https://linux.cn/article-9585-1.html\">最近的一篇文章</a>中，Lewis Cowles 介绍了 <code>find</code> 命令。</p>\n<p><code>find</code> 是日常工具箱中功能更强大、更灵活的命令行工具之一，因此值得花费更多的时间。</p>\n<p>最简单的，<code>find</code> 跟上路径寻找一些东西。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003738104270089\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind /\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003738104270089-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003738104270089-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003738104270089-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003738104270089-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>它将找到（并打印出）系统中的每个文件。而且由于一切都是文件，你会得到很多需要整理的输出。这可能不能帮助你找到你要找的东西。你可以改变路径参数来缩小范围，但它不会比使用 <code>ls</code> 命令更有帮助。所以你需要考虑你想要找的东西。</p>\n<p>也许你想在主目录中找到所有的 JPEG 文件。 <code>-name</code> 参数允许你将结果限制为与给定模式匹配的文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003741960607387\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ -name '*jpg'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003741960607387-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003741960607387-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003741960607387-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003741960607387-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>可是等等！如果它们中的一些是大写的扩展名会怎么样？<code>-iname</code> 就像 <code>-name</code>，但是不区分大小写。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003749977389289\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ -iname '*jpg'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003749977389289-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003749977389289-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003749977389289-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003749977389289-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>很好！但是 8.3 名称方案是如此的老。一些图片可能是 .jpeg 扩展名。幸运的是，我们可以将模式用“或”（表示为 <code>-o</code>）来组合。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be100374d375379861\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ ( -iname 'jpeg' -o -iname 'jpg' )\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be100374d375379861-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be100374d375379861-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be100374d375379861-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be100374d375379861-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>我们正在接近目标。但是如果你有一些以 jpg 结尾的目录呢？ （为什么你要命名一个 <code>bucketofjpg</code> 而不是 <code>pictures</code> 的目录就超出了本文的范围。）我们使用 <code>-type</code> 参数修改我们的命令来查找文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003750593738817\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ <span class=\"MathJax_Preview\">\\( -iname '*jpeg' -o -iname '*jpg' \\)</span> -type f\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003750593738817-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003750593738817-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003750593738817-1\"><span class=\"crayon-e\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">f</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003750593738817-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>或者，也许你想找到那些命名奇怪的目录，以便稍后重命名它们：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003753428995681\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ <span class=\"MathJax_Preview\">\\( -iname '*jpeg' -o -iname '*jpg' \\)</span> -type d\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003753428995681-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003753428995681-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003753428995681-1\"><span class=\"crayon-e\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003753428995681-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>你最近拍了很多照片，所以让我们把它缩小到上周更改的文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003757324851261\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ <span class=\"MathJax_Preview\">\\( -iname '*jpeg' -o -iname '*jpg' \\)</span> -type f -mtime -7\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003757324851261-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003757324851261-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003757324851261-1\"><span class=\"crayon-e\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpeg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">iname</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'*jpg'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">mtime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003757324851261-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>你可以根据文件状态更改时间 （<code>ctime</code>）、修改时间 （<code>mtime</code>） 或访问时间 （<code>atime</code>） 来执行时间过滤。 这些是在几天内，所以如果你想要更细粒度的控制，你可以表示为在几分钟内（分别是 <code>cmin</code>、<code>mmin</code> 和 <code>amin</code>）。 除非你确切地知道你想要的时间，否则你可能会在 <code>+</code> （大于）或 <code>-</code> （小于）的后面加上数字。</p>\n<p>但也许你不关心你的照片。也许你的磁盘空间不够用，所以你想在 <code>log</code> 目录下找到所有巨大的（让我们定义为“大于 1GB”）文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be100375a601831742\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind /var/log -size +1G\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be100375a601831742-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be100375a601831742-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be100375a601831742-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1G</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be100375a601831742-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>或者，也许你想在 <code>/data</code> 中找到 bcotton 拥有的所有文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be100375d415339421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind /data -owner bcotton\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be100375d415339421-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be100375d415339421-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be100375d415339421-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">owner </span><span class=\"crayon-i\">bcotton</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be100375d415339421-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你还可以根据权限查找文件。也许你想在你的主目录中找到对所有人可读的文件，以确保你不会过度分享。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be1003761225140837\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfind ~ -perm -o=r\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be1003761225140837-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be1003761225140837-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be1003761225140837-1\"><span class=\"crayon-v\">find</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">perm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">o</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">r</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be1003761225140837-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这篇文章只说了 <code>find</code> 能做什么的表面。将测试条件与布尔逻辑相结合可以为你提供难以置信的灵活性，以便准确找到要查找的文件。并且像 <code>-exec</code> 或 <code>-delete</code> 这样的参数，你可以让 <code>find</code> 对它发现的内容采取行动。你有任何最喜欢的 <code>find</code> 表达式么？在评论中分享它们！</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114000\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114000votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114000\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"},{"title": "分布式之缓存击穿", "url": "http://blog.jobbole.com/114012/", "url_object_id": "06b67f2d6e9b1c6772e9dc3273786a32", "create_date": "2018/05/19", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4bae6998d00f180d42c7da716e3d0bb2.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": 4, "tags": "IT技术,分布式,数据库", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/rjzheng/p/8908073.html\">孤独烟</a>   </div><h2 id=\"什么是缓存击穿\">什么是缓存击穿</h2>\n<p>在谈论缓存击穿之前，我们先来回忆下从缓存中加载数据的逻辑，如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/927e850b8c5ae23d93f46b212108ca38.png\" alt=\"image\"></p>\n<p>因此，如果黑客每次故意查询一个在缓存内必然不存在的数据，导致每次请求都要去存储层去查询，这样缓存就失去了意义。如果在大流量下数据库可能挂掉。这就是缓存击穿。<br>\n场景如下图所示:<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/416c99b6f355c9d20931df6027f4a21c.png\" alt=\"image\"></p>\n<p>我们正常人在登录首页的时候，都是根据userID来命中数据，然而黑客的目的是破坏你的系统，黑客可以随机生成一堆userID,然后将这些请求怼到你的服务器上，这些请求在缓存中不存在，就会穿过缓存，直接怼到数据库上,从而造成数据库连接异常。</p>\n<h2 id=\"解决方案\">解决方案</h2>\n<p>在这里我们给出三套解决方案，大家根据项目中的实际情况，选择使用.</p>\n<p>讲下述三种方案前，我们先回忆下redis的setnx方法</p>\n<p><strong>SETNX</strong> <strong>key</strong> <strong>value</strong></p>\n<p>将 key 的值设为 value ，当且仅当 key 不存在。</p>\n<p>若给定的 key 已经存在，则 SETNX 不做任何动作。</p>\n<p>SETNX 是『SET if Not eXists』(如果不存在，则 SET)的简写。</p>\n<p><strong>可用版本</strong>：&gt;= 1.0.0</p>\n<p><strong>时间复杂度：</strong> O(1)</p>\n<p><strong>返回值：</strong> 设置成功，返回 1。设置失败，返回 0 。</p>\n<p>效果如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa1625382095929\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nredis&gt; EXISTS job                # job 不存在\r\n(integer) 0\r\n\r\nredis&gt; SETNX job \"programmer\"    # job 设置成功\r\n(integer) 1\r\n\r\nredis&gt; SETNX job \"code-farmer\"   # 尝试覆盖 job ，失败\r\n(integer) 0\r\n\r\nredis&gt; GET job                   # 没有被覆盖\r\n\"programmer\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1625382095929-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1625382095929-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1625382095929-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1625382095929-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1625382095929-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1625382095929-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1625382095929-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1625382095929-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1625382095929-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1625382095929-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1625382095929-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa1625382095929-1\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">EXISTS </span><span class=\"crayon-v\">job</span><span class=\"crayon-h\">                </span><span class=\"crayon-p\"># job 不存在</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1625382095929-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1625382095929-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1625382095929-4\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SETNX </span><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"programmer\"</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># job 设置成功</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1625382095929-5\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1625382095929-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1625382095929-7\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SETNX </span><span class=\"crayon-i\">job</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"code-farmer\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-p\"># 尝试覆盖 job ，失败</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1625382095929-8\"><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1625382095929-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1625382095929-10\"><span class=\"crayon-v\">redis</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GET </span><span class=\"crayon-v\">job</span><span class=\"crayon-h\">                   </span><span class=\"crayon-p\"># 没有被覆盖</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1625382095929-11\"><span class=\"crayon-s\">\"programmer\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"使用互斥锁\">1、使用互斥锁</h3>\n<p>该方法是比较普遍的做法，即，在根据key获得的value值为空时，先锁上，再从数据库加载，加载完毕，释放锁。若其他线程发现获取锁失败，则睡眠50ms后重试。</p>\n<p>至于锁的类型，单机环境用并发包的Lock类型就行，集群环境则使用分布式锁( redis的setnx)</p>\n<p>集群环境的redis的代码如下所示:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa162e118554932\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nString get(String key) {  \r\n   String value = redis.get(key);  \r\n   if (value  == null) {  \r\n    if (redis.setnx(key_mutex, \"1\")) {  \r\n        // 3 min timeout to avoid mutex holder crash  \r\n        redis.expire(key_mutex, 3 * 60)  \r\n        value = db.get(key);  \r\n        redis.set(key, value);  \r\n        redis.delete(key_mutex);  \r\n    } else {  \r\n        //其他线程休息50毫秒后重试  \r\n        Thread.sleep(50);  \r\n        get(key);  \r\n    }  \r\n  }  \r\n}  </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa162e118554932-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa162e118554932-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-1\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setnx</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key_mutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 3 min timeout to avoid mutex holder crash  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">expire</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key_mutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key_mutex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//其他线程休息50毫秒后重试  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">Thread</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa162e118554932-15\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa162e118554932-16\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p><strong>优点:</strong></p>\n<ol>\n<li>思路简单</li>\n<li>保证一致性</li>\n</ol>\n<p><strong>缺点</strong></p>\n<ol>\n<li>代码复杂度增大</li>\n<li>存在死锁的风险</li>\n</ol>\n<h3 id=\"异步构建缓存\">2、异步构建缓存</h3>\n<p>在这种方案下，构建缓存采取异步策略，会从线程池中取线程来异步构建缓存，从而不会让所有的请求直接怼到数据库上。该方案redis自己维护一个timeout，当timeout小于System.currentTimeMillis()时，则进行缓存更新，否则直接返回value值。<br>\n集群环境的redis代码如下所示:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa1633622256844\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nString get(final String key) {  \r\n        V v = redis.get(key);  \r\n        String value = v.getValue();  \r\n        long timeout = v.getTimeout();  \r\n        if (v.timeout &lt;= System.currentTimeMillis()) {  \r\n            // 异步更新后台异常执行  \r\n            threadPool.execute(new Runnable() {  \r\n                public void run() {  \r\n                    String keyMutex = \"mutex:\" + key;  \r\n                    if (redis.setnx(keyMutex, \"1\")) {  \r\n                        // 3 min timeout to avoid mutex holder crash  \r\n                        redis.expire(keyMutex, 3 * 60);  \r\n                        String dbValue = db.get(key);  \r\n                        redis.set(key, dbValue);  \r\n                        redis.delete(keyMutex);  \r\n                    }  \r\n                }  \r\n            });  \r\n        }  \r\n        return value;  \r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1633622256844-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1633622256844-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-1\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">V</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getValue</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTimeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\">// 异步更新后台异常执行  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">threadPool</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Runnable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-9\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"mutex:\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-10\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setnx</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-11\"><span class=\"crayon-h\">                        </span><span class=\"crayon-c\">// 3 min timeout to avoid mutex holder crash  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-12\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">expire</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-13\"><span class=\"crayon-h\">                        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dbValue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-14\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dbValue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-15\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keyMutex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-16\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1633622256844-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1633622256844-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p><strong>优点:</strong></p>\n<ol>\n<li>性价最佳，用户无需等待</li>\n</ol>\n<p><strong>缺点</strong></p>\n<ol>\n<li>无法保证缓存一致性</li>\n</ol>\n<h3 id=\"布隆过滤器\">3、布隆过滤器</h3>\n<h4 id=\"原理\">1、原理</h4>\n<p>布隆过滤器的巨大用处就是，能够迅速判断一个元素是否在一个集合中。因此他有如下三个使用场景:</p>\n<ol>\n<li>网页爬虫对URL的去重，避免爬取相同的URL地址</li>\n<li>反垃圾邮件，从数十亿个垃圾邮件列表中判断某邮箱是否垃圾邮箱（同理，垃圾短信）</li>\n<li>缓存击穿，将已存在的缓存放到布隆过滤器中，当黑客访问不存在的缓存时迅速返回避免缓存及DB挂掉。</li>\n</ol>\n<p>OK，接下来我们来谈谈布隆过滤器的原理<br>\n其内部维护一个全为0的bit数组，需要说明的是，布隆过滤器有一个误判率的概念，误判率越低，则数组越长，所占空间越大。误判率越高则数组越小，所占的空间越小。</p>\n<p>假设，根据误判率，我们生成一个10位的bit数组，以及2个hash函数（(f_1,f_2)），如下图所示(生成的数组的位数和hash函数的数量，我们不用去关心是如何生成的，有数学论文进行过专业的证明)。<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6aa626ab277b7657acfdd791d67b2af4.png\" alt=\"image\"></p>\n<p>假设输入集合为((N_1,N_2)),经过计算(f_1(N_1))得到的数值得为2，(f_2(N_1))得到的数值为5，则将数组下标为2和下表为5的位置置为1，如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/9dacf0001bc1cd6cb26465d1b752b95f.png\" alt=\"image\"></p>\n<p>同理，经过计算(f_1(N_2))得到的数值得为3，(f_2(N_2))得到的数值为6，则将数组下标为3和下表为6的位置置为1，如下图所示<br>\n<img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/75b9db0a2fee851bec9d7f6ac505bc63.png\" alt=\"image\"></p>\n<p>这个时候，我们有第三个数(N_3)，我们判断(N_3)在不在集合((N_1,N_2))中，就进行(f_1(N_3)，f_2(N_3))的计算</p>\n<ol>\n<li>若值恰巧都位于上图的红色位置中，我们则认为，(N_3)在集合((N_1,N_2))中</li>\n<li>若值有一个不位于上图的红色位置中，我们则认为，(N_3)不在集合((N_1,N_2))中</li>\n</ol>\n<p>以上就是布隆过滤器的计算原理，下面我们进行性能测试，</p>\n<h4 id=\"性能测试\">2、性能测试</h4>\n<p>代码如下:</p>\n<h5 id=\"新建一个maven工程引入guava包\">(1)新建一个maven工程，引入guava包</h5>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa1638580970624\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;dependencies&gt;  \r\n        &lt;dependency&gt;  \r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;  \r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;  \r\n            &lt;version&gt;22.0&lt;/version&gt;  \r\n        &lt;/dependency&gt;  \r\n    &lt;/dependencies&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1638580970624-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1638580970624-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1638580970624-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1638580970624-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1638580970624-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1638580970624-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1638580970624-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa1638580970624-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">dependencies</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1638580970624-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1638580970624-3\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">guava</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">groupId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1638580970624-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">guava</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">artifactId</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1638580970624-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-cn\">22.0</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1638580970624-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dependency</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1638580970624-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">dependencies</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h5 id=\"测试一个元素是否属于一个百万元素集合所需耗时\">(2)测试一个元素是否属于一个百万元素集合所需耗时</h5>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa163c026252263\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage bloomfilter;\r\n\r\nimport com.google.common.hash.BloomFilter;\r\nimport com.google.common.hash.Funnels;\r\nimport java.nio.charset.Charset;\r\n\r\npublic class Test {\r\n    private static int size = 1000000;\r\n\r\n    private static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size);\r\n\r\n    public static void main(String[] args) {\r\n        for (int i = 0; i &lt; size; i++) {\r\n            bloomFilter.put(i);\r\n        }\r\n        long startTime = System.nanoTime(); // 获取开始时间\r\n        \r\n        //判断这一百万个数中是否包含29999这个数\r\n        if (bloomFilter.mightContain(29999)) {\r\n            System.out.println(\"命中了\");\r\n        }\r\n        long endTime = System.nanoTime();   // 获取结束时间\r\n\r\n        System.out.println(\"程序运行时间： \" + (endTime - startTime) + \"纳秒\");\r\n\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa163c026252263-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa163c026252263-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomfilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nio</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">charset</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Charset</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-7\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integerFunnel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nanoTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 获取开始时间</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-17\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//判断这一百万个数中是否包含29999这个数</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mightContain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">29999</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"命中了\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">endTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nanoTime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\">// 获取结束时间</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"程序运行时间： \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">endTime</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">startTime</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"纳秒\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa163c026252263-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa163c026252263-27\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>输出如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa1640753828877\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n命中了\r\n程序运行时间： 219386纳秒</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1640753828877-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1640753828877-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa1640753828877-1\">命中了</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1640753828877-2\">程序运行时间：<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">219386</span>纳秒</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>也就是说，判断一个数是否属于一个百万级别的集合，只要0.219ms就可以完成，性能极佳。</p>\n<h5 id=\"误判率的一些概念\">(3)误判率的一些概念</h5>\n<p>首先，我们先不对误判率做显示的设置，进行一个测试，代码如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa1643665263450\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage bloomfilter;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport com.google.common.hash.BloomFilter;\r\nimport com.google.common.hash.Funnels;\r\n\r\npublic class Test {\r\n    private static int size = 1000000;\r\n\r\n    private static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size);\r\n\r\n    public static void main(String[] args) {\r\n        for (int i = 0; i &lt; size; i++) {\r\n            bloomFilter.put(i);\r\n        }\r\n        List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(1000);  \r\n        \r\n        //故意取10000个不在过滤器里的值，看看有多少个会被认为在过滤器里\r\n        for (int i = size + 10000; i &lt; size + 20000; i++) {  \r\n            if (bloomFilter.mightContain(i)) {  \r\n                list.add(i);  \r\n            }  \r\n        }  \r\n        System.out.println(\"误判的数量：\" + list.size()); \r\n\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa1643665263450-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1643665263450-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomfilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">List</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">google</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">common</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-9\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Test</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integerFunnel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ArrayList</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-19\"><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">//故意取10000个不在过滤器里的值，看看有多少个会被认为在过滤器里</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mightContain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"误判的数量：\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa1643665263450-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa1643665263450-29\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0050 seconds] -->\r\n<p>输出结果如下</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa1647098813970\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n误判对数量：330</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa1647098813970-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa1647098813970-1\">误判对数量：<span class=\"crayon-cn\">330</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>如果上述代码所示，我们故意取10000个不在过滤器里的值，却还有330个被认为在过滤器里，这说明了误判率为0.03.即，在不做任何设置的情况下，默认的误判率为0.03。<br>\n下面上源码来证明：<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7e2c12c502f40a42548913672b197171.png\" alt=\"image\"></p>\n<p>接下来我们来看一下，误判率为0.03时，底层维护的bit数组的长度如下图所示<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b3087588fd2780c158760d1e703c351c.png\" alt=\"image\"></p>\n<p>将bloomfilter的构造方法改为</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa164a970164553\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprivate static BloomFilter&lt;Integer&gt; bloomFilter = BloomFilter.create(Funnels.integerFunnel(), size,0.01);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164a970164553-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa164a970164553-1\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bloomFilter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BloomFilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Funnels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">integerFunnel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>即，此时误判率为0.01。在这种情况下，底层维护的bit数组的长度如下图所示<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/d55492c1278a634aeea2d32c2440e379.png\" alt=\"image\"><br>\n由此可见，误判率越低，则底层维护的数组越长，占用空间越大。因此，误判率实际取值，根据服务器所能够承受的负载来决定，不是拍脑袋瞎想的。</p>\n<h4 id=\"实际使用\">3、实际使用</h4>\n<p>redis伪代码如下所示</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35be0fa164e188237008\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nString get(String key) {  \r\n   String value = redis.get(key);  \r\n   if (value  == null) {  \r\n        if(!bloomfilter.mightContain(key)){\r\n            return null;\r\n        }else{\r\n           value = db.get(key);  \r\n           redis.set(key, value);  \r\n        }\r\n    } \r\n    return value；\r\n} </textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164e188237008-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa164e188237008-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164e188237008-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa164e188237008-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164e188237008-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa164e188237008-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164e188237008-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa164e188237008-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164e188237008-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa164e188237008-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35be0fa164e188237008-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35be0fa164e188237008-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35be0fa164e188237008-1\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa164e188237008-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa164e188237008-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa164e188237008-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">bloomfilter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mightContain</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa164e188237008-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa164e188237008-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa164e188237008-7\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa164e188237008-8\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">redis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa164e188237008-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa164e188237008-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b35be0fa164e188237008-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">value</span>；</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35be0fa164e188237008-12\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p><strong>优点:</strong></p>\n<ol>\n<li>思路简单</li>\n<li>保证一致性</li>\n<li>性能强</li>\n</ol>\n<p><strong>缺点</strong></p>\n<ol>\n<li>代码复杂度增大</li>\n<li>需要另外维护一个集合来存放缓存的Key</li>\n<li>布隆过滤器不支持删值操作</li>\n</ol>\n<h2 id=\"总结\">总结</h2>\n<p>在总结部分，来个漫画把。希望对大家找工作有帮助<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ef43eacdd2710eff0fbe24e391486c82.png\" alt=\"image\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114012\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114012votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114012\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/117976068e2e847f1067d25ea3fa90a3b5a60f3f.jpg"},{"title": "谁说国外的程序员过得好？法国政府搞的软件项目，坑出新境界", "url": "http://blog.jobbole.com/113920/", "url_object_id": "b51b2aa44b0b3a7401e270a76cf4f1bf", "create_date": "2018/04/25", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/5f2dbd34a324b10f8f29ed12482281ae.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 2, "tags": "职场,项目", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://36kr.com/p/5130755.html\">Cado</a>   </div><p>编者按：很多软件项目开发时间大大超出了规划的时间，投入大量资金和人力，都没有实在的结果。如果你讨厌你的编程工作，请认真阅读这篇 2008 年的文章吧。法国科技公司为政府做的项目，预期两三年，做了十二年还在做；6 百万行 C++ 代码，经理比工程师多，人员素质极低。</p>\n<p>几年前，我在一家法国大型科技公司工作，为他们的一个软件项目做咨询师。在那段时间，我见识到了软件工程工作方面最匪夷所思的一切，完全超乎我的想象。项目人员工作极度不专业，而更严重的是，工作环境完全无视人的尊严。我一度觉得去那里上班就像坐牢。我只要举几个例子，读者自然就有分晓。</p>\n<p><strong>工作内容</strong></p>\n<p>为一个政府部门开发一款软件。</p>\n<p>政府先付了几百万欧元的订金，软件开发耗时初定 2 到 3 年。公司雇了几个工程师，开始了项目。每隔三个月，团队人数就翻一番，以便让资金不断流入。</p>\n<p>7 年后，项目还不成样子，连雏形都没有。每天公司都要交几千欧元的罚金。于是，管理层决定节流，把经验丰富的员工都辞退了，雇了些经验少，甚至完全没经验的新人。</p>\n<p>10 年后，项目进度实在太滞后，中层管理人员决定雇佣有软件工程经验的人，把项目拉回正轨。公司的员工每三个月换一批，也就是法国离职交接期的时长。</p>\n<p>12 年后，项目还没结束。公司每天给政府发的修改申请越来越多，以“补贴”每天缴纳的罚金。此时已经是 2008 年。</p>\n<p><strong>项目数据</strong></p>\n<ul>\n<li>600 万行代码</li>\n<li>基于 C ++</li>\n<li>50,000+ 类</li>\n<li>使用的 C ++ 已经过时，“锁死”在编译器版本中，编译器的版本只能一个操作系统上用。</li>\n<li>基于 CORBA</li>\n<li>项目使用的数据库软件背后的公司已经破产</li>\n<li>图层用户界面有好几个，但实际上每一层都没人维护。</li>\n<li>32 台计算机上构建，需要 48 小时</li>\n<li>运行一个用户界面需要 40 到 50 个并行进程</li>\n<li>没有动态库链接：可执行文件大小在数百兆字节范围内</li>\n<li>启动时间约为 15 分钟</li>\n<li>瘫痪频率：每 30 秒到 30 分钟一次</li>\n</ul>\n<p>没有那个软件工程师会说 C++ 很简单。就其复杂程度而言，这或许是最难掌握的编程语言，就连创造 C++ 的几个工程师都坦白说，他们自己也没有完全掌握。</p>\n<p>这种无底洞、大迷宫似的语言，还是有不少人扬言说自己已经掌握了，只要有机会，他们就敢用给你看。他们一猛子扎进这口深井，最后大多遍体鳞伤。看着一满篇天书，花不知多少小时，也找不到瘫痪原因。人都是很聪明的，人生短暂，投入一段时间没有回报，就会“弃暗投明”，改用其他语言，改做其他项目。</p>\n<p>软件一大，不管是什么语言写的，维护起来都很难。6 百万行代码，就一个小团队维护，只要想想就能发疯。6 百万可不是小数字，就算一秒钟读一行，也要 70 天不眠不休才能看完。</p>\n<p>我再举两个实例，读者就知道这个项目有多让人崩溃。</p>\n<p>有一个开发者被分配了这样一个任务：找出在界面上点击右键，界面冻结的原因。他花了几天时间，仔仔细细检查，耗掉大半耐心之后，他发现，在界面上右击后，其实没有错误，只是内容菜单要 45 分钟后才弹出。每次用户在主窗体点击后，菜单是动态生成的，但是背后是巨量的静态内容，因此耗时长。有些用户反馈说“加载 CD”的命令完全没反应。这个问题花了几个星期才弄明白，但是最后，错误报告却被标记为“已解决”，因为数据确实有加载，只不过是花了整整 7 天，才加载完 700 兆的数据。嗯，不然怎么说耐心是美德呢…</p>\n<p><strong>版本控制，犹如脱缰野马</strong></p>\n<p>好几年过去了，团队里终于来了个人才，提出要用版本控制工具。第一次尝试，效果不如人意，于是团队决定换一个系统。又过了纪念，每次更新的历史数据全没了。最后，他们选择使用一个瑞士的系统，图形用户界面简直不堪入目。有一个四人小组全职负责版本控制软件方面的维护问题，跟他们合作，我们常常面临以下的问题：</p>\n<ul>\n<li>第一次测试需要与版本控制团队先预约时间，通常在一周后才授权。</li>\n<li>未经中层管理人员授权，不允许编辑文件。必须事先告诉经理要编辑哪些文件，然后申请上级许可，再预约版本控制团队，在几天后才能编辑。</li>\n<li>每次修改代码都会产生分支文件，也就意味着必须合并所有修改。有了这么多的文件，你可能觉得，不会出现两个人弄同一个文件上的重复劳动。但事实证明，大家都在弄同样的 100 个文件。</li>\n<li>检入过程非常痛苦，这个过程中，你的代码经过自动化错误检测软件审查，最终由中间管理人员审查。不用说，bug 的出现速度永远比开发人员纠正速度快得多。如果你仔细看注册的错误数量，每次修正导致的新 bug 数量，是原来 bug 数量的两倍。</li>\n<li>版本控制很简单。旧软件是版本1，目前的软件是版本2，未来的软件是版本 3. 没有人知道哪个版本已经交付给客户了。</li>\n</ul>\n<p>从前的某一天，公司安排过正式交付。但是这个时间不是团队内的人定的。那天，客户受到了一张没有内容，只有安装指引的光盘。那时因为，没有人知道怎么把这个项目做出来。后来客户发现他们受到的光盘里，什么也没有，于是给公司发了封正式的投诉信。</p>\n<p>公司居然把旧版本的软件发给了客户。客户之所以能发现，是因为他们看了“说明”栏，里面的内容跟上一年的版本大同小异。</p>\n<p><strong>“人件”</strong></p>\n<p><strong>微薄薪水，只能雇庸碌之辈</strong></p>\n<p>团队里大部分人都是没有软件工程经验的人，软件里要不是大部分都是 bug，就奇了怪了。经理意识到，一个单纯的软件项目，支出的大头是薪水，真是天资聪颖。但是，这个大发现丝毫没有影响 TA 炒掉工程师，不论他们有没有经验，却把桌面上有“C++傻瓜入门”之类书的管理人员统统留下了。</p>\n<p><strong>我们的梦想团队</strong></p>\n<p>团队 55 人：20 个开发者，35 个管理人员</p>\n<p>没错，管理人员数量比工程师还多。</p>\n<p>管理人员最擅长的就是开会，讲的都是同一个 PPT，一遍又一遍，讲到吐为止。而开发者就在宽敞的共用办公空间里聊天解闷。</p>\n<p>很多管理人员在软件工程上毫无经验。当时 SCO-Linux 争议炒得沸沸扬扬，不管整件事算不算闹剧，很多人都意识到，以后要用自由软件都要付费了。）不用说，整个软件到处都是 GNU C 库里的代码，一个巨型 GNU 兼容的非共享软件。但是，就这个项目的水准，估计也没人敢把代码放出去。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5f2dbd34a324b10f8f29ed12482281ae.jpg\" alt=\"谁说国外的程序员过得好？法国政府搞的软件项目，坑出新境界\"></p>\n<blockquote><p>自由软件（free software），根据自由软件基金会对其的定义，是一类可以不受限制地自由使用、复制、研究、修改和分发的，尊重用户自由的软件。这方面的不受限制正是自由软件最重要的本质，与自由软件相对的是专有软件（proprietary software），或被称为私有软件、封闭软件（其定义与是否收取费用无关──自由软件不一定是免费软件。</p></blockquote>\n<p>整个团队，技术水平不如人意，了解互联网的人屈指可数，其中自认为了解互联网的，以为互联网只是为爱情动作片而生的。他们之间，如果有人说自己在网上看了点东西，听者就会露出会心一笑。</p>\n<p><strong>地狱之旅</strong></p>\n<p>本来在这里的工作，虽然不算优越，至少不会无聊。但是顶层的管理人员非要采用纳粹管理集中营的办法来管理员工。我随便举几个例子：</p>\n<ul>\n<li>早九点后到岗是不允许的。有一天， 经理站在大门后，把 9 点整以后到的所有员工都当场炒鱿鱼，包括一些经理和销售人员。</li>\n<li>抽烟的员工，因为跑出去抽烟，工作的时间就打了折扣。所以管理层决定让所有员工都不许吸烟。当然，没有用。</li>\n<li>有时候，一连好几天咖啡机都被收起来。因为跑去喝咖啡的人自然没有坐在办公桌前的人、伏案写代码的人工作时间长。</li>\n<li>每次有上级来视察，咖啡机就要关掉，以便给上级留下大家都在桌前认真写代码的印象。</li>\n<li>那里的洗手间是我去过的洗手间里最恶心的。大概也是为了提高大家的效率：上厕所的时间少了，工作的时间自然就多了（工作质量自然也上去了）。</li>\n</ul>\n<p>这样的工作，这样的管理，为什么大家还要来上班？最主要的原因就是当时法国深陷经济危机（某种程度上，现在也是），有工作，有薪水几乎成了特权，工作环境、内容自然就没那么在意了。</p>\n<p>还有一个原因，对于在那里的大多数员工而言，这份合约算是他们与一家真实公司签下的一份实实在在的合约。没有对比，就没有伤害，他们可能都不知道这份工作的糟心程度。很多员工新入职场，觉得迟到就被炒鱿鱼，也没什么不合理的。但是，这样严苛的标准，晚一分钟都不行，只有变态的管理者才会付诸现实。</p>\n<p>话又说回来，政府怎么会让这样的事情发生呢？但我们都心知肚明，政府里管这个项目预算的官员和软件公司的顶层管理人员拜过把子，关系够铁。在法国，这种程度的腐败也没什么新鲜的。很多人根本不知道，更别说有什么惩罚或者后果了。当然，也不限于法国，放眼欧美，这样的故事也不少。</p>\n<p>所以，下次上班觉得难熬，要学会置身处地。想像一下自己在那里工作，会是什么光景。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113920\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113920votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113920\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/aab96c7405ff9c51c5ed53c3c56c2a4d05b37236.jpg"},{"title": "Vim-plug：极简 Vim 插件管理器", "url": "http://blog.jobbole.com/114132/", "url_object_id": "a00b9ec8e1a1878cf2a49e643d90596d", "create_date": "2018/06/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/e10fe1fd7da125e34ea34b9f5dad9c30.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux,Vim", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/vim-plug-a-minimalist-vim-plugin-manager/\">Sk</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9751-1.html\">Linux中国/geekpi</a>   </div><p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/e10fe1fd7da125e34ea34b9f5dad9c30.png\" alt=\"\"></p>\n<p>当没有插件管理器时，Vim 用户必须手动下载 tarball 包形式的插件，并将它们解压到 <code>~/.vim</code> 目录中。在少量插件的时候可以。但当他们安装更多的插件时，就会变得一团糟。所有插件文件分散在单个目录中，用户无法找到哪个文件属于哪个插件。此外，他们无法找到他们应该删除哪个文件来卸载插件。这时 Vim 插件管理器就可以派上用场。插件管理器将安装插件的文件保存在单独的目录中，因此管理所有插件变得非常容易。我们几个月前已经写了关于 <a href=\"https://linux.cn/article-9416-1.html\">Vundle</a> 的文章。今天，我们将看到又一个名为 “Vim-plug” 的 Vim 插件管理器。</p>\n<p>Vim-plug 是一个自由、开源、速度非常快的、极简的 vim 插件管理器。它可以并行地安装或更新插件。你还可以回滚更新。它创建浅层克隆shallow clone最小化磁盘空间使用和下载时间。它支持按需加载插件以加快启动时间。其他值得注意的特性是支持分支/标签/提交、post-update 钩子、支持外部管理的插件等。</p>\n<h3 id=\"toc_1\">安装</h3>\n<p>安装和使用起来非常容易。你只需打开终端并运行以下命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b17695d603972092\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -fLo ~/.vim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b17695d603972092-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b17695d603972092-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b17695d603972092-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fLo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autoload</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">create</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dirs </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b17695d603972092-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>Neovim 用户可以使用以下命令安装 Vim-plug：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b176968305478398\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ curl -fLo ~/.config/nvim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176968305478398-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b176968305478398-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b176968305478398-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fLo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nvim</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">autoload</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">create</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">dirs </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b176968305478398-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">用法</h3>\n<h4 id=\"toc_3\">安装插件</h4>\n<p>要安装插件，你必须如下所示首先在 Vim 配置文件中声明它们。一般 Vim 的配置文件是 <code>~/.vimrc</code>，Neovim 的配置文件是 <code>~/.config/nvim/init.vim</code>。请记住，当你在配置文件中声明插件时，列表应该以 <code>call plug#begin(PLUGIN_DIRECTORY)</code> 开始，并以 <code>plug#end()</code> 结束。</p>\n<p>例如，我们安装 “lightline.vim” 插件。为此，请在 <code>~/.vimrc</code> 的顶部添加以下行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b17696c689442749\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncall plug#begin('~/.vim/plugged')\r\nPlug 'itchyny/lightline.vim'\r\ncall plug#end()\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b17696c689442749-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b17696c689442749-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35d5b17696c689442749-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b17696c689442749-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35d5b17696c689442749-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b17696c689442749-1\"><span class=\"crayon-e\">call </span><span class=\"crayon-v\">plug</span><span class=\"crayon-p\">#begin('~/.vim/plugged')</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b17696c689442749-2\"><span class=\"crayon-i\">Plug</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'itchyny/lightline.vim'</span></div><div class=\"crayon-line\" id=\"crayon-5b35d5b17696c689442749-3\"><span class=\"crayon-e\">call </span><span class=\"crayon-v\">plug</span><span class=\"crayon-p\">#end()</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b17696c689442749-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b35d5b17696c689442749-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 vim 配置文件中添加上面的行后，通过输入以下命令重新加载：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b176970851356143\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:source ~/.vimrc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176970851356143-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b176970851356143-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b176970851356143-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-v\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">vimrc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b176970851356143-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>或者，只需重新加载 Vim 编辑器。</p>\n<p>现在，打开 vim 编辑器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b176973886379548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vim\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176973886379548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b176973886379548-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b176973886379548-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">vim</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b176973886379548-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>使用以下命令检查状态：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b176977517373765\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugStatus\r\n\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176977517373765-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b176977517373765-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176977517373765-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b176977517373765-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugStatus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b176977517373765-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b35d5b176977517373765-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>然后输入下面的命令，然后按回车键安装之前在配置文件中声明的插件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b17697a225759968\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugInstall\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b17697a225759968-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b17697a225759968-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b17697a225759968-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugInstall</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b17697a225759968-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_4\">更新插件</h4>\n<p>要更新插件，请运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b17697d513991505\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugUpdate\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b17697d513991505-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b17697d513991505-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b17697d513991505-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugUpdate</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b17697d513991505-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>更新插件后，按下 <code>d</code> 查看更改。或者，你可以之后输入 <code>:PlugDiff</code>。</p>\n<h4 id=\"toc_5\">审查插件</h4>\n<p>有时，更新的插件可能有新的 bug 或无法正常工作。要解决这个问题，你可以简单地回滚有问题的插件。输入 <code>:PlugDiff</code> 命令，然后按回车键查看上次 <code>:PlugUpdate</code>的更改，并在每个段落上按 <code>X</code> 将每个插件回滚到更新前的前一个状态。</p>\n<h4 id=\"toc_6\">删除插件</h4>\n<p>删除一个插件删除或注释掉你以前在你的 vim 配置文件中添加的 <code>plug</code> 命令。然后，运行 <code>:source ~/.vimrc</code> 或重启 Vim 编辑器。最后，运行以下命令卸载插件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b176981650715801\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugClean\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176981650715801-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b176981650715801-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b176981650715801-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugClean</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b176981650715801-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>该命令将删除 vim 配置文件中所有未声明的插件。</p>\n<h4 id=\"toc_7\">升级 Vim-plug</h4>\n<p>要升级vim-plug本身，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35d5b176984116579730\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n:PlugUpgrade\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35d5b176984116579730-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35d5b176984116579730-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35d5b176984116579730-1\"><span class=\"crayon-o\">:</span><span class=\"crayon-i\">PlugUpgrade</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35d5b176984116579730-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如你所见，使用 Vim-plug 管理插件并不难。它简化了插件管理。现在去找出你最喜欢的插件并使用 Vim-plug 来安装它们。</p>\n<p>就是这些了。我将很快在这里发布另一个有趣的话题。在此之前，请继续关注我们。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114132\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114132votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114132\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/a1813a88fb7af8cb32f88586ab2caa5f85752176.jpg"},{"title": "8 个基本的 Docker 容器管理命令", "url": "http://blog.jobbole.com/114145/", "url_object_id": "a80c1972902edd63a90d8bf1ff9bc04b", "create_date": "2018/06/22", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/06/91d1e9a10762cf7191f39f8e66ebefa7.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Docker,Linux,容器", "content": ["<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://kerneltalks.com/virtualization/8-basic-docker-container-management-commands/\">Shrikant Lavhate</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9768-1.html\">Linux中国/Lonaparte_CHENG</a>   </div><blockquote><p>利用这 8 个命令可以学习 Docker 容器的基本管理方式。这是一个为 Docker 初学者准备的，带有示范命令输出的指南。</p></blockquote>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/06/91d1e9a10762cf7191f39f8e66ebefa7.png\" alt=\"Docker 容器管理命令\"></p>\n<p>在这篇文章中，我们将带你学习 8 个基本的 Docker 容器命令，它们操控着 Docker 容器的基本活动，例如 运行run、 列举list、 停止stop、 查看历史纪录logs、 删除delete 等等。如果你对 Docker 的概念很陌生，推荐你看看我们的 <a href=\"https://kerneltalks.com/virtualization/what-is-docker-introduction-guide-to-docker/\">介绍指南</a>，来了解 Docker 的基本内容以及 <a href=\"https://kerneltalks.com/virtualization/how-to-install-docker-in-linux/\">如何</a> 在 Linux 上安装 Docker。 现在让我们赶快进入要了解的命令：</p>\n<h3 id=\"toc_1\">如何运行 Docker 容器？</h3>\n<p>众所周知，Docker 容器只是一个运行于宿主操作系统host OS上的应用进程，所以你需要一个镜像来运行它。Docker 镜像以进程的方式运行时就叫做 Docker 容器。你可以加载本地 Docker 镜像，也可以从 Docker Hub 上下载。Docker Hub 是一个提供公有和私有镜像来进行拉取pull操作的集中仓库。官方的 Docker Hub 位于 <a href=\"https://hub.docker.com/\">hub.docker.com</a>。 当你指示 Docker 引擎运行容器时，它会首先搜索本地镜像，如果没有找到，它会从 Docker Hub 上拉取相应的镜像。</p>\n<p>让我们运行一个 Apache web 服务器的 Docker 镜像，比如 httpd 进程。你需要运行 <code>docker container run</code> 命令。旧的命令为 <code>docker run</code>， 但后来 Docker 添加了子命令部分，所以新版本支持下列命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b992d200608248\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container run -d -p 80:80 httpd\r\nUnable to find image 'httpd:latest' locally\r\nlatest: Pulling from library/httpd\r\n3d77ce4481b1: Pull complete\r\n73674f4d9403: Pull complete\r\nd266646f40bd: Pull complete\r\nce7b0dda0c9f: Pull complete\r\n01729050d692: Pull complete\r\n014246127c67: Pull complete\r\n7cd2e04cf570: Pull complete\r\nDigest: sha256:f4610c3a1a7da35072870625733fd0384515f7e912c6223d4a48c6eb749a8617\r\nStatus: Downloaded newer image for httpd:latest\r\nc46f2e9e4690f5c28ee7ad508559ceee0160ac3e2b1688a61561ce9f7d99d682\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b992d200608248-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b992d200608248-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container run -d -p 80:80 httpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-2\"><span class=\"crayon-e\">Unable </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">find </span><span class=\"crayon-i\">image</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'httpd:latest'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">locally</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-3\"><span class=\"crayon-v\">latest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pulling </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">library</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">httpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-4\"><span class=\"crayon-cn\">3d77ce4481b1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-5\"><span class=\"crayon-cn\">73674f4d9403</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-e\">complete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-6\"><span class=\"crayon-v\">d266646f40bd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-e\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-7\"><span class=\"crayon-v\">ce7b0dda0c9f</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-8\"><span class=\"crayon-cn\">01729050d692</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-9\"><span class=\"crayon-cn\">014246127c67</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-i\">complete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-10\"><span class=\"crayon-cn\">7cd2e04cf570</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pull </span><span class=\"crayon-e\">complete</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-11\"><span class=\"crayon-v\">Digest</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sha256</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">f4610c3a1a7da35072870625733fd0384515f7e912c6223d4a48c6eb749a8617</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-12\"><span class=\"crayon-v\">Status</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Downloaded </span><span class=\"crayon-e\">newer </span><span class=\"crayon-e\">image </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">latest</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b992d200608248-13\"><span class=\"crayon-i\">c46f2e9e4690f5c28ee7ad508559ceee0160ac3e2b1688a61561ce9f7d99d682</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b992d200608248-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>Docker 的 <code>run</code> 命令将镜像名作为强制参数，另外还有很多可选参数。常用的参数有：</p>\n<ul>\n<li><code>-d</code>：从当前 shell 脱离容器</li>\n<li><code>-p X:Y</code>：绑定容器的端口 Y 到宿主机的端口 X</li>\n<li><code>--name</code>：命名你的容器。如果未指定，它将被赋予随机生成的名字</li>\n<li><code>-e</code>：当启动容器时传递环境编辑及其值</li>\n</ul>\n<p>通过以上输出你可以看到，我们将 <code>httpd</code> 作为镜像名来运行容器。接着，本地镜像没有找到，Docker 引擎从 Docker Hub 拉取了它。注意，它下载了镜像 <code>httpd:latest</code>， 其中 <code>:</code> 后面跟着版本号。如果你需要运行特定版本的容器，你可以在镜像名后面注明版本名。如果不提供版本名，Docker 引擎会自动拉取最新的版本。</p>\n<p>输出的最后一行显示了你新运行的 httpd 容器的唯一 ID。</p>\n<h3 id=\"toc_2\">如何列出所有运行中的 Docker 容器？</h3>\n<p>现在，你的容器已经运行起来了，你可能想要确认这一点，或者你想要列出你的机器上运行的所有容器。你可以使用 <code>docker container ls</code> 命令。在旧的 Docker 版本中，对应的命令为 <code>docker ps</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b9937341057644\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container ls\r\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                NAMES\r\nc46f2e9e4690        httpd               \"httpd-foreground\"   11 minutes ago      Up 11 minutes       0.0.0.0:80-&gt;80/tcp   cranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9937341057644-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9937341057644-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9937341057644-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9937341057644-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b9937341057644-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9937341057644-2\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND              </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS                </span><span class=\"crayon-e\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9937341057644-3\"><span class=\"crayon-e\">c46f2e9e4690        </span><span class=\"crayon-i\">httpd</span><span class=\"crayon-h\">               </span><span class=\"crayon-s\">\"httpd-foreground\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago      </span><span class=\"crayon-i\">Up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">minutes</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0.0.0.0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">tcp   </span><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9937341057644-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>列出的结果是按列显示的。每一列的值分别为：</p>\n<ol>\n<li>Container ID ：一开始的几个字符对应你的容器的唯一 ID</li>\n<li>Image ：你运行容器的镜像名</li>\n<li>Command ：容器启动后运行的命令</li>\n<li>Created ：创建时间</li>\n<li>Status ：容器当前状态</li>\n<li>Ports ：与宿主端口相连接的端口信息</li>\n<li>Names ：容器名（如果你没有命名你的容器，那么会随机创建）</li>\n</ol>\n<h3 id=\"toc_3\">如何查看 Docker 容器的历史纪录？</h3>\n<p>在第一步我们使用了 <code>-d</code> 参数来将容器，在它一开始运行的时候，就从当前的 shell 中脱离出来。在这种情况下，我们不知道容器里面发生了什么。所以为了查看容器的历史纪录，Docker 提供了 <code>logs</code> 命令。它采用容器名称或 ID 作为参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b993e311669790\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container logs cranky_cori\r\nAH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message\r\nAH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message\r\n[Thu May 31 18:35:07.301158 2018] [mpm_event:notice] [pid 1:tid 139734285989760] AH00489: Apache/2.4.33 (Unix) configured -- resuming normal operations\r\n[Thu May 31 18:35:07.305153 2018] [core:notice] [pid 1:tid 139734285989760] AH00094: Command line: 'httpd -D FOREGROUND'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b993e311669790-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b993e311669790-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b993e311669790-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b993e311669790-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b993e311669790-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b993e311669790-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b993e311669790-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container logs cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b993e311669790-2\"><span class=\"crayon-v\">AH00558</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Could </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reliably </span><span class=\"crayon-e\">determine </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">server</span><span class=\"crayon-s\">'s fully qualified domain name, using 172.17.0.2. Set the '</span><span class=\"crayon-i\">ServerName</span><span class=\"crayon-s\">' directive globally to suppress this message</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b993e311669790-3\"><span class=\"crayon-s\">AH00558: httpd: Could not reliably determine the server'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fully </span><span class=\"crayon-e\">qualified </span><span class=\"crayon-e\">domain </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">using</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">172.17.0.2.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set </span><span class=\"crayon-i\">the</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ServerName'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">directive </span><span class=\"crayon-e\">globally </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">suppress </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">message</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b993e311669790-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07.301158</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mpm_event</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">notice</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">139734285989760</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AH00489</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Apache</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2.4.33</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Unix</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">configured</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">resuming </span><span class=\"crayon-e\">normal </span><span class=\"crayon-i\">operations</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b993e311669790-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">May</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">07.305153</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">core</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">notice</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">pid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">tid</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">139734285989760</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AH00094</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Command </span><span class=\"crayon-v\">line</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'httpd -D FOREGROUND'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b993e311669790-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>这里我使用了容器名称作为参数。你可以看到在我们的 httpd 容器中与 Apache 相关的历史纪录。</p>\n<h3 id=\"toc_4\">如何确定 Docker 容器的进程？</h3>\n<p>容器是一个使用宿主资源来运行的进程。这样，你可以在宿主系统的进程表中定位容器的进程。让我们在宿主系统上确定容器进程。</p>\n<p>Docker 使用著名的 <code>top</code> 命令作为子命令的名称，来查看容器产生的进程。它采用容器的名称或 ID 作为参数。在旧版本的 Docker 中，只可运行 <code>docker top</code> 命令。在新版本中，<code>docker top</code> 和 <code>docker container top</code> 命令都可以生效。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b9943102407174\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container top  cranky_cori\r\nUID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD\r\nroot                15702               15690               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\nbin                 15729               15702               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\nbin                 15730               15702               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\nbin                 15731               15702               0                   18:35               ?                   00:00:00            httpd -DFOREGROUND\r\n\r\nroot@kerneltalks # ps -ef |grep -i 15702\r\nroot     15702 15690  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nbin      15729 15702  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nbin      15730 15702  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nbin      15731 15702  0 18:35 ?        00:00:00 httpd -DFOREGROUND\r\nroot     15993 15957  0 18:59 pts/0    00:00:00 grep --color=auto -i 15702\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9943102407174-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9943102407174-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container top  cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-2\"><span class=\"crayon-e\">UID                 </span><span class=\"crayon-e\">PID                 </span><span class=\"crayon-i\">PPID</span><span class=\"crayon-h\">                </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">                   </span><span class=\"crayon-e\">STIME               </span><span class=\"crayon-e\">TTY                 </span><span class=\"crayon-e\">TIME                </span><span class=\"crayon-e\">CMD</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-3\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">                </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15690</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-4\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">15729</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-5\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">15730</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-6\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">                 </span><span class=\"crayon-cn\">15731</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\">               </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\">            </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-8\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># ps -ef |grep -i 15702</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-9\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15690</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-10\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15729</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-11\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15730</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-12\"><span class=\"crayon-i\">bin</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">15731</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">httpd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">DFOREGROUND</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9943102407174-13\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">15993</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15957</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">59</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">auto</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15702</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9943102407174-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n<p>在第一个输出中，列出了容器产生的进程的列表。它包含了所有细节，包括用户号uid、进程号pid，父进程号ppid、开始时间、命令，等等。这里所有的进程号你都可以在宿主的进程表里搜索到。这就是我们在第二个命令里做得。这证明了容器确实是宿主系统中的进程。</p>\n<h3 id=\"toc_5\">如何停止 Docker 容器？</h3>\n<p>只需要 <code>stop</code> 命令！同样，它采用容器名称或 ID 作为参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b9947552764393\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container stop cranky_cori\r\ncranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9947552764393-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9947552764393-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9947552764393-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b9947552764393-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container stop cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9947552764393-2\"><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line\" id=\"crayon-5b35f386b9947552764393-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">如何列出停止的或不活动的 Docker 容器？</h3>\n<p>现在我们停止了我们的容器，这时如果我们使用 <code>ls</code> 命令，它将不会出现在列表中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b994d174125091\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container ls\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b994d174125091-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b994d174125091-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b994d174125091-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b994d174125091-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b994d174125091-2\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND             </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS               </span><span class=\"crayon-i\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b994d174125091-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>所以，在这种情况下，如果想要查看停止的或不活动的容器，你需要在 <code>ls</code> 命令里同时使用 <code>-a</code> 参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b9951143757882\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container ls -a\r\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS                     PORTS               NAMES\r\nc46f2e9e4690        httpd               \"httpd-foreground\"   33 minutes ago      Exited (0) 2 minutes ago                       cranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9951143757882-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9951143757882-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9951143757882-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9951143757882-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b9951143757882-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9951143757882-2\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND              </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS                     </span><span class=\"crayon-e\">PORTS               </span><span class=\"crayon-e\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9951143757882-3\"><span class=\"crayon-e\">c46f2e9e4690        </span><span class=\"crayon-i\">httpd</span><span class=\"crayon-h\">               </span><span class=\"crayon-s\">\"httpd-foreground\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago      </span><span class=\"crayon-e\">Exited</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago                       </span><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9951143757882-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>有了 <code>-a</code> 参数，现在我们可以查看已停止的容器。注意这些容器的状态被标注为 已退出exited。既然容器只是一个进程，那么用“退出”比“停止”更合适！</p>\n<h3 id=\"toc_7\">如何（重新）启动 Docker 容器？</h3>\n<p>现在，我们来启动这个已停止的容器。这和运行一个容器有所区别。当你运行一个容器时，你将启动一个全新的容器。当你启动一个容器时，你将开始一个已经停止并保存了当时运行状态的容器。它将以停止时的状态重新开始运行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b9955286975266\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks #  docker container start c46f2e9e4690\r\nc46f2e9e4690\r\n\r\nroot@kerneltalks # docker container ls -a\r\nCONTAINER ID        IMAGE               COMMAND              CREATED             STATUS              PORTS                NAMES\r\nc46f2e9e4690        httpd               \"httpd-foreground\"   35 minutes ago      Up 8 seconds        0.0.0.0:80-&gt;80/tcp   cranky_cori\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9955286975266-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9955286975266-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9955286975266-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9955286975266-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9955286975266-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9955286975266-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9955286975266-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b9955286975266-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#  docker container start c46f2e9e4690</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9955286975266-2\"><span class=\"crayon-e\">c46f2e9e4690</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9955286975266-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9955286975266-4\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls -a</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9955286975266-5\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND              </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS                </span><span class=\"crayon-e\">NAMES</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9955286975266-6\"><span class=\"crayon-e\">c46f2e9e4690        </span><span class=\"crayon-i\">httpd</span><span class=\"crayon-h\">               </span><span class=\"crayon-s\">\"httpd-foreground\"</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">minutes </span><span class=\"crayon-e\">ago      </span><span class=\"crayon-i\">Up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">seconds</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0.0.0.0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">tcp   </span><span class=\"crayon-v\">cranky</span><span class=\"crayon-sy\">_</span>cori</div><div class=\"crayon-line\" id=\"crayon-5b35f386b9955286975266-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h3 id=\"toc_8\">如何移除 Docker 容器？</h3>\n<p>我们使用 <code>rm</code> 命令来移除容器。你不可以移除运行中的容器。移除之前需要先停止容器。你可以使用 <code>-f</code> 参数搭配 <code>rm</code> 命令来强制移除容器，但并不推荐这么做。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b35f386b9958627927110\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # docker container rm cranky_cori\r\ncranky_cori\r\nroot@kerneltalks # docker container ls -a\r\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9958627927110-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9958627927110-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9958627927110-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b35f386b9958627927110-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b35f386b9958627927110-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b35f386b9958627927110-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container rm cranky_cori</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9958627927110-2\"><span class=\"crayon-e\">cranky_cori</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9958627927110-3\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># docker container ls -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b35f386b9958627927110-4\"><span class=\"crayon-e\">CONTAINER </span><span class=\"crayon-e\">ID        </span><span class=\"crayon-e\">IMAGE               </span><span class=\"crayon-e\">COMMAND             </span><span class=\"crayon-e\">CREATED             </span><span class=\"crayon-e\">STATUS              </span><span class=\"crayon-e\">PORTS               </span><span class=\"crayon-i\">NAMES</span></div><div class=\"crayon-line\" id=\"crayon-5b35f386b9958627927110-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>你看，一旦移除了容器，即使再使用 <code>ls -a</code> 命令也查看不到容器了。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114145\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114145votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114145\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>"], "front_image_path": "full/e488919f69e980ca011ca1f7af3988436ffd26d1.jpg"}